<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>[PLAYDATA 백엔드 1기] 2주차 회고록</title>
    <link href="/2023/06/02/playdata-2week-md/"/>
    <url>/2023/06/02/playdata-2week-md/</url>
    
    <content type="html"><![CDATA[<h2 id="나의-자바-실력은-어느-정도-늘었을까"><a href="#나의-자바-실력은-어느-정도-늘었을까" class="headerlink" title="나의 자바 실력은 어느 정도 늘었을까,"></a>나의 자바 실력은 어느 정도 늘었을까,</h2><p>2주간의 수업을 받고 자바를 하나도 모르던 내가 지금은 여러 간단한 프로그램을 만들 수 있을 정도의 실력이 늘었다.<br>내가 이렇게 혼자 만들어본 건 처음이라 너무 신나고 내 실력이 늘고 있다는 걸 느껴 행복했다.<br><img src="https://github.com/icebear2n2/icebear2n2.github.io/assets/87232411/35b72f38-671c-4c5c-bd2d-8ebd9b312d29" alt="전화번호부 프로그램"><br><img src="https://github.com/icebear2n2/icebear2n2.github.io/assets/87232411/b115b9d0-ccf8-4fde-86b7-2c79ae8269a5" alt="로또 번호 생성 프로그램"></p><h2 id="사람들과의-커뮤니케이션의-중요성"><a href="#사람들과의-커뮤니케이션의-중요성" class="headerlink" title="사람들과의 커뮤니케이션의 중요성"></a>사람들과의 커뮤니케이션의 중요성</h2><p>나는 어떤 문제가 나오면 누구의 도움 없이 혼자 풀어야 한다는 생각을 가지고 있었다.<br>어느 날 내가 한 문제를 못 풀고 너무나 속상했다. 그러다 팀원 분께 도움을 요청했다.</p><p>나는 물어본다는 것에 너무나 자존심이 상하는 일이라고 생각했는데 이건 잘못된 생각이란 걸 이번 기회에 느꼈다.<br>사람들은 내게 <strong>“못 풀 수도 있는 것이다.”</strong> , <strong>“모르면 물어보라고 팀원이 있는 것이다.”</strong> 라고 조언을 주셨다.<br>이 조언을 통해 나는 이 잘못된 생각을 놓아줄 수 있었다. 너무 감사하다.</p><h2 id="나-자신과의-약속을-지킨-성취감-플레이데이터의-완벽한-공부-환경"><a href="#나-자신과의-약속을-지킨-성취감-플레이데이터의-완벽한-공부-환경" class="headerlink" title="나 자신과의 약속을 지킨 성취감(+ 플레이데이터의 완벽한 공부 환경)"></a>나 자신과의 약속을 지킨 성취감(+ 플레이데이터의 완벽한 공부 환경)</h2><p>나는 학원을 다니며 9시까지는 학원에 있다 가자고 다짐했다.<br>2주간 나와의 약속을 지켰다.(하루는 8시 25분에 가긴 했지만 ㅎㅎ…)</p><p>학원이 공부할 분위기가 나질 않았다면 2주간 9시까지 남는 건 너무 힘든 일이다.<br>그러나 학원에 남아서 공부하는 사람들도 꽤 많았고, 스터디 카페에 온 기분을 느끼게 해준다.</p><p>우리 조원 분들도 많이 남아계셔서 같이 으싸으싸하며 9시까지 공부할 수 있었다.</p><h2 id="다음-주-다짐"><a href="#다음-주-다짐" class="headerlink" title="다음 주 다짐"></a>다음 주 다짐</h2><p>이번 주는 몸도 조금 아파서 저번 주보다 열정 에너지가 적었다.<br>다음 주는 너무 무리하지 않고 적당히 열정 에너지를 지키며 한 주를 보내고 싶다.</p>]]></content>
    
    
    <categories>
      
      <category>PLAYDATA</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PLAYDATA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[PLAYDATA 백엔드 1기] 1주차 회고록</title>
    <link href="/2023/05/26/playdata-1week/"/>
    <url>/2023/05/26/playdata-1week/</url>
    
    <content type="html"><![CDATA[<h1 id="새로운-도전"><a href="#새로운-도전" class="headerlink" title="새로운 도전"></a>새로운 도전</h1><p>회사를 관두게 되며 본가인 제주로 다시 내려오게 되었다.<br>초반에는 클라우드를 알고 있으니 클라우드를 깊게 공부하면 되겠지 싶어 클라우드 강의를 끊고 공부를 하고 있었다.</p><p>강의 중 스프링부트를 사용하여 웹서버를 구축하는 실습이 있었다. 이제까지 웹서버를 Node.js나 Flask를 통해 만들어봤는데 스프링부트라니, 궁금했다.<br>강의에서 배운 내용을 사용하여 프로젝트를 만들어보기 위해 아무 생각없이 스프링부트 강의 하나를 사게 되었다.</p><p>스프링부트로 클론코딩을 해본 후, “아 이거다!” 라는 생각이 들었고 오랜만에 심장이 두근거렸다. 그만큼 재밌는 걸 찾았다는 뜻이다.<br>하지만 자바는 혼자 공부하기엔 너무 버거웠고 제주에 있는 것도 지겨워 오프라인 부트 캠프를 찾게 되었다.</p><p>그러다 플레이데이터 백엔드 부트캠프를 보게 되었다.<br>자바와 스프링부트가 과정에 들어있었고 또한 내가 계속 공부하고 싶었던 CI&#x2F;CD도 과정에 포함되어 있었다.</p><p>그렇게 플레이 데이터 부트캠프를 지원하게 되었다.</p><h1 id="새로운-도전에-대한-불안"><a href="#새로운-도전에-대한-불안" class="headerlink" title="새로운 도전에 대한 불안"></a>새로운 도전에 대한 불안</h1><p>불안한 감정이 들 수 밖에 없었다.<br>제주에서 서울로 학원을 다니러 올라가야 한다는 것 자체가 버거운 도전이다. 혹여나 중도 포기하게 될까 걱정도 되었다.<br>그러나 부모님께서 <strong>“실패해도 괜찮다. 도전해보았다는 것이 성공보다 대단한 것이다.”</strong> 라고 말씀해주셨다.<br>그 덕분에 마음을 굳게 먹고 도전을 할 수 있었다. 부모님께 항상 감사하다.</p><h1 id="자바의-즐거움"><a href="#자바의-즐거움" class="headerlink" title="자바의 즐거움"></a>자바의 즐거움</h1><p>학원이 개강했고 첫 챕터는 자바 수업이였다. 이제까지 어렵게만 생각하여 멀리했던 언어인데 배워보니 생각보다 재밌었다.<br>어려워 머리로 이해가 가지 않은 부분이 있었지만 그래도 가슴으로는 이해했다<br>그것으로 충분하다고 내 자신을 격려했다.</p><h1 id="수업을-들으며-느끼게-된-나의-단점"><a href="#수업을-들으며-느끼게-된-나의-단점" class="headerlink" title="수업을 들으며 느끼게 된 나의 단점"></a>수업을 들으며 느끼게 된 나의 단점</h1><p>항상 나는 알고리즘 문제를 복잡하게 생각했다. 숙제로 내주신 문제도 쉽다고 하셨지만 내겐 너무 어려운 문제였다.<br>3시간을 코드를 쳐봐도 답이 나오질 않았다. 그렇게 문제를 계속 풀다 “문제에 의도를 내가 찾기 못해서 그런 것이 아닐까?” 라는 생각이 들었다.<br>처음으로 문제에 대한 의도를 찾아보게 되었고, 의도를 찾고 천천히 풀어보니 문제가 쉽게 풀렸다.<br>수업 덕분에 이제까지 나의 풀이 방식이 잘못되었다는 걸 알게 되었다.</p><h1 id="플레이데이터의-장점"><a href="#플레이데이터의-장점" class="headerlink" title="플레이데이터의 장점"></a>플레이데이터의 장점</h1><p>공부하기 너무 좋은 환경이다.<br>나는 카페에 가서도 공부가 안 되는 사람인데, 이곳을 와서 내 인생 처음으로 의자에 오래 앉아 있었다.<br>환경에 예민한 나도 공부하게 되는 곳이다. 이 부분에 플레이데이터에 감사드린다.</p><p>읽고 싶던 책이 거의 다 배치되어 있어 좋았다. 굳이 서점을 갈 필요가 없는 거 같다.</p><p>다른 장점들도 많지만 개인적으로만 느끼는 거 같아 줄이겠다.</p><h1 id="그러나-아쉬운-점"><a href="#그러나-아쉬운-점" class="headerlink" title="그러나 아쉬운 점"></a>그러나 아쉬운 점</h1><p>학원이 밤 9시까지만 운영을 해서 아쉽다.<br>조금 더 공부하고 싶은데 9시에 끝나고 집에 가면 공부할 힘이 없고 바로 자게 된다..<br>진짜 아쉽당</p><h1 id="앞으로의-다짐"><a href="#앞으로의-다짐" class="headerlink" title="앞으로의 다짐"></a>앞으로의 다짐</h1><p>앞으로도 꾸준히 노력하여 포기하지 않고 한 발자국씩 나아갈 수 있는 사람이 되고 싶고, 동기 분들께 도움 줄 수 있는 것은 도움을 많이 드리고 싶다.</p>]]></content>
    
    
    <categories>
      
      <category>PLAYDATA</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PLAYDATA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] AWS Certificated Solution Architect - Professional(SAP-C01) 자격증 취득 후기</title>
    <link href="/2023/05/25/aws-certificate-architect-professional/"/>
    <url>/2023/05/25/aws-certificate-architect-professional/</url>
    
    <content type="html"><![CDATA[<h1 id="AWS-SAP-SAP-C01-자격증이란"><a href="#AWS-SAP-SAP-C01-자격증이란" class="headerlink" title="AWS SAP(SAP-C01) 자격증이란 ?"></a>AWS SAP(SAP-C01) 자격증이란 ?</h1><p>아래와 같은 지식이 요구됩니다.</p><p>AWS CLI, AWS API, AWS CloudFormation 템플릿, AWS 결제 콘솔, AWS 관리 콘솔, 스크립팅 언어, Windows 및 Linux 환경에 대한 지식</p><p>기업의 여러 애플리케이션 및 프로젝트 전반에 걸쳐 아키텍처 설계에 대한 모범 사례 지침을 제공하는 능력과 비즈니스 목표를 애플리케이션&#x2F;아키텍처 요구 사항에 매핑하는 능력</p><p>클라우드 애플리케이션 요구 사항을 평가하고, AWS에서 애플리케이션을 구현, 배포 및 프로비저닝하는 데 필요한 설계적 추천을 할 수 있는 능력</p><p>주요 AWS 기술(예: VPN, AWS Direct Connect)과 지속적인 통합 및 배포 프로세스를 사용하여 하이브리드 아키텍처를 설계할 수 있는 능력</p><p>아래와 같이 AWS 자격증 중에서 제일 높은 단계의 자격증입니다.<br><img src="https://user-images.githubusercontent.com/87232411/149620936-af16220a-fa3a-4c4f-a44e-c90e18b3efa4.jpeg" alt="Slide1"><br><br/><br><br/></p><h1 id="왜-따려고-했는가"><a href="#왜-따려고-했는가" class="headerlink" title="왜 따려고 했는가,"></a>왜 따려고 했는가,</h1><p>AWS에서 제가 생각하고 있던 마지막 자격증이 프로였고, 또한 회사에서도 있으면 도움된다는 말씀에 “그래 한 번 해보자 !”라는 마음가짐으로 시작했습니다.</p><p><img src="https://user-images.githubusercontent.com/87232411/149621354-dc34b530-7f41-4995-aed5-c521f69c5a18.jpeg" alt="download"></p><br/><br/><h1 id="시험-준비-기간-amp-시험-공부-방법"><a href="#시험-준비-기간-amp-시험-공부-방법" class="headerlink" title="시험 준비 기간 &amp; 시험 공부 방법"></a>시험 준비 기간 &amp; 시험 공부 방법</h1><p>준비 기간은 한달이였습니다.</p><p>제 개인적인 공부법은 오답 정리입니다.<br>덤프를 푼 후에 오답 정리를 하며 왜 이것이 오답인지 이해 &amp; 왜 이것이 정답인지 이해, 마지막으로 아무리 풀어도 이해가 안 되는 건 키워드로 정리했습니다. (ex. DynamoDB &#x3D; NoSQL)</p><p>저는 천재가 아니기에 반복으로 승부를 보았습니다.<br>오답 정리를 <strong>꾸준히 반복</strong>합니다. 아무리 몰라도 반복하면 이해가 되더라구요<br>진짜 4주 동안 이틀 빼고는 매일 회사에 나갔던 것 같습니다 ….ㅠ</p><p><img src="https://user-images.githubusercontent.com/87232411/149621122-2191b6cf-ee3c-412f-b4ed-49aa5b39d80e.jpeg" alt="93_3535"></p><br/><br/><h1 id="시험-후기"><a href="#시험-후기" class="headerlink" title="시험 후기"></a>시험 후기</h1><p>와.. 다들 프로는 어렵다 어렵다 하는 이유를 시험을 보고 나서야 느꼈습니다…<br>진짜 문제 풀면서 눈에 눈물이 몇번 고였는지….<br>난이도를 어소시에이트와 비교하자면,<br>어소시에이트는 모르는 문제도 어느 정도 고민해보면 답이 나왔지만<br>프로는 아무리 고민해봐도 “왜 답에 없지 ?.. “라는 생각만 들었습니다.</p><p>문제의 50%는 새로운 경향의 문제이거나 기존 문제를 완전히 꼬아서 내서 이건 덤프를 달달 외워도 합격하기 어렵겠다는 생각과 “탈락하겠구나 …, 또 매일 회사에 나가야겠구나…”라는 생각을 하며 울먹이며 마지막 설문 조사를 제출했습니다 ..</p><p>AWS는 불합격하면 주황색 글씨로 “불합격”이라고 나오는데 주황색 글씨가 안 보여서 뭐지 .. 하다가<br>“합격” 이라는 단어를 보고 이게 꿈인가 싶다가 너무 놀라서 다리에 힘 풀리고 집에 들어갔습니다 ㅋㅋㅋㅠㅠ</p><p>진짜 … 프로 시험 문제가 너무 강력하게 남아서 당분간 자격증은 쉬려고 합니다… (3년 후에 또 어떻게 따지 ….ㅠ)</p><h1 id="마지막으로-합격-인증"><a href="#마지막으로-합격-인증" class="headerlink" title="마지막으로 합격 인증 !"></a>마지막으로 합격 인증 !</h1><img src="https://user-images.githubusercontent.com/87232411/149525115-21b6d7bc-1281-4e84-aa22-6df20849474b.jpg"><br/><br/><br/>]]></content>
    
    
    
    <tags>
      
      <tag>Certificate</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] AWS Certificated Solution Architect - Associate (SAA-C02) 자격증 취득 후기</title>
    <link href="/2023/05/25/aws-certificate-architect-associate/"/>
    <url>/2023/05/25/aws-certificate-architect-associate/</url>
    
    <content type="html"><![CDATA[<h2 id="AWS-SAA-C02-란"><a href="#AWS-SAA-C02-란" class="headerlink" title="AWS SAA-C02 란?"></a>AWS SAA-C02 란?</h2><p>명칭은 <strong>AWS Certified Solutions Architect - Associate</strong><br>AWS 자격증 중에서 어소시에이트 단계의 아키텍트 자격증입니다.</p><p><img src="https://images.velog.io/images/icebear2n2/post/5101b61d-f2f9-4f3e-b630-944d4f252b2c/AWS.png"></p><p>AWS SAA는 AWS 기술의 기반으로 안전하고 강력한 애플리케이션을 설계 및 배포하는 방법에 대한 지식을 효과적으로 입증하고, 고객 요구 사항을 기반으로 아키텍처 설계 원칙을 사용하여 솔루션을 정의, 또한 모범 사례를 기반으로 프로젝트 수명 주기 전반에 걸쳐 조직에 구현 지침을 제공할 수 있다는 능력 검증을 할 수 있습니다.</p><h2 id="시험-차질"><a href="#시험-차질" class="headerlink" title="시험 차질 .."></a>시험 차질 ..</h2><p>두 번째 시험이 원래 8월 9일날 예정이였습니다 시험 당일에 신분증 확인 중 문제가 생겨 일정을 조정하고 시험을 봐야 했었는데, 연락이 안 되서 시험을 못 볼 뻔한 상황이..ㅠ<br>다행히 제 문제를 시험센터에서 확인해주셔서 8월 31일 무사히 시험을 치뤄 합격했습니다 :)</p><h2 id="합격-후기"><a href="#합격-후기" class="headerlink" title="합격 후기"></a>합격 후기</h2><p>AWS 기초 자격증 난이도를 보고 에이 쉽겠지 하고 봤다가 코 베였네여 …ㅠ<br>한 번 떨어지고 두 번만에 붙었습니다</p><p>스터디도 열심히 참여하고, 유데미 문제도 열심히 풀고 ..</p><p>준비하는 기간 반은 유데미 문제 풀고, 노션에 틀린 문제들 정리하고, 정리한 거 다시 보는 걸 반복했던 거 같습니다 처음에는 “이게 무슨 말이야 ?..” 했었는데 몇 번 반복하니 이해가 되더라구요</p><p><strong>뭐든 처음에는 너무 어렵지만 나중에 보면 “이걸 어려워했다고 ?..” 이런 생각이 드실 겁니다<br>그러니 너무 부담가지지 마시고 “곧 쉬워질 거야!” 하는 생각으로 편하게 공부하시면 좋겠습니다 :)</strong></p><p>AWS에 대해 아직 많이 부족하다 느끼시면 AWS 스터디를 찾아 참여하는 것을 강추드립니다 !</p><h2 id="마지막으로-합격-인증"><a href="#마지막으로-합격-인증" class="headerlink" title="마지막으로, 합격 인증 !"></a>마지막으로, 합격 인증 !</h2><img src="https://images.velog.io/images/icebear2n2/post/2d24c203-3ce4-47b4-87a0-ad382f560477/AWS-SAA.png"><hr/><p><strong>참고 자료: <a href="https://d1.awsstatic.com/ko_KR/training-and-certification/docs-sa-assoc/AWS-Certified-Solutions-Architect-Associate_Exam-Guide.pdf">https://d1.awsstatic.com/ko_KR/training-and-certification/docs-sa-assoc/AWS-Certified-Solutions-Architect-Associate_Exam-Guide.pdf</a></strong></p><p><strong>사진 출처: <a href="https://aws.amazon.com/ko/certification/?nc2=sb_ce_co">https://aws.amazon.com/ko/certification/?nc2=sb_ce_co</a></strong></p>]]></content>
    
    
    
    <tags>
      
      <tag>Certificate</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Terraform</title>
    <link href="/2023/03/08/Terraform/"/>
    <url>/2023/03/08/Terraform/</url>
    
    <content type="html"><![CDATA[<h2 id="1-테라폼의-개요"><a href="#1-테라폼의-개요" class="headerlink" title="1. 테라폼의 개요"></a>1. 테라폼의 개요</h2><p><strong>테라폼(Terraform)</strong> 은 Infrastructure 자동화 도구로서, 클라우드 서비스 및 온프레미스 환경에서 Infrastructure를 코드로 정의하고 프로비저닝하는 데 사용됩니다.</p><tr>Infrastructure 코드(Infrastructure as Code, IaC) 개념을 바탕으로 동작하며, 코드 버전 관리 및 협업, Infrastructure 변경사항 추적 등의 장점을 제공합니다. 다양한 클라우드 서비스(예: AWS, Azure, GCP 등) 및 온프레미스 환경에서 동작하며, 클라우드 서비스별로 제공하는 리소스(예: EC2 인스턴스, S3 버킷 등)를 코드로 정의하여 프로비저닝할 수 있습니다.<h2 id="2-테라폼-설치-및-설정-MacOs"><a href="#2-테라폼-설치-및-설정-MacOs" class="headerlink" title="2. 테라폼 설치 및 설정 (MacOs)"></a>2. 테라폼 설치 및 설정 (MacOs)</h2><p>패키지 저장소인 hashicorp tap 설치 후 terraform 설치</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">brew tap hashicorp/tap<br><br>brew install hashicorp/tap/terraform<br></code></pre></td></tr></table></figure><br/><p>terraform 작동 확인</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">terraform -<span class="hljs-built_in">help</span></span><br>Usage: terraform [global options] &lt;subcommand&gt; [args]<br><br>The available commands for execution are listed below.<br>The primary workflow commands are given first, followed by<br>less common or more advanced commands.<br><br>Main commands:<br>  init          Prepare your working directory for other commands<br>  validate      Check whether the configuration is valid<br>  plan          Show changes required by the current configuration<br>  apply         Create or update infrastructure<br>  destroy       Destroy previously-created infrastructure<br></code></pre></td></tr></table></figure><h2 id="3-Infrastructure-코드-작성"><a href="#3-Infrastructure-코드-작성" class="headerlink" title="3. Infrastructure 코드 작성"></a>3. Infrastructure 코드 작성</h2><p>해당 코드를 실행시키기 위해서는 Docker가 실행되어 있어야 합니다.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">open -a Docker<br></code></pre></td></tr></table></figure><br/><p><code>main.tf</code> 파일 생성</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">touch main.tf<br><br>vim main.tf<br></code></pre></td></tr></table></figure><br/><p>nginx docker 컨테이너 생성을 위한 코드 작성 후 저장</p><tr/><p><code>image</code>: <strong>nginx:latest</strong><br><code>internal port</code>: <strong>80</strong><br><code>external port</code>: <strong>8000</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs tf">terraform &#123;<br>  required_providers &#123;<br>    docker = &#123;<br>      source  = &quot;kreuzwerker/docker&quot;<br>      version = &quot;~&gt; 2.13.0&quot;<br>    &#125;<br>  &#125;<br>&#125;<br><br>provider &quot;docker&quot; &#123;&#125;<br><br>resource &quot;docker_image&quot; &quot;nginx&quot; &#123;<br>  name         = &quot;nginx:latest&quot;<br>  keep_locally = false<br>&#125;<br><br>resource &quot;docker_container&quot; &quot;nginx&quot; &#123;<br>  image = docker_image.nginx.latest<br>  name  = &quot;nginx&quot;<br>  ports &#123;<br>    internal = 80<br>    external = 8000<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="4-프로비저닝"><a href="#4-프로비저닝" class="headerlink" title="4. 프로비저닝"></a>4. 프로비저닝</h2><p>프로젝트 초기화</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">terraform init</span><br>Initializing the backend...<br><br>...<br><br>Terraform has been successfully initialized!<br></code></pre></td></tr></table></figure><br/><p>NGINX 서버 컨테이너 프로비저닝</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">terraform apply</span><br>Do you want to perform these actions?<br>  Terraform will perform the actions described above.<br>  Only &#x27;yes&#x27; will be accepted to approve.<br><br>  Enter a value: yes<br><br><br>  Apply complete! Resources: 2 added, 0 changed, 0 destroyed.<br></code></pre></td></tr></table></figure><br/><p>컨테이너 실행 여부 확인</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker ps</span><br>CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                  NAMES<br>fd2b2665dc90   114aa6a9f203   &quot;/docker-entrypoint.…&quot;   23 seconds ago   Up 22 seconds   0.0.0.0:8000-&gt;80/tcp   nginx<br></code></pre></td></tr></table></figure><br/><p>웹 페이지 접속 여부 확인<br><img width="562" src="https://user-images.githubusercontent.com/87232411/223623132-bbd56666-2b43-4112-8df6-d466b77b45c9.png"></p><br/><p>컨테이너 종료</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">terraform destroy<br></code></pre></td></tr></table></figure><h2 id="5-테라폼-모듈"><a href="#5-테라폼-모듈" class="headerlink" title="5. 테라폼 모듈"></a>5. 테라폼 모듈</h2><p>테라폼에서 모듈은 리소스, 변수, 출력값 등을 포함하며, 다른 모듈에서 재사용할 수 있습니다.</p><tr><p>이를 통해 코드 중복을 줄이고, 모듈화된 코드를 관리함으로써 코드를 보다 쉽게 유지보수할 수 있습니다.<br>모듈은 모듈 디렉토리 안에 .tf 파일들로 구성됩니다. 테라폼은 이러한 .tf 파일들을 읽어서 모듈을 로드하고 사용합니다. 모듈은 모듈 내부에서 정의된 리소스와 데이터를 관리하며, 다른 모듈과 변수 및 출력값을 공유할 수 있습니다.</p><p><img src="https://user-images.githubusercontent.com/87232411/223623817-039bbf9b-3891-4270-b8cd-4ed3645677b9.svg"></p><h2 id="6-테라폼-확장성"><a href="#6-테라폼-확장성" class="headerlink" title="6. 테라폼 확장성"></a>6. 테라폼 확장성</h2><p>테라폼은 클라우드 서비스를 비롯한 다양한 Infrastructure를 코드로 정의하여 관리할 수 있는 확장성이 뛰어난 도구입니다.</p><tr><p>클라우드 서비스(예: AWS, Azure, GCP)를 비롯한 다양한 Infrastructure를 지원하며, 확장성과 유연성을 제공하기 위해 모듈화된 코드 구조와 플러그인 아키텍처를 사용하고 있습니다.<br>또한, 테라폼은 Infrastructure 변경사항을 추적하고 코드 버전 관리를 할 수 있는 기능을 제공하여, 대규모 Infrastructure를 효과적으로 관리할 수 있습니다.<br>이러한 확장성과 유연성을 통해, 테라폼은 다양한 Infrastructure 관리 요구사항에 대응할 수 있으며, 새로운 환경에 대한 대응도 빠르게 이루어질 수 있습니다.</p><br/><br/><br/><p><strong>참고자료: ChatGPT, Terraform 공식 사이트</strong><br><strong>사진 출처: <a href="https://www.scalefactory.com/blog/2021/12/22/terraform-v1.1-the-journey-continues/tf11x.png">https://www.scalefactory.com/blog/2021/12/22/terraform-v1.1-the-journey-continues/tf11x.png</a></strong></p>]]></content>
    
    
    <categories>
      
      <category>Terraform</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Terraform</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10주간 여정이였던 AFOS 2기 스터디 회고록</title>
    <link href="/2021/08/18/2021-08-18-AFOS-RV/"/>
    <url>/2021/08/18/2021-08-18-AFOS-RV/</url>
    
    <content type="html"><![CDATA[<p>길면 길고, 짧으면 짧았던 AWS 기초 스터디가 드디어 끝났다. 끝난 기념으로 짧은(?) 회고록을 적어본다.</p><img src="/css/images/notebook.jpg"><h2 id="스터디-목차"><a href="#스터디-목차" class="headerlink" title="스터디 목차"></a>스터디 목차</h2><ul><li><strong>1주차</strong> OT, 클라우드 개념과 장단점, AWS 글로벌 인프라 소개, IAM 기초</li><li><strong>2주차</strong> 컴퓨팅</li><li><strong>3주차</strong> 네트워킹</li><li><strong>4주차</strong> 스토리지</li><li><strong>5주차</strong> 보안</li><li><strong>6주차</strong> DB</li><li><strong>7주차</strong> 네트워킹</li><li><strong>8주차</strong> EC2 AutoScaling</li><li><strong>9주차</strong> (IaaS 기반) Wordpress</li><li><strong>10주차</strong> (IaaS 기반) Wordpress &amp; WooCommerce<br/><br/></li></ul><h2 id="좋았던-점"><a href="#좋았던-점" class="headerlink" title="좋았던 점"></a>좋았던 점</h2><h3 id="온라인-스터디"><a href="#온라인-스터디" class="headerlink" title="온라인 스터디"></a>온라인 스터디</h3><p>개인적으로 이 부분이 너무 좋았던 거 같다. 살고 있는 지역에서 스터디를 하기에는 무리가 없지않아 있었는데, 온라인 스터디로 아무 부담없이 집에서 편하게 스터디를 들었던 거 같다.</p><h3 id="진로-방향"><a href="#진로-방향" class="headerlink" title="진로 방향"></a>진로 방향</h3><p>스터디에 참여하기 전까지 진로에 대해 많이 방황하고 있었다. 큰틀은 IT 분야였지만 정확히 내가 무엇을 좋아하는 지를 몰랐다.<br>그러다 Cloud Computing 쪽으로 공부해보라는 주변 분에 말씀을 듣고 스터디를 참여하였는데 AWS에 대해 공부를 하니 생각보다 Cloud Computing 공부가 너무 재밌었다. 프로그래밍 공부를 했을 때 보다 더 재미를 느꼈었고, 이 분야로 공부하면 더 잘 할 수 있겠다는 자신감도 생겨났었다. 그 덕분에 미래를 더 자세히 설계할 수 있었던 계기가 되었다.</p><h3 id="재밌는-실습들"><a href="#재밌는-실습들" class="headerlink" title="재밌는 실습들"></a>재밌는 실습들</h3><p>CloudNet@팀에서 재밌는 실습 내용들을 많이 넣어놔주셨다. 나는 매번 스터디를 참여할 때마다 실습 내용이 너무 재밌었던 거 같다. 개인적으로 이론적보다는 실습으로 습득하게 빠른 편인데, 실습을 통해 AWS에 대해 더 자세히 이해할 수 있는 기회가 되었고, AWS SAA 시험을 준비하면서 이게 뭐지 ? 했던 부분들도 스터디 내용에 있던 실습들 덕분에 바로 이해할 수 있었다.</p><h3 id="블로그-정리-기회"><a href="#블로그-정리-기회" class="headerlink" title="블로그 정리 기회"></a>블로그 정리 기회</h3><p>스터디를 참여하며 스터디 내용을 블로그에 정리하는 습관을 들였다. 이렇게 꾸준하게 정리해본 것도 처음이고, 글 정리하는 능력을 더 키울 수 있었던 거 같다.<br><br/><br><br/></p><h2 id="아쉬웠던-점"><a href="#아쉬웠던-점" class="headerlink" title="아쉬웠던 점"></a>아쉬웠던 점</h2><p>개인적으로 딱히 없었다.<br><br/><br><br/></p><h2 id="마지막으로"><a href="#마지막으로" class="headerlink" title="마지막으로,"></a>마지막으로,</h2><p>좋은 스터디를 만들어주신 CloudNet@팀 분들께 감사 인사 남깁니다 :) 감사합니다 !<br>또한 같이 스터디에 참여한 분들 모두 수고하셨습니다 !ㅎㅎ</p><hr/><p><strong>사진 출처:</strong> Photo by <a href="https://unsplash.com/@dancounsell?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Dan Counsell</a> on <a href="https://unsplash.com/s/photos/writing?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 10주차 -5 장애 발생 및 지속 서비스 확인</title>
    <link href="/2021/08/18/2021-08-18-AFOS-last-5/"/>
    <url>/2021/08/18/2021-08-18-AFOS-last-5/</url>
    
    <content type="html"><![CDATA[<h2 id="RDS-DB-Primary-장애"><a href="#RDS-DB-Primary-장애" class="headerlink" title="RDS DB Primary 장애"></a>RDS DB Primary 장애</h2><h3 id="구성"><a href="#구성" class="headerlink" title="구성"></a>구성</h3><p><img src="https://user-images.githubusercontent.com/87232411/130247635-ea8dd0ac-56ee-4096-89dc-9129c3b00ac6.png" alt="스크린샷 2021-08-20 오후 11 19 37"><br><br/><br><br/></p><p>RDS -&gt; 작업 -&gt; 재부팅<br><img width="1133" alt="스크린샷 2021-08-20 오후 10 04 11" src="https://user-images.githubusercontent.com/87232411/130241478-287053f5-147a-4783-9af6-2db77b77b88d.png"></p><p><code>장애 조치 ~</code> 클릭 -&gt; <code>확인</code> 클릭<br><img width="838" alt="스크린샷 2021-08-20 오후 10 04 19" src="https://user-images.githubusercontent.com/87232411/130241483-ec470115-47fc-4afe-8c62-39851b0871c5.png"></p><p>지켜봅시다.<br><img width="921" alt="스크린샷 2021-08-20 오후 10 08 43" src="https://user-images.githubusercontent.com/87232411/130241488-64052901-16b8-4e62-a0bf-55f89654327e.png"></p><p>한번 더 재부팅 시켜줍니다<br><img width="1194" alt="스크린샷 2021-08-20 오후 10 10 08" src="https://user-images.githubusercontent.com/87232411/130241492-c2982d88-6b72-4eaf-81af-2562a7f41eeb.png"><br><img width="802" alt="스크린샷 2021-08-20 오후 10 10 15" src="https://user-images.githubusercontent.com/87232411/130241499-b06da051-2339-45b4-bc72-3699e02e7110.png"></p><p>IP주소가 4점대로 바뀌었습니다<br><img width="479" alt="스크린샷 2021-08-20 오후 10 13 08" src="https://user-images.githubusercontent.com/87232411/130241504-9b8c6405-0ec5-4e88-9b8b-6c1f2ea7d143.png"><br><img width="414" alt="스크린샷 2021-08-20 오후 10 10 52" src="https://user-images.githubusercontent.com/87232411/130241503-5616fbbd-6226-4ecf-91fc-d2610b432bfc.png"></p><p>정상적으로 DB 접근이 됩니다<br><img width="1436" alt="스크린샷 2021-08-20 오후 10 14 04" src="https://user-images.githubusercontent.com/87232411/130241508-47a6a5c8-4a9d-4bd9-a029-228f034aee7c.png"></p><p>리전은 a영역, 보조 영역은 c영역입니다<br><img width="228" alt="스크린샷 2021-08-20 오후 10 14 57" src="https://user-images.githubusercontent.com/87232411/130241517-d803959f-c0ae-4cac-a0b2-47ab5eec54fe.png"><br><img width="218" alt="스크린샷 2021-08-20 오후 10 15 01" src="https://user-images.githubusercontent.com/87232411/130241518-46c7c935-5c65-46e6-9d92-aa75f9094d96.png"></p><h2 id="AZ1-장애"><a href="#AZ1-장애" class="headerlink" title="AZ1 장애"></a>AZ1 장애</h2><h3 id="구성-1"><a href="#구성-1" class="headerlink" title="구성"></a>구성</h3><p><img src="https://user-images.githubusercontent.com/87232411/130247643-8da8661e-0706-4c7e-b5ee-364e44c118e5.png" alt="스크린샷 2021-08-20 오후 11 19 56"><br><br/><br><br/></p><p>WebSrv-Leader 인스턴스에서 지속적인 접속 확인</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 지속적으로 접속 확인</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$WPDNS</span>/xff.php --silent --connect-timeout 1; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;---[AutoScaling]---&quot;</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br><br>(옵션)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..100&#125;; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$WPDNS</span>/xff.php --silent;<span class="hljs-built_in">echo</span> ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br></code></pre></td></tr></table></figure><img width="893" alt="스크린샷 2021-08-20 오후 10 17 11" src="https://user-images.githubusercontent.com/87232411/130241519-bbe77541-f91f-4b56-941e-128b82b8a131.png"><p>VPC -&gt; 네트워크 ACL 클릭<br><img width="172" alt="스크린샷 2021-08-20 오후 10 17 56" src="https://user-images.githubusercontent.com/87232411/130241523-b639d556-dd87-4360-9377-8e4aba2015cc.png"></p><p><code>네트워크 ACL 생성</code> 클릭<br><img width="339" alt="스크린샷 2021-08-20 오후 10 18 08" src="https://user-images.githubusercontent.com/87232411/130241524-a1502d31-41cc-40bb-a793-ad8c0056ddf2.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">이름: AllDeny<br>VPC: WP-VPC1<br>태그: Name, AllDeny<br></code></pre></td></tr></table></figure><img width="869" alt="스크린샷 2021-08-20 오후 10 18 21" src="https://user-images.githubusercontent.com/87232411/130241525-69ccf0f5-ab04-4c5c-b7c4-29c1a22ac76f.png"><p><code>네트워크 ACL 생성</code> 클릭<br><img width="853" alt="스크린샷 2021-08-20 오후 10 19 07" src="https://user-images.githubusercontent.com/87232411/130241529-8a2b51d5-7750-4248-82b6-0b860012d176.png"></p><p>작업 -&gt; <code>서브넷 연결 편집</code> 클릭<br><img width="1086" alt="스크린샷 2021-08-20 오후 10 19 18" src="https://user-images.githubusercontent.com/87232411/130241533-e451f8b2-ee6f-4823-ae90-a5f6df2521ff.png"></p><p>Subnet1, 3 선택 -&gt; <code>변경 사항 저장</code> 클릭<br><img width="1360" alt="스크린샷 2021-08-20 오후 10 19 33" src="https://user-images.githubusercontent.com/87232411/130241536-11d33ee1-cc75-4072-97d0-94856f5fa552.png"></p><p>a 영역은 타겟그룹에서 제외되고 있습니다<br><img width="1162" alt="스크린샷 2021-08-20 오후 10 23 42" src="https://user-images.githubusercontent.com/87232411/130241553-92af4cf7-6abc-4c3a-8ff9-94a8db699235.png"></p><p>부하분산되어지는 걸 확인하며 AutoScaling이 정상적으로 작동하는 걸 알 수 있습니다<br><img width="925" alt="스크린샷 2021-08-20 오후 10 25 12" src="https://user-images.githubusercontent.com/87232411/130241560-b638afc9-e518-4523-87cb-ebbdb0481f15.png"><br><img width="840" alt="스크린샷 2021-08-20 오후 10 25 29" src="https://user-images.githubusercontent.com/87232411/130241567-90a43d8f-dabd-412b-a670-6527d806bcc4.png"></p><h2 id="자원-삭제"><a href="#자원-삭제" class="headerlink" title="자원 삭제"></a>자원 삭제</h2><h3 id="1-RDS-삭제-최종-스냅샷-언체크-gt-인스턴스-삭제-시-체크"><a href="#1-RDS-삭제-최종-스냅샷-언체크-gt-인스턴스-삭제-시-체크" class="headerlink" title="1. RDS 삭제: 최종 스냅샷 언체크 -&gt; 인스턴스 삭제 시 ~ 체크 !"></a>1. RDS 삭제: 최종 스냅샷 언체크 -&gt; 인스턴스 삭제 시 ~ 체크 !</h3><h3 id="2-EC2-AutoScalingGroup-삭제"><a href="#2-EC2-AutoScalingGroup-삭제" class="headerlink" title="2. EC2 AutoScalingGroup 삭제"></a>2. EC2 AutoScalingGroup 삭제</h3><h3 id="3-S3-버킷-gt-삭제-gt-비우기-gt-삭제"><a href="#3-S3-버킷-gt-삭제-gt-비우기-gt-삭제" class="headerlink" title="3. S3 버킷 -&gt; 삭제 -&gt; 비우기 -&gt; 삭제"></a>3. S3 버킷 -&gt; 삭제 -&gt; 비우기 -&gt; 삭제</h3><h3 id="4-EC2-시작-템플릿-삭제"><a href="#4-EC2-시작-템플릿-삭제" class="headerlink" title="4. EC2 시작 템플릿 삭제"></a>4. EC2 시작 템플릿 삭제</h3><h3 id="5-위-자원들-전부-삭제-후-gt-CloudFormation-스택-삭제"><a href="#5-위-자원들-전부-삭제-후-gt-CloudFormation-스택-삭제" class="headerlink" title="5. 위 자원들 전부 삭제 후 -&gt; CloudFormation 스택 삭제"></a>5. 위 자원들 전부 삭제 후 -&gt; CloudFormation 스택 삭제</h3><br/><br/><br/><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 10주차 -4 AutoScaling 그룹을 이용하여 WebSrvs 구성</title>
    <link href="/2021/08/18/2021-08-18-AFOS-last-4/"/>
    <url>/2021/08/18/2021-08-18-AFOS-last-4/</url>
    
    <content type="html"><![CDATA[<h2 id="최종-구성"><a href="#최종-구성" class="headerlink" title="최종 구성"></a>최종 구성</h2><img src="/css/images/1313.png"><p>EC2 -&gt; EC2 시작 템플릿 생성 -&gt; 아래 내용 입력 후 <code>시작 템플릿 생성</code> 클릭</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">시작 템플릿 이름 : WPEC2LaunchTemplate<br>설명 : Wordpress Web Auto Scaling v1.0<br>Auto Scaling 지침 : 체크<br>AMI : Amazon Linux 2 AMI(HVM), SSD Volume Type - 아키텍처 : 64비트(x86)<br>인스턴스 유형 : t2.micro<br>키 페어 : (각자 자신의 SSH 키페어 선택)<br>네트워킹 플랫폼 : VPC<br>보안 그룹 : <span class="hljs-comment">###-WP-VPC1SG-### 포함된것 선택</span><br>리소스 태그 : 키(Lab) , 값(WPLab)<br>고급 세부 정보 ← 클릭<br>- IAM 인스턴스 프로파일 : WPLabInstanceProfile<br>- 세부 CloudWatch 모니터링 : 활성화<br>- 사용자 데이터 : 아래 내용 복붙!<br></code></pre></td></tr></table></figure><p><strong>아래 EFS 사용 시 각자 자신의 EFS 파일시스템 ID로 변경할 것</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>amazon-linux-extras install lamp-mariadb10.2-php7.2 php7.2 -y<br>yum install httpd htop amazon-efs-utils tree -y<br>systemctl start httpd &amp;&amp; systemctl <span class="hljs-built_in">enable</span> httpd<br>yum install gcc php-xml php-mbstring php-sodium php-devel php-pear ImageMagick-devel ghostscript -y<br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOT&gt; /etc/php.d/40-imagick.ini</span><br><span class="hljs-string">extension = imagick.so</span><br><span class="hljs-string">EOT</span><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\n&quot;</span> | pecl install imagick<br>sed -i <span class="hljs-string">&#x27;s/^upload_max_filesize = 2M/upload_max_filesize = 64M/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^post_max_size = 8M/post_max_size = 64M/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^max_execution_time = 30/max_execution_time = 300/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^memory_limit = 128M/memory_limit = -1/g&#x27;</span> /etc/php.ini<br><span class="hljs-built_in">mkdir</span> -p /var/www/wordpress/<br>mount -t efs 자신의EFS파일시스템ID:/ /var/www/wordpress<br><span class="hljs-built_in">chown</span> -R apache:apache /var/www<br><span class="hljs-built_in">chmod</span> 2775 /var/www<br>find /var/www -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">chmod</span> 2775 &#123;&#125; \;<br>find /var/www -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">chmod</span> 0664 &#123;&#125; \;<br><span class="hljs-built_in">chmod</span> u+wrx /var/www/wordpress/wp-content/*<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;ServerName 127.0.0.1:80&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;DocumentRoot /var/www/wordpress&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;&lt;Directory /var/www/wordpress&gt;&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;  Options Indexes FollowSymLinks&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;  AllowOverride All&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;  Require all granted&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;&lt;/Directory&gt;&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br>systemctl restart php-fpm<br>systemctl restart httpd<br></code></pre></td></tr></table></figure><p>생성된 시작 템플릿</p><p><code>시작 템플릿 생성</code> 클릭<br><img width="307" alt="스크린샷 2021-08-20 오후 9 05 17" src="https://user-images.githubusercontent.com/87232411/130241220-75fe5043-fa33-4f20-bb9f-4478c4e17fd9.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">시작 템플릿 이름 : WPEC2LaunchTemplate<br>설명 : Wordpress Web Auto Scaling v1.0<br>Auto Scaling 지침 : 체크<br></code></pre></td></tr></table></figure><img width="868" alt="스크린샷 2021-08-20 오후 9 05 39" src="https://user-images.githubusercontent.com/87232411/130241224-df092a36-016e-44bd-854b-4b55a01fe4fa.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>AMI : Amazon Linux 2 AMI(HVM), SSD Volume Type - 아키텍처 : 64비트(x86)<br>인스턴스 유형 : t2.micro<br>키 페어 : (각자 자신의 SSH 키페어 선택)<br></code></pre></td></tr></table></figure><img width="867" alt="스크린샷 2021-08-20 오후 9 05 56" src="https://user-images.githubusercontent.com/87232411/130241227-76a7d059-b314-425b-bc0e-743ea6139649.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">네트워킹 플랫폼 : VPC<br>보안 그룹 : <span class="hljs-comment">###-WP-VPC1SG-### 포함된것 선택</span><br></code></pre></td></tr></table></figure><img width="850" alt="스크린샷 2021-08-20 오후 9 06 36" src="https://user-images.githubusercontent.com/87232411/130241237-ce8f2829-bc6b-411c-8424-75c3c4412ea3.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">리소스 태그 : 키(Lab) , 값(WPLab)<br></code></pre></td></tr></table></figure><img width="839" alt="스크린샷 2021-08-20 오후 9 06 58" src="https://user-images.githubusercontent.com/87232411/130241239-375dd296-3dcb-4913-9d67-37d6f7e44bd7.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">IAM 인스턴스 프로파일 : WPLabInstanceProfile<br>세부 CloudWatch 모니터링 : 활성화<br>사용자 데이터 : 아래 내용 복붙!<br></code></pre></td></tr></table></figure><p><strong>아래 EFS 사용 시 각자 자신의 EFS 파일 시스템 ID로 변경할 것</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>amazon-linux-extras install lamp-mariadb10.2-php7.2 php7.2 -y<br>yum install httpd htop amazon-efs-utils tree -y<br>systemctl start httpd &amp;&amp; systemctl <span class="hljs-built_in">enable</span> httpd<br>yum install gcc php-xml php-mbstring php-sodium php-devel php-pear ImageMagick-devel ghostscript -y<br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOT&gt; /etc/php.d/40-imagick.ini</span><br><span class="hljs-string">extension = imagick.so</span><br><span class="hljs-string">EOT</span><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\n&quot;</span> | pecl install imagick<br>sed -i <span class="hljs-string">&#x27;s/^upload_max_filesize = 2M/upload_max_filesize = 64M/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^post_max_size = 8M/post_max_size = 64M/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^max_execution_time = 30/max_execution_time = 300/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^memory_limit = 128M/memory_limit = -1/g&#x27;</span> /etc/php.ini<br><span class="hljs-built_in">mkdir</span> -p /var/www/wordpress/<br>mount -t efs **자신의EFS파일시스템ID**:/ /var/www/wordpress<br><span class="hljs-built_in">chown</span> -R apache:apache /var/www<br><span class="hljs-built_in">chmod</span> 2775 /var/www<br>find /var/www -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">chmod</span> 2775 &#123;&#125; \;<br>find /var/www -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">chmod</span> 0664 &#123;&#125; \;<br><span class="hljs-built_in">chmod</span> u+wrx /var/www/wordpress/wp-content/*<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;ServerName 127.0.0.1:80&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;DocumentRoot /var/www/wordpress&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;&lt;Directory /var/www/wordpress&gt;&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;  Options Indexes FollowSymLinks&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;  AllowOverride All&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;  Require all granted&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;&lt;/Directory&gt;&#x27;</span> &gt;&gt; /etc/httpd/conf.d/MyBlog.conf<br>systemctl restart php-fpm<br>systemctl restart httpd<br></code></pre></td></tr></table></figure><img width="834" alt="스크린샷 2021-08-20 오후 9 07 17" src="https://user-images.githubusercontent.com/87232411/130241242-c0e9aa8c-3660-4fc0-a814-dc32bf2e81ae.png"><img width="705" alt="스크린샷 2021-08-20 오후 9 07 32" src="https://user-images.githubusercontent.com/87232411/130241251-8686752c-d9d1-4bde-afe8-b92ed6f7f690.png"><p><code>시작 템플릿 생성</code> 클릭<br><img width="831" alt="스크린샷 2021-08-20 오후 9 07 49" src="https://user-images.githubusercontent.com/87232411/130241254-d9673a56-af78-4266-a307-ac0fcf06e92b.png"></p><p>작업 -&gt; <code>Auto Scaling 그룹 생성</code> 클릭<br><img width="1126" alt="스크린샷 2021-08-20 오후 9 08 03" src="https://user-images.githubusercontent.com/87232411/130241262-a7d58eee-eaca-4c72-97ad-1bb07a2cdc89.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Auto Scaling 그룹 이름 : FirstEC2AutoScalingGroup<br>시작 템플릿 : WPEC2LaunchTemplate<br></code></pre></td></tr></table></figure><img width="853" alt="스크린샷 2021-08-20 오후 9 08 22" src="https://user-images.githubusercontent.com/87232411/130241277-e986e8a1-7e27-47e8-941a-b6a3db76a5d5.png"><p><code>다음</code> 클릭<br><img width="190" alt="스크린샷 2021-08-20 오후 9 08 27" src="https://user-images.githubusercontent.com/87232411/130241284-6e959ca2-281f-4e5e-8c21-caa50ec3cfe3.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">인스턴스 구매 옵션 : 시작 템플릿 준수<br>네트워크 - VPC : WP-VPC1<br>네트워크 - 서브넷 : WP-VPC1-Subnet-1, WP-VPC1-Subnet-2<br></code></pre></td></tr></table></figure><p><code>다음</code> 클릭<br><img width="846" alt="스크린샷 2021-08-20 오후 9 10 10" src="https://user-images.githubusercontent.com/87232411/130241289-94e6dfc3-c5ea-484b-acfc-97b2cca1d519.png"><br><img width="839" alt="스크린샷 2021-08-20 오후 9 10 15" src="https://user-images.githubusercontent.com/87232411/130241296-d33650ea-12e5-4e0e-9d43-81b2a3748d64.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">로드 밸런싱 : 기존 로드 밸런서에 연결<br>로그 밸런서 대상 그룹에서 선택 : 선택<br>기존 로드 밸런서 대상 그룹 : ALB-TG<br>상태 확인 유형 : ELB (Check)<br>상태 확인 유예 기간 : 60초<br>모니터링 - CloudWatch 내에서 그룹 지표 수집 활성화 : 체크<br></code></pre></td></tr></table></figure><img width="845" alt="스크린샷 2021-08-20 오후 9 10 36" src="https://user-images.githubusercontent.com/87232411/130241299-f7b38541-ce1a-4666-8d36-1115e6e96a8a.png"><p><code>다음</code> 클릭<br><img width="847" alt="스크린샷 2021-08-20 오후 9 10 57" src="https://user-images.githubusercontent.com/87232411/130241304-9c5696da-4ed6-44b9-881c-380fc3179c66.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">원하는 용량 : 2<br>최소 용량 : 2<br>최대 용량 : 4<br>조정 정책 : 대상 추척 조정 정책<br>조정 정책 이름 : Scale Out Policy<br>대상 값 : 30 → 3분 동안 3번 연속 CPU 30% 경우(1분 마다 기록)<br>인스턴스 요구 사항 : 60초 → 지표에 포함하기 전 워밍업 시간(초)<br>확대 정책만 생성하려면 축소 비활성화 : Check → 축소 설정하지 않음<br>인스턴스 축소 보호 활성화 : UnCheck<br></code></pre></td></tr></table></figure><img width="840" alt="스크린샷 2021-08-20 오후 9 11 07" src="https://user-images.githubusercontent.com/87232411/130241306-a9b94963-4f61-4150-aa30-89950c8d477d.png"><img width="845" alt="스크린샷 2021-08-20 오후 9 11 41" src="https://user-images.githubusercontent.com/87232411/130241308-0e0e0377-beb4-4084-8e41-a20ae4df4f1c.png"><p><code>다음</code> 클릭<br><img width="838" alt="스크린샷 2021-08-20 오후 9 11 46" src="https://user-images.githubusercontent.com/87232411/130241314-0d922c44-f343-4b1c-8edd-54f058d33519.png"></p><p><code>다음</code> 클릭<br><img width="219" alt="스크린샷 2021-08-20 오후 9 11 50" src="https://user-images.githubusercontent.com/87232411/130241320-e47c5a74-cb2e-4613-a4d0-c25e791c95b4.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">태그 : 키(Name) , 값(WebServers)<br></code></pre></td></tr></table></figure><p><code>다음</code> 클릭<br><img width="848" alt="스크린샷 2021-08-20 오후 9 12 08" src="https://user-images.githubusercontent.com/87232411/130241323-dc8fcd6f-d5b5-4ace-b8f6-96539238b192.png"></p><p><code>AutoScaling 그룹 생성</code> 클릭<br><img width="296" alt="스크린샷 2021-08-20 오후 9 12 14" src="https://user-images.githubusercontent.com/87232411/130241326-1d822de3-52f7-4ddf-a39f-ade7a95c58fc.png"></p><p>EC2 2개가 생성 됨<br><img width="1113" alt="스크린샷 2021-08-20 오후 9 13 02" src="https://user-images.githubusercontent.com/87232411/130241328-bcdb3225-1747-4e33-9317-b8ef3fa7e06f.png"><br><img width="1159" alt="스크린샷 2021-08-20 오후 9 23 42" src="https://user-images.githubusercontent.com/87232411/130241337-1b0e9199-e876-4d4e-8d06-3c0f1a9c3b6a.png"></p><p>워드프레스 사이트도 접속이 됩니다.<br><img width="1437" alt="스크린샷 2021-08-20 오후 9 25 52" src="https://user-images.githubusercontent.com/87232411/130241345-6b995f19-66a8-40b7-863f-85409b192eed.png">\</p><h2 id="CPU-부하-발생-및-Auto-Scaling-확인"><a href="#CPU-부하-발생-및-Auto-Scaling-확인" class="headerlink" title="CPU 부하 발생 및 Auto Scaling 확인"></a>CPU 부하 발생 및 Auto Scaling 확인</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 웹 접속 테스트 (리전, 인스턴스ID, Private IP)</span><br>WPDNS=cloudfront.net<br>Web1=퍼블릭 주소<br>Web2=퍼블릭 주소<br><br><span class="hljs-comment"># 터미널1 - 1개 요청(풀)로 총합 500번 요청 진행</span><br>ab -n 500 -c 1 http://<span class="hljs-variable">$Web1</span>/load.php<br><br><span class="hljs-comment"># 터미널2 - 20개 요청(풀)로 총합 1000번 요청 진행</span><br>ab -n 1000 -c 20 http://<span class="hljs-variable">$Web2</span>/load.php<br>ab -n 1000 -c 20 http://<span class="hljs-variable">$WPDNS</span>/load.php<br><br><span class="hljs-comment"># 접속 되는 EC2 마다 현재 CPU 부하 출력</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$WPDNS</span>/xff.php --silent --connect-timeout 1; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;---[AutoScaling]---&quot;</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># EC2 증가 이후 증감 확인</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..100&#125;; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$WPDNS</span>/xff.php --silent;<span class="hljs-built_in">echo</span> ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br></code></pre></td></tr></table></figure><img width="455" alt="스크린샷 2021-08-20 오후 9 28 04" src="https://user-images.githubusercontent.com/87232411/130241351-4cc84d39-d8d6-4dda-968d-6bd674f49ad0.png"><img width="668" alt="스크린샷 2021-08-20 오후 9 32 58" src="https://user-images.githubusercontent.com/87232411/130241354-90d70e94-a659-4a3b-991d-7d3ba5678968.png"><p>새로 생성된 EC2 두개가 ALB 타겟그룹에 포함되어 있습니다<br><img width="1139" alt="스크린샷 2021-08-20 오후 9 33 24" src="https://user-images.githubusercontent.com/87232411/130241361-c0dd98ed-e013-4fae-9ad7-6789571ebc30.png"><br><img width="543" alt="스크린샷 2021-08-20 오후 9 37 26" src="https://user-images.githubusercontent.com/87232411/130241375-c9b0e953-a3b8-4586-b544-51c1ba6f93bc.png"><br><img width="597" alt="스크린샷 2021-08-20 오후 9 37 51" src="https://user-images.githubusercontent.com/87232411/130241379-b5a0bc22-632f-4af9-b53e-1edf20d57da1.png"><br><img width="1045" alt="스크린샷 2021-08-20 오후 9 38 11" src="https://user-images.githubusercontent.com/87232411/130241382-507c6a65-1015-45be-a877-1df472fa7635.png"><br><img width="559" alt="스크린샷 2021-08-20 오후 9 38 17" src="https://user-images.githubusercontent.com/87232411/130241394-6428981a-0fa4-40a6-b6a4-92660802828b.png"><br><img width="528" alt="스크린샷 2021-08-20 오후 9 38 23" src="https://user-images.githubusercontent.com/87232411/130241397-e1b095ab-bde6-42a3-ae48-411c368472d0.png"></p><p>EC2가 4개로 증가했습니다<br><img width="1023" alt="스크린샷 2021-08-20 오후 9 38 46" src="https://user-images.githubusercontent.com/87232411/130241400-f520a5b7-49c3-494a-aafc-221428f4c777.png"></p><p>CPU 사용률을 비교해봅시다<br><img width="1330" alt="스크린샷 2021-08-20 오후 9 40 00" src="https://user-images.githubusercontent.com/87232411/130241409-065876f0-bf6e-4220-aa0b-e3a98eb58a0a.png"></p><p>1시간으로 바꿔줍니다<br><img width="592" alt="스크린샷 2021-08-20 오후 9 38 58" src="https://user-images.githubusercontent.com/87232411/130241407-5169b7b5-cad9-4f8b-b3d1-b6d77247968c.png"></p><p>이렇게 변화했네요<br><img width="415" alt="스크린샷 2021-08-20 오후 9 40 06" src="https://user-images.githubusercontent.com/87232411/130241413-40307efd-0199-4b6f-a08d-1c0544d4d75c.png"><br><img width="1328" alt="스크린샷 2021-08-20 오후 9 41 54" src="https://user-images.githubusercontent.com/87232411/130241415-c3c08088-a845-4e01-90c0-a56427374d24.png"></p><p>EC2가 4개로 증가했습니다<br><img width="940" alt="스크린샷 2021-08-20 오후 9 42 06" src="https://user-images.githubusercontent.com/87232411/130241422-56c78a88-b984-42fd-994e-17d7ceea2f09.png"></p><p>타겟그룹에도 포함되고 있습니다<br><img width="1158" alt="스크린샷 2021-08-20 오후 9 42 54" src="https://user-images.githubusercontent.com/87232411/130241429-cca2c2bc-1244-43b2-9cbe-86cb65ed3797.png"></p><p>EC2에서도 확인할 수 있습니다</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..100&#125;; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$WPDNS</span>/xff.php --silent;<span class="hljs-built_in">echo</span> ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -n<br></code></pre></td></tr></table></figure><img width="666" alt="스크린샷 2021-08-20 오후 9 50 12" src="https://user-images.githubusercontent.com/87232411/130241468-f6d217a9-cb36-4f95-971a-c93ba30fb1e5.png"><br/><br/><br/><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 10주차 -3 WebSrv-Leader 인스턴스를 이용하여 Wordpress 초기 구성</title>
    <link href="/2021/08/18/2021-08-18-AFOS-last-3/"/>
    <url>/2021/08/18/2021-08-18-AFOS-last-3/</url>
    
    <content type="html"><![CDATA[<h2 id="실습-관련-구성"><a href="#실습-관련-구성" class="headerlink" title="실습 관련 구성"></a>실습 관련 구성</h2><img src="/css/images/1212.png"><p>전편에서 생성한 RDS 엔드포인트(접속 주소) 메모하기</p><p>RDS 생성 후 <code>구성</code> 탭 메뉴에서 <code>다중 AZ와 보조 영역</code> 확인<br><img width="244" alt="스크린샷 2021-08-18 오후 2 39 24" src="https://user-images.githubusercontent.com/87232411/129845046-289897cd-44d2-4cc9-9b0e-a2eca20e37b3.png"></p><p>ALB에 WevSrv-Leader 인스턴스 대상 등록</p><p><code>ALB-TG</code> 클릭<br><img width="223" alt="스크린샷 2021-08-18 오후 2 39 47" src="https://user-images.githubusercontent.com/87232411/129845047-4de7d3e6-5a32-4678-956b-c118b31a5152.png"></p><p><code>Register targets</code> 클릭<br><img width="244" alt="스크린샷 2021-08-18 오후 2 39 58" src="https://user-images.githubusercontent.com/87232411/129845049-9f646b6a-5039-4f68-91ac-3fe80c28c5c2.png"></p><p>인스턴스 체크 후 -&gt; <code>Include as pending below</code> 클릭<br><img width="1399" alt="스크린샷 2021-08-18 오후 2 40 06" src="https://user-images.githubusercontent.com/87232411/129845051-dd6d2068-f567-47cf-9149-e5bfb10c85db.png"></p><p><code>Register pending targets</code> 클릭<br><img width="1392" alt="스크린샷 2021-08-18 오후 2 40 15" src="https://user-images.githubusercontent.com/87232411/129845056-4692c2c5-c028-4975-ad00-a35d3f48045a.png"></p><p>추가 되었습니다<br><img width="1160" alt="스크린샷 2021-08-18 오후 2 40 27" src="https://user-images.githubusercontent.com/87232411/129845058-e9b070d3-516e-4918-8531-c01d8a3b2086.png"></p><p>EFS 생성 확인<br><img width="426" alt="스크린샷 2021-08-18 오후 2 40 50" src="https://user-images.githubusercontent.com/87232411/129845059-72e611f2-3609-4ec5-9978-2a114fada6ee.png"></p><p>WebSrv-Leader 인스턴스 SSH 접속 후 정보 확인 및 DB 주소 설정</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo su -<br><br><span class="hljs-comment"># EFS 파일시스템 마운트 확인</span><br><span class="hljs-built_in">df</span> -hT |egrep <span class="hljs-string">&#x27;(File|nfs)&#x27;</span><br><br><span class="hljs-comment"># RDS 엔드포인트를 변수에 지정</span><br>RDS=엔드포인트.rds.amazonaws.com<br><br><span class="hljs-comment"># wp-config.php 파일에 DB 주소를 RDS 엔드포인트로 설정</span><br>sed -i <span class="hljs-string">&quot;s/localhost/<span class="hljs-variable">$RDS</span>/g&quot;</span> /var/www/wordpress/wp-config.php<br><br>grep -n DB_HOST /var/www/wordpress/wp-config.php<br><br><span class="hljs-comment"># DB 접속 테스트</span><br>mysql -h <span class="hljs-variable">$RDS</span> -uroot -pqwe12345 -e <span class="hljs-string">&#x27;show databases;&#x27;</span><br>mysql -h <span class="hljs-variable">$RDS</span> -uroot -pqwe12345<br><span class="hljs-built_in">exit</span><br><br><span class="hljs-comment"># dig 조회</span><br>dig +short <span class="hljs-variable">$RDS</span><br></code></pre></td></tr></table></figure><img width="690" alt="스크린샷 2021-08-18 오후 2 44 26" src="https://user-images.githubusercontent.com/87232411/129845062-08c5fda8-4938-4bec-9f6b-d3b72c078d89.png"><img width="692" alt="스크린샷 2021-08-18 오후 2 45 49" src="https://user-images.githubusercontent.com/87232411/129845064-d94d8f36-b8a2-465e-b786-355fc3c45009.png"><img width="686" alt="스크린샷 2021-08-18 오후 2 46 28" src="https://user-images.githubusercontent.com/87232411/129845066-2854d650-b054-48d3-8bf7-a326ba081859.png"><img width="594" alt="스크린샷 2021-08-18 오후 2 46 54" src="https://user-images.githubusercontent.com/87232411/129845067-09fad6f7-96c4-4762-b5ca-bba6a4b20d02.png"><img width="335" alt="스크린샷 2021-08-18 오후 2 47 14" src="https://user-images.githubusercontent.com/87232411/129845069-a1321d89-4a88-402a-8f5e-0e2001e1e9e0.png"><p>WebSrv-Leader 퍼블릭 IP주소로 접속</p><img width="1369" alt="스크린샷 2021-08-18 오후 2 48 05" src="https://user-images.githubusercontent.com/87232411/129845070-1dacdc5f-9f89-44aa-893b-7235a9c9619f.png">Wordpress 관리자 설정<img width="802" alt="스크린샷 2021-08-18 오후 2 48 21" src="https://user-images.githubusercontent.com/87232411/129845073-b6b4969c-a276-4fa7-863b-dc205c9edc2a.png">로그인<img width="565" alt="스크린샷 2021-08-18 오후 2 48 41" src="https://user-images.githubusercontent.com/87232411/129845075-5b77f9c1-9cac-45fc-8531-2a39fb682314.png">설정 클릭<img width="142" alt="스크린샷 2021-08-18 오후 2 49 09" src="https://user-images.githubusercontent.com/87232411/129845079-13935f2e-71a3-4df5-a749-b95d82a115c4.png"><p>CloudFront Domain 주소로 변경 (https -&gt; http)</p><img width="666" alt="스크린샷 2021-08-18 오후 2 49 38" src="https://user-images.githubusercontent.com/87232411/129845082-0b680064-1d1b-46fb-907a-5e665b5b58a1.png"><p><code>변경사항 저장</code> 클릭<br><img width="201" alt="스크린샷 2021-08-18 오후 2 49 43" src="https://user-images.githubusercontent.com/87232411/129845086-b6e3edfc-98d5-4a5d-b108-87cb5a2884cf.png"></p><p>글 -&gt; 새로 추가 클릭<br><img width="216" alt="스크린샷 2021-08-18 오후 2 50 29" src="https://user-images.githubusercontent.com/87232411/129845089-01b252f1-cd11-4309-bf56-311c16d4e754.png"></p><p>글 작성 후 -&gt; <code>공개</code> 클릭<br><img width="238" alt="스크린샷 2021-08-18 오후 2 52 08" src="https://user-images.githubusercontent.com/87232411/129845092-54c8bec6-407e-4d17-839d-84beec20ee2a.png"></p><p><code>공개</code> 클릭<br><img width="296" alt="스크린샷 2021-08-18 오후 2 52 12" src="https://user-images.githubusercontent.com/87232411/129845094-1146e484-0104-4927-b1e5-70d786144e6d.png"></p><p>쨔잔<br><img width="1438" alt="스크린샷 2021-08-18 오후 2 52 33" src="https://user-images.githubusercontent.com/87232411/129845097-608b17d6-cc32-4419-9c4c-dabb52d40c80.png"></p><h2 id="다음-실습을-위해-할-사항"><a href="#다음-실습을-위해-할-사항" class="headerlink" title="다음 실습을 위해 할 사항"></a>다음 실습을 위해 할 사항</h2><p>ALB 대상 그룹에 인스턴스(WebSrv Leader) 등록 취소<br><img width="1171" alt="스크린샷 2021-08-18 오후 2 53 53" src="https://user-images.githubusercontent.com/87232411/129845108-7599ee50-5ec2-458e-affa-9cdc73dbc4a7.png"><br><img width="1153" alt="스크린샷 2021-08-18 오후 2 54 18" src="https://user-images.githubusercontent.com/87232411/129845112-3cea0bdb-7d8d-46bb-9ee8-341d04ec9690.png"><br><br/><br><br/><br><br/></p><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 10주차 -2 AllInOne 인스턴스를 이용하여 CloudFront, ELB, S3(WP Offload Media Lite) 활용</title>
    <link href="/2021/08/18/2021-08-18-AFOS-last-2/"/>
    <url>/2021/08/18/2021-08-18-AFOS-last-2/</url>
    
    <content type="html"><![CDATA[<h2 id="실습-관련-구성"><a href="#실습-관련-구성" class="headerlink" title="실습 관련 구성"></a>실습 관련 구성</h2><img src="/css/images/스크린샷 2021-08-18 오후 2.31.06.png"><br/><br/><p>CloudFront -&gt; <code>ID</code> 클릭<br><img width="410" alt="스크린샷 2021-08-18 오후 1 39 36" src="https://user-images.githubusercontent.com/87232411/129839840-d66f82b1-6bf2-4855-a02e-814fd8c9a9f2.png"></p><p><code>Domain Name</code> 확인<br><img width="410" alt="스크린샷 2021-08-18 오후 1 40 02" src="https://user-images.githubusercontent.com/87232411/129839847-1a588bd6-d1b2-46c9-b58f-708a63253bb0.png"></p><p>EC2 AllnOne 퍼블릭 IP주소로 웹 접속<br><img width="1430" alt="스크린샷 2021-08-18 오후 1 41 00" src="https://user-images.githubusercontent.com/87232411/129839851-165783f1-3fa4-48b8-9f32-5d363427b44e.png"></p><p>Wordpress 관리자 계정 설정<br><img width="904" alt="스크린샷 2021-08-18 오후 1 41 19" src="https://user-images.githubusercontent.com/87232411/129839860-7a96af38-34e4-4b57-a116-7f7e374f8bbb.png"></p><p>로그인<br><img width="639" alt="스크린샷 2021-08-18 오후 1 41 31" src="https://user-images.githubusercontent.com/87232411/129839866-2a58d6b1-fc5f-4ade-acda-524f1aea60fe.png"></p><p><code>설정</code>으로 들어간다<br><img width="78" alt="스크린샷 2021-08-18 오후 1 41 49" src="https://user-images.githubusercontent.com/87232411/129839872-e6302df6-dee8-47fd-a173-e2284e5667df.png"></p><p>주소를 CloudFront Domain 주소로 바꿔준다<br><img width="668" alt="스크린샷 2021-08-18 오후 1 42 01" src="https://user-images.githubusercontent.com/87232411/129839874-b6134c66-0585-4701-b67d-05200b293f59.png"></p><p>https:&#x2F;&#x2F; 에서 <code>s</code>를 빼고 입력한다<br><img width="673" alt="스크린샷 2021-08-18 오후 1 42 24" src="https://user-images.githubusercontent.com/87232411/129839876-245e9e4c-1cc9-4253-98c4-173104da1479.png"></p><p><code>변경사항 저장</code> 클릭<br><img width="220" alt="스크린샷 2021-08-18 오후 1 43 45" src="https://user-images.githubusercontent.com/87232411/129839881-351d6a38-7de7-4eb7-9170-3b79ee73b54b.png"></p><p>ALB &amp; 대상 그룹 확인</p><p>AllInOne 인스턴스가 포함되어 있다.<br><img width="1161" alt="스크린샷 2021-08-18 오후 1 43 25" src="https://user-images.githubusercontent.com/87232411/129839877-3b517f96-f390-409a-9579-5d45fdf6dc20.png"></p><p>CloudFront 의 Domain Name 으로 관리자 웹 접속</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>CloudFrontDomainName<span class="hljs-regexp">/wp-admin/</span><br></code></pre></td></tr></table></figure><img width="799" alt="스크린샷 2021-08-18 오후 1 44 01" src="https://user-images.githubusercontent.com/87232411/129839882-2cb7737e-8d8c-4f1c-afad-d65673ba756f.png"><p>CloudFront 의 Domain Name 으로 웹 접속</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-variable constant_">HTTP</span><span class="hljs-symbol">://CloudFrontDomainName/</span><br></code></pre></td></tr></table></figure><img width="585" alt="스크린샷 2021-08-18 오후 1 44 16" src="https://user-images.githubusercontent.com/87232411/129839885-9720642c-e7de-4350-912e-629f2ba2baea.png"><p>AllInOne 인스턴스 SSH 접속 -&gt; 업로드 폴더 확인</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>wp-content/uploads<br><br><span class="hljs-comment"># 업로드 폴더 정보 확인</span><br>tree<br></code></pre></td></tr></table></figure><img width="500" alt="스크린샷 2021-08-18 오후 1 45 38" src="https://user-images.githubusercontent.com/87232411/129839891-2215e5bd-45c3-4a2c-ad0a-b58ad3d09618.png"><p>글 -&gt; <code>새로 추가</code> 클릭<br><img width="148" alt="스크린샷 2021-08-18 오후 1 46 48" src="https://user-images.githubusercontent.com/87232411/129839894-bc20b689-9962-46b0-82bf-7e4ff04b80e6.png"><br><img width="251" alt="스크린샷 2021-08-18 오후 1 46 55" src="https://user-images.githubusercontent.com/87232411/129839896-cec12b2f-0ba3-4d2b-a59d-79b4b2e51891.png"></p><p>글 작성 후 <code>공개</code> 클릭</p><img width="281" alt="스크린샷 2021-08-18 오후 1 47 57" src="https://user-images.githubusercontent.com/87232411/129839900-eda95ff6-4ac9-40bb-a793-ab10f76cf591.png"><p><code>공개</code> 클릭<br><img width="292" alt="스크린샷 2021-08-18 오후 1 48 01" src="https://user-images.githubusercontent.com/87232411/129839902-94500a68-43c2-4e3e-8933-8033002d36f0.png"></p><p>제 성격이 보이는 이모티콘 입니다 ㅎ<br><img width="1435" alt="스크린샷 2021-08-18 오후 1 48 16" src="https://user-images.githubusercontent.com/87232411/129839903-25f2fe9a-dee3-432e-b0c2-c0faa61273e3.png"></p><p>워드프레스에 글 작성 후 AllInOne의 업로드 폴더 확인</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">tree</span><br></code></pre></td></tr></table></figure><img width="694" alt="스크린샷 2021-08-18 오후 1 48 37" src="https://user-images.githubusercontent.com/87232411/129839906-0380a878-0aa2-4276-926c-4da564493a65.png"><h3 id="업로드-저장소를-S3로-변경하여-저장-및-파일-제공-최적화"><a href="#업로드-저장소를-S3로-변경하여-저장-및-파일-제공-최적화" class="headerlink" title="업로드 저장소를 S3로 변경하여 저장 및 파일 제공 최적화"></a>업로드 저장소를 S3로 변경하여 저장 및 파일 제공 최적화</h3><p>플러그인 -&gt; 새로 추가 클릭</p><img width="327" alt="스크린샷 2021-08-18 오후 1 48 55" src="https://user-images.githubusercontent.com/87232411/129839912-cafcd44b-ff9b-4588-8f72-0d5b33ac44b3.png"><p><code>WP Offload Media Lite</code> 검색 후 설치<br><img width="635" alt="스크린샷 2021-08-18 오후 1 49 15" src="https://user-images.githubusercontent.com/87232411/129839913-b9ed2850-23d5-4b3f-a165-b601560c10eb.png"></p><p><code>활성화</code> 클릭 -&gt; <code>Settings</code> 클릭<br><img width="249" alt="스크린샷 2021-08-18 오후 1 50 11" src="https://user-images.githubusercontent.com/87232411/129839916-f64221b3-8145-46d3-a457-a46a57306f22.png"></p><p>아래 중간 선택 후 하단 <code>NEXT</code> 선택<br><img width="685" alt="스크린샷 2021-08-18 오후 1 50 27" src="https://user-images.githubusercontent.com/87232411/129839921-91bd602f-3bcd-4d08-acb7-7403dbe91d38.png"></p><p><code>Create new bucket</code> 클릭<br><img width="180" alt="스크린샷 2021-08-18 오후 1 50 34" src="https://user-images.githubusercontent.com/87232411/129839926-aa1a65e4-29d6-4673-90f8-c4a87064c05c.png"></p><p>Region 선택 -&gt; Bucket 이름 작성 -&gt; <code>Create New Bucket</code> 클릭<br><img width="684" alt="스크린샷 2021-08-18 오후 1 50 45" src="https://user-images.githubusercontent.com/87232411/129839928-cc1b5a45-74da-4e4d-ac59-6c80874f07d3.png"></p><p>하단의 <code>ADBANCED OPTIONS</code> ON으로 클릭 -&gt; <code>Save Changes</code> 클릭<br><img width="694" alt="스크린샷 2021-08-18 오후 1 51 12" src="https://user-images.githubusercontent.com/87232411/129839932-35c150e5-fe9b-4f33-ab38-d1ac471a3e7a.png"></p><p>두 번째 글 작성 -&gt; <code>공개</code> 클릭<br><img width="277" alt="스크린샷 2021-08-18 오후 1 53 12" src="https://user-images.githubusercontent.com/87232411/129839938-d9b5979f-ec60-4672-abfe-00aa6ac2dfd7.png"></p><p><code>공개</code> 클릭<br><img width="286" alt="스크린샷 2021-08-18 오후 1 53 17" src="https://user-images.githubusercontent.com/87232411/129839941-66ec3400-7f70-4970-afff-3abef49d8a30.png"></p><p>잘 찍었죠 ?<br><img width="1439" alt="스크린샷 2021-08-18 오후 1 53 56" src="https://user-images.githubusercontent.com/87232411/129839942-b73582ab-63d9-4388-8182-c640c7144b3a.png"></p><p>S3 -&gt; 만든 버킷 클릭<br><img width="464" alt="스크린샷 2021-08-18 오후 1 54 38" src="https://user-images.githubusercontent.com/87232411/129839966-4a4546fa-e84a-4590-ba61-4ba45361db4c.png"></p><p>사진이 나올 때까지 계속 클릭 해줍니다<br><img width="409" alt="스크린샷 2021-08-18 오후 1 54 45" src="https://user-images.githubusercontent.com/87232411/129839967-1c2c1cae-e56f-48ad-a37a-73db330c21eb.png"><br><img width="400" alt="스크린샷 2021-08-18 오후 1 54 51" src="https://user-images.githubusercontent.com/87232411/129839969-1b4862e6-f827-41ca-8232-6fd96c72460a.png"><br><img width="378" alt="스크린샷 2021-08-18 오후 1 54 54" src="https://user-images.githubusercontent.com/87232411/129839970-5fb8bd47-66ec-4288-9564-3c7970edcb52.png"><br><img width="372" alt="스크린샷 2021-08-18 오후 1 54 57" src="https://user-images.githubusercontent.com/87232411/129839972-7829ee0c-7496-47f1-b116-4ad9beb122ed.png"><br><img width="396" alt="스크린샷 2021-08-18 오후 1 55 02" src="https://user-images.githubusercontent.com/87232411/129839973-b7bd94e9-7fd0-4c42-bf61-29d9423e0214.png"></p><p>사진이 S3 버킷에 저장이 되었습니다<br><img width="753" alt="스크린샷 2021-08-18 오후 1 55 10" src="https://user-images.githubusercontent.com/87232411/129839975-4c9e8b96-bfa8-4bfa-af98-8480419a3933.png"></p><p>AllInOne의 업로드 폴더에 이미지 존재 여부 확인, S3 버킷에 저장된 내용 확인</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 기존 파일만 존재</span><br>tree <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>wp-content/upload<br><br><span class="hljs-comment"># S3 버킷에 저장된 내용 확인</span><br>aws s3 ls s3:<span class="hljs-regexp">//</span>&lt;자신의 버킷 이름&gt; --recursive<br>aws s3 ls s3:<span class="hljs-regexp">//</span>beaswp --recursive<br></code></pre></td></tr></table></figure><img width="481" alt="스크린샷 2021-08-18 오후 1 56 04" src="https://user-images.githubusercontent.com/87232411/129839981-947c44da-a105-4dc9-aba0-260f3bd8b20c.png"><img width="619" alt="스크린샷 2021-08-18 오후 1 56 45" src="https://user-images.githubusercontent.com/87232411/129839984-204daa1b-6af0-4c72-829c-ef77360d1180.png"><h3 id="옵션-S3-버킷-설정"><a href="#옵션-S3-버킷-설정" class="headerlink" title="옵션) S3 버킷 설정"></a>옵션) S3 버킷 설정</h3><p>버킷 -&gt; 권한 클릭<br><img width="383" alt="스크린샷 2021-08-18 오후 1 57 10" src="https://user-images.githubusercontent.com/87232411/129839988-eca74b99-79b3-4e56-ac64-86cec8dfa785.png"></p><p>버킷 정책에서 <code>편집</code> 클릭<br><img width="1067" alt="스크린샷 2021-08-18 오후 1 57 20" src="https://user-images.githubusercontent.com/87232411/129839989-add9e165-9093-42a0-a6bd-b8f259d3dacc.png"></p><p>붙여놓기 후 자신의 버킷 이름 -&gt; 변경</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs JSON"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;Version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2012-10-17&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;Statement&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;Sid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;PublicReadGetObject&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;Effect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Allow&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;Principal&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;*&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;Action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-string">&quot;s3:GetObject&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;Resource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-string">&quot;arn:aws:s3:::자신의버킷이름/*&quot;</span><br>        <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><img width="883" alt="스크린샷 2021-08-18 오후 1 58 23" src="https://user-images.githubusercontent.com/87232411/129839996-5e2b85aa-47e5-4174-8128-636686285237.png"><p><code>변경 사항 저장</code> 클릭<br><img width="253" alt="스크린샷 2021-08-18 오후 1 58 27" src="https://user-images.githubusercontent.com/87232411/129840000-b9951651-a017-4f75-911f-070b5a6ba456.png"></p><p>실습 끝<br><img width="340" alt="스크린샷 2021-08-18 오후 1 58 34" src="https://user-images.githubusercontent.com/87232411/129840004-7a618aa7-a312-4627-8c9a-4c7926b2c49e.png"><br><br/><br><br/></p><h2 id="다음-실습을-위해-해야-할-사항"><a href="#다음-실습을-위해-해야-할-사항" class="headerlink" title="다음 실습을 위해 해야 할 사항"></a>다음 실습을 위해 해야 할 사항</h2><p>AllInOne 인스턴스 중지<br>S3 버킷 초기화: S3 버킷 -&gt; 비어있음 -&gt; <code>영구 삭제</code> 입력 -&gt; <code>비어있음</code> 클릭 -&gt; <code>종료</code> 클릭</p><br/><br/><br/><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 10주차 -1 Wordpress 이중화 구성, 실습 환경 소개 &amp; 실습 준비</title>
    <link href="/2021/08/18/2021-08-18-AFOS-last-1/"/>
    <url>/2021/08/18/2021-08-18-AFOS-last-1/</url>
    
    <content type="html"><![CDATA[<h2 id="실습-환경-소개"><a href="#실습-환경-소개" class="headerlink" title="실습 환경 소개"></a>실습 환경 소개</h2><p>최종 구성</p><img src="/css/images/AT12.png"><br/><br/><ul><li>CloudFront는 CDN 서비스와 기본 보안 기능(Anti-DDoS)을 제공한다</li><li>S3는 Wordpress 의 Upload(이미지 등) 파일들을 저장하고 사용자에게 제공한다</li><li>그 외 나머지 구성은 9주차와 동일</li><li>HA(고가용성) 구성으로 되어 있으며 일부 장애(AZ 장애, RDS 장애, Web EC2 장애 등)에 대응이 가능하다</li><li>t2.micro(vCPU 1, Mem 1GiB) 는 WooCommerce 플러그인 설치 시 메모리 부족 등으로 설치 자체가 제대로 진행되지 않는다<br>따라서 설치가 가능한 최소 성능인 t3.medium(vCPU 2, Mem 4GiB)로 배포가 된다 1시간당 0.052 USD 비용이 부가된다</li></ul><h2 id="실습-기본-환경-배포"><a href="#실습-기본-환경-배포" class="headerlink" title="실습 기본 환경 배포"></a>실습 기본 환경 배포</h2><h3 id="CloudFormation-실습-기본-환경-배포"><a href="#CloudFormation-실습-기본-환경-배포" class="headerlink" title="CloudFormation 실습 기본 환경 배포"></a>CloudFormation 실습 기본 환경 배포</h3><p>클릭<br><a href="https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=WPHALab&templateURL=https:%2F%2Fs3.ap-northeast-2.amazonaws.com%2Fcloudformation.cloudneta.net%2FWordpress%2Faws-wp.yaml">https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=WPHALab&amp;templateURL=https:%2F%2Fs3.ap-northeast-2.amazonaws.com%2Fcloudformation.cloudneta.net%2FWordpress%2Faws-wp.yaml</a></p><h3 id="2번-실습을-위한-RDS-배포"><a href="#2번-실습을-위한-RDS-배포" class="headerlink" title="2번 실습을 위한 RDS 배포"></a>2번 실습을 위한 RDS 배포</h3><p>WebSrv-Leader 인스턴스를 이용하여 Wordpress 초기 구성 - RDS DB 생성은 미리 하기 -&gt; 총 16분 정도 소요<br>RDS -&gt; 데이터베이스 생성 클릭 -&gt; 데이터베이스 생성 12분 정도 소요 -&gt; 백업본생성에 4분 정도 소요</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-comment"># 별로 언급이 없는 부분은 기본값 설정</span><br><br><span class="hljs-attribute">생성 방식</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">표준 생성</span><br><span class="hljs-attribute">엔진 옵션</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">MySQL</span><br><span class="hljs-attribute">템플릿</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">개발/테스트</span><br><span class="hljs-attribute">DB 인스턴스 식별자</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">wpdb (현재 AWS 리전에서 AWS 계정이 소유하는 모든 DB 인스턴스에 대해 유일, 각자 편하게 설정)</span><br><span class="hljs-attribute">마스터 사용자 이름</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">root</span><br><span class="hljs-attribute">마스터 암호(암호확인)</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">qwe12345</span><br><span class="hljs-attribute">DB 인스턴스 클래스</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">버스터블 클래스(t 클래스 포함) db.t2.micro (이전 세대 클래스 포함)</span><br><span class="hljs-attribute">다중 AZ 배포</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">대기 인스턴스 생성</span><br><span class="hljs-attribute">VPC</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">WP-VPC1</span><br><span class="hljs-attribute">퍼블릭 액세스 가능</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">아니요</span><br><span class="hljs-attribute">VPC 보안 그룹</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">##-VPC1SG3-## 포함된것 선택 , 기본 default 는 제거</span><br><span class="hljs-attribute">추가 구성</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">클릭</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">초기 데이터베이스 이름 : wordpressdb</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">DB 파라미터 그룹 : ##-mydbparametergroup-## 포함된것 선택</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">백업 보존 기간 : 1일</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">Enhanced 모니터링 활성화 (Uncheck)</span><br></code></pre></td></tr></table></figure><br/><br/><br/><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 9주차-4 Wordpress &amp; WooCommerce  웹서버(EFS) &amp; AWS RDS 구성 실습</title>
    <link href="/2021/08/05/2021-08-04-AFOS-4/"/>
    <url>/2021/08/05/2021-08-04-AFOS-4/</url>
    
    <content type="html"><![CDATA[<h2 id="1대-EC2-EFS-와-AWS-RDS-DB-로-구성-Web-x2F-PHP-인스턴스-AWS-RDS-DB-로-구성"><a href="#1대-EC2-EFS-와-AWS-RDS-DB-로-구성-Web-x2F-PHP-인스턴스-AWS-RDS-DB-로-구성" class="headerlink" title="1대 EC2(EFS)와 AWS RDS(DB)로 구성 : Web&#x2F;PHP 인스턴스 + AWS RDS(DB)로 구성"></a>1대 EC2(EFS)와 AWS RDS(DB)로 구성 : Web&#x2F;PHP 인스턴스 + AWS RDS(DB)로 구성</h2><ul><li>WebSrv2: 10.1.1.20 + EFS(&#x2F;var&#x2F;www&#x2F;wordpress)</li><li>AWS RDS</li></ul><p>RDS &#x3D;&gt; <code>데이터베이스 생성</code> 클릭<br><img width="471" alt="스크린샷 2021-08-04 오후 11 10 15" src="https://user-images.githubusercontent.com/87232411/128199953-ed520001-4cd2-4b77-aff2-032f6f8c82f2.png"></p><p>MySQL 선택<br><img width="816" alt="스크린샷 2021-08-04 오후 11 10 28" src="https://user-images.githubusercontent.com/87232411/128199961-5582d57d-19e5-4d40-aac3-4ec2bb5d88ee.png"></p><p>프리티어<br><img width="826" alt="스크린샷 2021-08-04 오후 11 10 34" src="https://user-images.githubusercontent.com/87232411/128199968-8446b398-7b5b-47dd-96c7-694f122103f1.png"></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">DB 인스턴스 식별자 : <span class="hljs-type">wpdb</span> (현재 AWS 리전에서 AWS 계정이 소유하는 모든 DB 인스턴스에 대해 유일, 각자 편하게 설정)<br>마스터 사용자 이름 : <span class="hljs-type">root</span><br>마스터 암호(암호확인) : <span class="hljs-type">qwe12345</span><br></code></pre></td></tr></table></figure><img width="815" alt="스크린샷 2021-08-04 오후 11 11 07" src="https://user-images.githubusercontent.com/87232411/128199971-4f00a428-cf5e-4e18-86ee-a82f52f719d7.png"><p><code>t2.micro</code> 선택<br><img width="802" alt="스크린샷 2021-08-04 오후 11 11 16" src="https://user-images.githubusercontent.com/87232411/128199976-7dad6683-2bca-469d-80c2-6dd924823834.png"></p><p><code>WP-VPC1</code> 선택<br><img width="814" alt="스크린샷 2021-08-04 오후 11 11 31" src="https://user-images.githubusercontent.com/87232411/128199984-e4447b7b-fd99-436d-83b3-3865e11ceb6d.png"></p><p>default 제거 후 -&gt; G3 라고 적혀있는 보안그룹 선택<br><img width="602" alt="스크린샷 2021-08-04 오후 11 11 42" src="https://user-images.githubusercontent.com/87232411/128199992-c2aa63af-cf51-42fa-a11b-e0b1d4fa853d.png"><br><img width="661" alt="스크린샷 2021-08-04 오후 11 11 54" src="https://user-images.githubusercontent.com/87232411/128199996-8deb987b-29af-4c00-9d4f-24aa230d8084.png"></p><p>추가구성</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs clean">초기 데이터베이스 이름 : wordpressdb<br>DB 파라미터 그룹 : ##-mydbparametergroup-## 포함된것 선택<br>자동 백업 활성화 : Uncheck<br></code></pre></td></tr></table></figure><img width="798" alt="스크린샷 2021-08-04 오후 11 12 36" src="https://user-images.githubusercontent.com/87232411/128199998-96ad225c-f288-4a11-ae5c-40beafeeeb4d.png"><p><code>데이터베이스 생성</code> 클릭<br><img width="287" alt="스크린샷 2021-08-04 오후 11 12 49" src="https://user-images.githubusercontent.com/87232411/128200002-2e7c2389-fbc9-4776-9761-9b2224e94dd9.png"></p><p>생성 뒤 몇분 후 엔드포인트 확인 !<br><img width="395" alt="스크린샷 2021-08-04 오후 11 27 55" src="https://user-images.githubusercontent.com/87232411/128200004-2723d204-1691-4074-8cd8-5db469432264.png"></p><h2 id="WebSrv2-EFS-확인-및-RDS-엔드포인트-주소-설정-및-확인"><a href="#WebSrv2-EFS-확인-및-RDS-엔드포인트-주소-설정-및-확인" class="headerlink" title="WebSrv2) EFS 확인 및 RDS 엔드포인트 주소 설정 및 확인"></a>WebSrv2) EFS 확인 및 RDS 엔드포인트 주소 설정 및 확인</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 관리자 전환</span><br>sudo su -<br><br><span class="hljs-comment"># EFS 확인</span><br><span class="hljs-built_in">df</span> |grep efs<br><span class="hljs-built_in">df</span> -hT |grep efs<br><br><span class="hljs-comment"># RDS 엔드포인트를 변수에 지정</span><br>RDS=wpdb.cfd4iq95pfdk.ap-northeast-2.rds.amazonaws.com<br><br><span class="hljs-comment"># wp-config.php 파일에 DB 주소를 RDS 엔드포인트로 설정</span><br>sed -i <span class="hljs-string">&quot;s/localhost/<span class="hljs-variable">$RDS</span>/g&quot;</span> /var/www/wordpress/wp-config.php<br><br><span class="hljs-comment"># DB 접속 테스트</span><br>mysql -h <span class="hljs-variable">$RDS</span> -uroot -pqwe12345 -e <span class="hljs-string">&#x27;show databases;&#x27;</span><br>mysql -h <span class="hljs-variable">$RDS</span> -uroot -pqwe12345<br></code></pre></td></tr></table></figure><img width="567" alt="스크린샷 2021-08-04 오후 11 28 29" src="https://user-images.githubusercontent.com/87232411/128200006-3a9739e9-3de4-4682-89c5-6ff1ab62d3ad.png"><img width="680" alt="스크린샷 2021-08-04 오후 11 29 04" src="https://user-images.githubusercontent.com/87232411/128200009-989abf96-a1fb-4971-8da0-d9fb977c2008.png"><img width="527" alt="스크린샷 2021-08-04 오후 11 29 14" src="https://user-images.githubusercontent.com/87232411/128200012-7426c0b0-908c-42e7-b35f-03a4a7e7b7a3.png"><img width="588" alt="스크린샷 2021-08-04 오후 11 29 28" src="https://user-images.githubusercontent.com/87232411/128200014-e817b58a-1ccc-4a4d-9eaa-7a3bfe3a9418.png"><img width="596" alt="스크린샷 2021-08-04 오후 11 29 41" src="https://user-images.githubusercontent.com/87232411/128200016-9b8d8176-b933-4a1f-9ecb-30b800f638fe.png"><p>실습 끝!<br><img width="1340" alt="스크린샷 2021-08-04 오후 11 30 34" src="https://user-images.githubusercontent.com/87232411/128200018-98b161d3-00c7-4904-9eea-2ae59907c37c.png"></p><h2 id="자원-삭제-중요"><a href="#자원-삭제-중요" class="headerlink" title="자원 삭제(중요!)"></a>자원 삭제(중요!)</h2><h3 id="1-RDS-삭제-gt-인스턴스-스냅샷-생성-여부-언체크-gt-인정한다는-체크박스-체크-gt-삭제"><a href="#1-RDS-삭제-gt-인스턴스-스냅샷-생성-여부-언체크-gt-인정한다는-체크박스-체크-gt-삭제" class="headerlink" title="1. RDS 삭제 -&gt; 인스턴스 스냅샷 생성 여부 언체크 -&gt; 인정한다는 체크박스 체크 -&gt; 삭제"></a>1. RDS 삭제 -&gt; 인스턴스 스냅샷 생성 여부 <code>언체크</code> -&gt; 인정한다는 체크박스 체크 -&gt; 삭제</h3><h3 id="2-CloudFormation-삭제"><a href="#2-CloudFormation-삭제" class="headerlink" title="2. CloudFormation 삭제"></a>2. CloudFormation 삭제</h3><br/><br/><br/><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 9주차-3 Wordpress &amp; WooCommerce  웹서버 &amp; DB서버 구성 + WooCommerce 설정 실습</title>
    <link href="/2021/08/05/2021-08-04-AFOS-3/"/>
    <url>/2021/08/05/2021-08-04-AFOS-3/</url>
    
    <content type="html"><![CDATA[<h2 id="2대-EC2로-구성-Web-x2F-PHP-인스턴스-MariaDB-인스턴스-구성"><a href="#2대-EC2로-구성-Web-x2F-PHP-인스턴스-MariaDB-인스턴스-구성" class="headerlink" title="2대 EC2로 구성 : Web&#x2F;PHP 인스턴스 + MariaDB 인스턴스 구성"></a>2대 EC2로 구성 : Web&#x2F;PHP 인스턴스 + MariaDB 인스턴스 구성</h2><ul><li>WebSrv1: 10.1.1.10</li><li>DBSrv: 10.1.2.20</li></ul><h2 id="기본-설정은-CloudFormation-으로-설정-완료-User-Data-내용"><a href="#기본-설정은-CloudFormation-으로-설정-완료-User-Data-내용" class="headerlink" title="기본 설정은 CloudFormation 으로 설정 완료 - User Data 내용"></a>기본 설정은 CloudFormation 으로 설정 완료 - User Data 내용</h2><p>WebSrv</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>hostnamectl --static set-hostname WebSrv<br>amazon-linux-extras install lamp-mariadb10.2-php7.2 php7.2 -y<br>yum install httpd htop -y<br>systemctl start httpd &amp;&amp; systemctl <span class="hljs-built_in">enable</span> httpd<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;&lt;?php phpinfo(); ?&gt;&quot;</span> &gt; /var/www/html/phpinfo.php<br>yum install gcc php-xml php-mbstring php-sodium php-devel php-pear ImageMagick-devel ghostscript -y<br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOT&gt; /etc/php.d/40-imagick.ini</span><br><span class="hljs-string">; Enable imagick extension module</span><br><span class="hljs-string">extension = imagick.so</span><br><span class="hljs-string">EOT</span><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\n&quot;</span> | pecl install imagick<br>sed -i <span class="hljs-string">&#x27;s/^upload_max_filesize = 2M/upload_max_filesize = 64M/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^post_max_size = 8M/post_max_size = 64M/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^max_execution_time = 30/max_execution_time = 300/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^memory_limit = 128M/memory_limit = 256/g&#x27;</span> /etc/php.ini<br>wget https://ko.wordpress.org/wordpress-latest-ko_KR.zip<br>unzip wordpress-latest-ko_KR.zip<br><span class="hljs-built_in">cp</span> wordpress/wp-config-sample.php wordpress/wp-config.php<br>sed -i <span class="hljs-string">&quot;s/localhost/10.1.2.20/g&quot;</span> wordpress/wp-config.php<br>sed -i <span class="hljs-string">&quot;s/database_name_here/wordpressdb/g&quot;</span> wordpress/wp-config.php<br>sed -i <span class="hljs-string">&quot;s/username_here/root/g&quot;</span> wordpress/wp-config.php<br>sed -i <span class="hljs-string">&quot;s/password_here/qwe123/g&quot;</span> wordpress/wp-config.php<br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOT&gt;&gt; wordpress/wp-config.php</span><br><span class="hljs-string">define(&#x27;WP_MEMORY_LIMIT&#x27;, &#x27;256M&#x27;);</span><br><span class="hljs-string">EOT</span><br><span class="hljs-built_in">cp</span> -r wordpress/* /var/www/html/<br><span class="hljs-built_in">chown</span> -R apache /var/www<br><span class="hljs-built_in">chgrp</span> -R apache /var/www<br><span class="hljs-built_in">chmod</span> 2775 /var/www<br>find /var/www -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">chmod</span> 2775 &#123;&#125; \;<br>find /var/www -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">chmod</span> 0664 &#123;&#125; \;<br>systemctl restart php-fpm<br>systemctl restart httpd<br></code></pre></td></tr></table></figure><p>DBSrv</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>hostnamectl --static set-hostname DBSrv<br>amazon-linux-extras install lamp-mariadb10.2-php7.2<br>yum install mariadb-server htop -y<br>systemctl start mariadb &amp;&amp; systemctl <span class="hljs-built_in">enable</span> mariadb<br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\n\nqwe123\nqwe123\ny\nn\ny\ny\n&quot;</span> | /usr/bin/mysql_secure_installation<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqld\]/a\character-set-server=utf8&quot;</span> /etc/my.cnf.d/mariadb-server.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqld\]/a\collation-server=utf8_general_ci&quot;</span> /etc/my.cnf.d/mariadb-server.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqld\]/a\init_connect=\&quot;SET NAMES utf8\&quot;&quot;</span> /etc/my.cnf.d/mariadb-server.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqld\]/a\init_connect=\&quot;SET collation_connection = utf8_general_ci\&quot;&quot;</span> /etc/my.cnf.d/mariadb-server.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[client\]/a\default-character-set=utf8&quot;</span> /etc/my.cnf.d/client.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysql\]/a\default-character-set=utf8&quot;</span> /etc/my.cnf.d/mysql-clients.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqldump\]/a\default-character-set=utf8&quot;</span> /etc/my.cnf.d/mysql-clients.cnf<br>mysql -uroot -pqwe123 -e <span class="hljs-string">&quot;GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;qwe123&#x27;;&quot;</span><br>mysql -uroot -pqwe123 -e <span class="hljs-string">&quot;CREATE DATABASE wordpressdb&quot;</span><br>systemctl restart mariadb<br></code></pre></td></tr></table></figure><p>WebSrv 퍼블릭 IP로 접속하면 wordpress 페이지가 나온다<br><img width="1373" alt="스크린샷 2021-08-04 오후 11 01 54" src="https://user-images.githubusercontent.com/87232411/128196710-508b29c6-c77a-442b-8b02-69935fb54ba4.png"></p><p>정보를 채워주자<br><img width="801" alt="스크린샷 2021-08-04 오후 11 02 22" src="https://user-images.githubusercontent.com/87232411/128196729-73e26f2c-d956-4773-b990-88c579c60d99.png"></p><h3 id="WooCommerce-설치"><a href="#WooCommerce-설치" class="headerlink" title="WooCommerce 설치"></a>WooCommerce 설치</h3><p>플러그인 -&gt; <code>새로 추가</code> 클릭<br><img width="157" alt="스크린샷 2021-08-04 오후 11 02 59" src="https://user-images.githubusercontent.com/87232411/128196735-a20aa335-7f1d-46f0-8676-d21d993510c2.png"></p><p><code>WooCommerce</code> 검색 -&gt; <code>설치</code> 클릭<br><img width="1260" alt="스크린샷 2021-08-04 오후 11 03 31" src="https://user-images.githubusercontent.com/87232411/128196736-d3ac7535-a202-4b43-a637-8b745511a510.png"></p><p><code>활성화</code> 클릭<br><img width="633" alt="스크린샷 2021-08-04 오후 11 03 53" src="https://user-images.githubusercontent.com/87232411/128196741-9674f748-e7ab-43e8-827b-9bc9b012c0fe.png"></p><p>자 오류가 발생하면 당황하지 말고 F5를 눌러준다<br><img width="861" alt="스크린샷 2021-08-04 오후 11 04 08" src="https://user-images.githubusercontent.com/87232411/128196747-baa8e6e6-f60a-4e77-964f-42996c5fc0ea.png"></p><p>기본 정보를 입력해주고 <code>계속</code> 클릭<br><img width="681" alt="스크린샷 2021-08-04 오후 11 04 47" src="https://user-images.githubusercontent.com/87232411/128196757-f0bdd9fe-f378-44e3-85d4-3785ead5474b.png"></p><p><code>아니요</code> 클릭<br><img width="596" alt="스크린샷 2021-08-04 오후 11 04 55" src="https://user-images.githubusercontent.com/87232411/128196762-3b00625a-429a-4c7c-bb5b-eb74b47d6faa.png"></p><p><code>계속</code> 클릭 -&gt; 오류가 발생하면 여기서도 침착하게 F5를 눌러 다시 기본 정보를 입력해준다<br>(저는 3번 정도 다시 적어서 성공했습니다…ㅠ)<br><img width="459" alt="스크린샷 2021-08-04 오후 11 05 01" src="https://user-images.githubusercontent.com/87232411/128196765-65261e52-4c28-431f-8c86-16e5fa8baffa.png"></p><p>아무거나 선택 -&gt; <code>계속</code> 클릭<br><img width="654" alt="스크린샷 2021-08-04 오후 11 06 11" src="https://user-images.githubusercontent.com/87232411/128196769-53b4b5b5-0bdb-4ca7-8357-581390a64110.png"></p><p>아직 제품 없습니다 -&gt; 아니오 -&gt; <code>계속</code> 클릭<br><img width="582" alt="스크린샷 2021-08-04 오후 11 06 22" src="https://user-images.githubusercontent.com/87232411/128196772-ae9c0f9b-494e-4f04-895f-b568bee9fad6.png"></p><p>언체크 -&gt; <code>Continue</code> 클릭<br><img width="710" alt="스크린샷 2021-08-04 오후 11 06 32" src="https://user-images.githubusercontent.com/87232411/128196775-3460cf80-e8db-4b7b-9a89-b219ed3b2eee.png"></p><h3 id="테마-설정"><a href="#테마-설정" class="headerlink" title="테마 설정"></a>테마 설정</h3><p>Storefront <code>선택</code> 클릭<br><img width="689" alt="스크린샷 2021-08-04 오후 11 06 43" src="https://user-images.githubusercontent.com/87232411/128196776-3385ac71-8cf9-4ba4-bfab-f677ef720989.png"></p><p>맨 하단에 <code>스토어 개인 설정</code> 클릭<br><img width="455" alt="스크린샷 2021-08-04 오후 11 06 58" src="https://user-images.githubusercontent.com/87232411/128196778-7d785789-df9f-4bbb-9d6e-3f6fc3482210.png"></p><p><code>상품 불러오기</code> 클릭<br><img width="1213" alt="스크린샷 2021-08-04 오후 11 07 42" src="https://user-images.githubusercontent.com/87232411/128196783-7044aea9-63ed-4b54-8564-4bd61ddb38b7.png"></p><p><code>건너뛰기</code> 클릭<br><img width="667" alt="스크린샷 2021-08-04 오후 11 07 52" src="https://user-images.githubusercontent.com/87232411/128196788-22c07fe9-9fa1-4ff4-a9c4-1d3809210568.png"></p><p><code>건너뛰기</code> 클릭<br><img width="609" alt="스크린샷 2021-08-04 오후 11 08 28" src="https://user-images.githubusercontent.com/87232411/128196792-91d91664-0106-49a1-ba9e-3a7d3bac817c.png"></p><p><code>건너뛰기</code> 클릭<br><img width="575" alt="스크린샷 2021-08-04 오후 11 08 36" src="https://user-images.githubusercontent.com/87232411/128196796-99a239c2-8899-4f2b-a04a-3471919c1bcf.png"></p><p><code>작업 완료</code> 클릭<br><img width="661" alt="스크린샷 2021-08-04 오후 11 08 42" src="https://user-images.githubusercontent.com/87232411/128196801-31768254-4fd3-45a7-8aa2-a8ea4117ff83.png"></p><p>상단에 <code>상점 방문</code> 클릭<br><img width="317" alt="스크린샷 2021-08-04 오후 11 08 51" src="https://user-images.githubusercontent.com/87232411/128196806-62f33b72-1b73-48c7-a609-e3bac3458bcc.png"></p><p>쨔잔<br><img width="1438" alt="스크린샷 2021-08-04 오후 11 09 03" src="https://user-images.githubusercontent.com/87232411/128196809-2f0066d7-b76a-45d9-8197-b38169cdbec5.png"></p><p>이렇게 샘플 상품들이 진열되어 있다<br><img width="917" alt="스크린샷 2021-08-04 오후 11 09 15" src="https://user-images.githubusercontent.com/87232411/128196818-f6d78a9e-837f-46ee-8ddd-9470421819a7.png"></p><p>진짜 쇼핑몰을 차린 것 처럼 신기하다 …<br><img width="1216" alt="스크린샷 2021-08-04 오후 11 09 26" src="https://user-images.githubusercontent.com/87232411/128196826-305895af-1821-41c5-a56d-789bcb662f09.png"></p><br/><br/><br/><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 9주차-2 Wordpress &amp; WooCommerce 단일서버 구성 실습</title>
    <link href="/2021/08/04/2021-08-04-AFOS-2/"/>
    <url>/2021/08/04/2021-08-04-AFOS-2/</url>
    
    <content type="html"><![CDATA[<h2 id="1안-단일-서버-구성"><a href="#1안-단일-서버-구성" class="headerlink" title="[1안] 단일 서버 구성"></a>[1안] 단일 서버 구성</h2><h2 id="1대의-인스턴스에-Web-PHP-DB-구성"><a href="#1대의-인스턴스에-Web-PHP-DB-구성" class="headerlink" title="1대의 인스턴스에 Web + PHP +DB 구성"></a>1대의 인스턴스에 Web + PHP +DB 구성</h2><p>AllnOne: 10.1.1.100</p><h2 id="Wordpress-v5-8-설치-전-준비-사항-권고"><a href="#Wordpress-v5-8-설치-전-준비-사항-권고" class="headerlink" title="Wordpress v5.8 설치 전 준비 사항(권고)"></a>Wordpress v5.8 설치 전 준비 사항(권고)</h2><ul><li>웹서버: Apache HTTPD 2.4.x 혹은 nginx 1.20&#x2F;1.19</li><li>PHP v7.3 이상 -&gt; Extensions 설치</li><li>MySQL v5.7 이상 혹은 MariaDB v10.2 이상</li></ul><h3 id="CloudFormation-스택-생성"><a href="#CloudFormation-스택-생성" class="headerlink" title="CloudFormation 스택 생성"></a>CloudFormation 스택 생성</h3><p><a href="https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=WPLab&templateURL=https:%2F%2Fs3.ap-northeast-2.amazonaws.com%2Fcloudformation.cloudneta.net%2FWordpress%2Faws-wordpress-db2.yaml">https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=WPLab&amp;templateURL=https:%2F%2Fs3.ap-northeast-2.amazonaws.com%2Fcloudformation.cloudneta.net%2FWordpress%2Faws-wordpress-db2.yaml</a></p><p><code>다음</code> 클릭<br><img width="1033" alt="스크린샷 2021-08-04 오후 9 20 47" src="https://user-images.githubusercontent.com/87232411/128187539-a95d8421-3923-4595-b12c-a160ac21983d.png"></p><p>t2.micro 는 WooCommerce 플러그인 설치 시 메모리 부족 등으로 설치 시 메모리 부족 등으로 설치 자체가 제대로 진행이 되지 않는다</p><p>그러므로 설치가 가능한 최소의 성능인 t3.medium로 배포가 된다<br><strong>1시간당 60원 정도의 비용이 부가된다</strong><br><img width="360" alt="스크린샷 2021-08-04 오후 9 20 56" src="https://user-images.githubusercontent.com/87232411/128187540-9131cd7b-baff-4cf0-a6be-81106e2b6600.png"></p><p><code>Keyname</code> 선택 후 <code>다음</code> 클릭<br><img width="1042" alt="스크린샷 2021-08-04 오후 9 21 02" src="https://user-images.githubusercontent.com/87232411/128187543-4845d204-7858-4386-9288-ee96b393ade3.png"></p><p><code>다음</code> 클릭<br><img width="355" alt="스크린샷 2021-08-04 오후 9 21 10" src="https://user-images.githubusercontent.com/87232411/128187547-3f7178c6-a9ec-4201-a758-30730e741ddf.png"></p><p><code>스택 생성</code> 클릭<br><img width="262" alt="스크린샷 2021-08-04 오후 9 21 15" src="https://user-images.githubusercontent.com/87232411/128187551-81821290-3571-4e34-aed4-4e1de440e729.png"></p><h3 id="웹서버-설치"><a href="#웹서버-설치" class="headerlink" title="웹서버 설치"></a>웹서버 설치</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 관리자 전환</span><br>sudo su -<br><br><span class="hljs-comment"># 설치</span><br>yum install httpd -y<br><br><span class="hljs-comment"># 서비스 실행</span><br>systemctl start httpd &amp;&amp; systemctl <span class="hljs-built_in">enable</span> httpd<br><br><span class="hljs-comment"># 웹서버 버전 확인</span><br>httpd -v<br><br><span class="hljs-comment"># 웹 접속하여 확인</span><br>http://EC2_PublicIP/<br></code></pre></td></tr></table></figure><img width="370" alt="스크린샷 2021-08-04 오후 9 23 39" src="https://user-images.githubusercontent.com/87232411/128187555-73bd1895-4b8c-42db-8688-d5f30cfca860.png"><img width="573" alt="스크린샷 2021-08-04 오후 9 23 56" src="https://user-images.githubusercontent.com/87232411/128187556-e3633025-747d-4a6a-a1af-ea0858d6ada3.png"><img width="275" alt="스크린샷 2021-08-04 오후 9 24 11" src="https://user-images.githubusercontent.com/87232411/128187558-8312e617-5ef7-4372-ba13-a2e06e014f26.png"><p>Test page가 생성된 걸 볼 수 있다<br><img width="1369" alt="스크린샷 2021-08-04 오후 9 24 24" src="https://user-images.githubusercontent.com/87232411/128187562-a4f0ab5e-9158-4dfa-99cd-e9406caa850c.png"></p><h3 id="PHP설치-gt-PHP-Extensions-설치"><a href="#PHP설치-gt-PHP-Extensions-설치" class="headerlink" title="PHP설치 -&gt; PHP Extensions 설치"></a>PHP설치 -&gt; PHP Extensions 설치</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 설치</span><br>amazon-linux-extras install php7.4 -y<br><br><span class="hljs-comment"># PHP 버전 확인</span><br>php -v<br><br><span class="hljs-comment"># PHP Extensions 설치</span><br>yum install gcc php-xml php-mbstring php-sodium php-devel php-pear ImageMagick-devel ghostscript -y<br><br><span class="hljs-comment"># PHP Extensions 정보 확인</span><br>php --ini<br><br><span class="hljs-comment"># PHP Extensions - imagick 설치</span><br><span class="hljs-comment">## imagick 관련 ini 파일 생성</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOT&gt; /etc/php.d/40-imagick.ini</span><br><span class="hljs-string">; Enable imagick extension module</span><br><span class="hljs-string">extension = imagick.so</span><br><span class="hljs-string">EOT</span><br><br><span class="hljs-comment">## pecl 로 imagick 설치</span><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\n&quot;</span> | pecl install imagick<br><br><span class="hljs-comment"># php-fpm 재시작으로 imagick 적용</span><br>systemctl restart php-fpm<br>systemctl restart httpd<br><br><span class="hljs-comment"># PHP Extensions 정보 확인</span><br>php --ini<br><br><span class="hljs-comment"># php info 페이지 생성</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;&lt;?php phpinfo(); ?&gt;&quot;</span> &gt; /var/www/html/info.php<br><br><span class="hljs-comment"># phpinfo.php 웹 접속하여 확인</span><br>http://EC2_PublicIP/info.php<br></code></pre></td></tr></table></figure><img width="514" alt="스크린샷 2021-08-04 오후 9 25 22" src="https://user-images.githubusercontent.com/87232411/128187568-262a407e-65da-4e74-b02b-f2316890ca40.png"><img width="448" alt="스크린샷 2021-08-04 오후 9 25 32" src="https://user-images.githubusercontent.com/87232411/128187571-70f1aed8-95c6-4ff1-97e6-5a8fbb72e394.png"><img width="402" alt="스크린샷 2021-08-04 오후 9 27 06" src="https://user-images.githubusercontent.com/87232411/128187574-0f56364c-88cf-420d-922a-79e9618c8541.png"><img width="431" alt="스크린샷 2021-08-04 오후 9 27 21" src="https://user-images.githubusercontent.com/87232411/128187576-08dbe0cb-7fa3-4824-9c2c-945698434018.png"><img width="594" alt="스크린샷 2021-08-04 오후 9 27 52" src="https://user-images.githubusercontent.com/87232411/128187581-868d69c1-ff47-4e28-bd0e-48b87545f278.png"><img width="454" alt="스크린샷 2021-08-04 오후 9 28 51" src="https://user-images.githubusercontent.com/87232411/128187583-0246b39f-5729-4b07-a04c-e10145fc17ab.png"><img width="539" alt="스크린샷 2021-08-04 오후 9 35 30" src="https://user-images.githubusercontent.com/87232411/128187604-cbc078bb-f0ac-47c7-9d10-78ff40db5f19.png"><p>info.php 페이지가 만들어졌다<br><img width="1366" alt="스크린샷 2021-08-04 오후 9 29 14" src="https://user-images.githubusercontent.com/87232411/128187589-1293e127-9e3f-4764-b7bd-00e8ea393022.png"></p><p>memory_limit는 128M이다<br><img width="446" alt="스크린샷 2021-08-04 오후 9 32 47" src="https://user-images.githubusercontent.com/87232411/128187595-74ea230c-921c-46c1-a037-eb026c177f3a.png"></p><h3 id="옵션-2M-이상-크기-파일-업로드-관련-설정-및-메모리-상향-설정-gt-Woocommerce-설치-시-필요"><a href="#옵션-2M-이상-크기-파일-업로드-관련-설정-및-메모리-상향-설정-gt-Woocommerce-설치-시-필요" class="headerlink" title="옵션) 2M 이상 크기 파일 업로드 관련 설정 및 메모리 상향 설정 -&gt; Woocommerce 설치 시 필요"></a>옵션) 2M 이상 크기 파일 업로드 관련 설정 및 메모리 상향 설정 -&gt; Woocommerce 설치 시 필요</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># php.ini 파일 수정</span><br>sed -i <span class="hljs-string">&#x27;s/^upload_max_filesize = 2M/upload_max_filesize = 64M/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^post_max_size = 8M/post_max_size = 64M/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^max_execution_time = 30/max_execution_time = 300/g&#x27;</span> /etc/php.ini<br>sed -i <span class="hljs-string">&#x27;s/^memory_limit = 128M/memory_limit = 256/g&#x27;</span> /etc/php.ini<br><br><span class="hljs-comment"># php-fpm 재시작으로 적용</span><br>systemctl restart php-fpm<br></code></pre></td></tr></table></figure><img width="597" alt="스크린샷 2021-08-04 오후 9 34 05" src="https://user-images.githubusercontent.com/87232411/128187597-edf15904-db8f-4df8-bcbc-2434125bc067.png"><p>memory_limit가 128M에서 256M로 늘어났다<br><img width="409" alt="스크린샷 2021-08-04 오후 9 34 14" src="https://user-images.githubusercontent.com/87232411/128187601-11794571-a697-4f8a-8df7-01f0f2dc4998.png"></p><h3 id="옵션-phpMyAdmin-설치-실패했으니-제-게시물-말고-직접-사이트-들어가서-맨-처음부터-실습하시는-걸-추천합니다"><a href="#옵션-phpMyAdmin-설치-실패했으니-제-게시물-말고-직접-사이트-들어가서-맨-처음부터-실습하시는-걸-추천합니다" class="headerlink" title="옵션) phpMyAdmin 설치 (실패했으니 제 게시물 말고, 직접 사이트 들어가서 맨 처음부터 실습하시는 걸 추천합니다.)"></a>옵션) phpMyAdmin 설치 (실패했으니 제 게시물 말고, 직접 사이트 들어가서 맨 처음부터 실습하시는 걸 추천합니다.)</h3><p><a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ec2-lamp-amazon-linux-2.html#install-phpmyadmin-lamp-server">https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ec2-lamp-amazon-linux-2.html#install-phpmyadmin-lamp-server</a></p><p>phpMyAdmin은 EC2 인스턴스의 MySQL 데이터베이스를 보고 편집하는 데 사용할 수 있는 웹 기반 데이터베이스 관리 도구이다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 필요한 종속 항목 설치</span><br>sudo yum install php-mbstring php-xml -y<br><br><span class="hljs-comment"># Apache를 다시 시작</span><br>sudo systemctl restart httpd<br><br><span class="hljs-comment">#php-fpm 를 다시 시작</span><br>sudo systemctl restart php-fpm<br><br><span class="hljs-comment">## Apache 문서 루트로 이동</span><br><span class="hljs-built_in">cd</span> /var/www/html<br><br><span class="hljs-comment"># phpMyAdmin 최신 릴리스의 소스 패키지 설치</span><br>wget https://www.phpmyadmin.net/downloads/phpMyAdmin-latest-all-languages.tar.gz<br><br><span class="hljs-comment"># phpMyAdmin 폴더를 생성하고 다음 명령을 사용하여 해당 폴더로 패키지의 압축을 푼다</span><br><span class="hljs-built_in">mkdir</span> phpMyAdmin &amp;&amp; tar -xvzf phpMyAdmin-latest-all-languages.tar.gz -C phpMyAdmin --strip-components 1<br><br><span class="hljs-comment"># 압축 파일 삭제</span><br><span class="hljs-built_in">rm</span> phpMyAdmin-latest-all-languages.tar.gz<br><br><span class="hljs-comment"># 사이트 접속</span><br>http://my.public.dns.amazonaws.com/phpMyAdmin<br><br></code></pre></td></tr></table></figure><img width="444" alt="스크린샷 2021-08-04 오후 9 37 49" src="https://user-images.githubusercontent.com/87232411/128187606-aefeedd9-0cb4-4de1-8577-b3b4485f296f.png"><img width="383" alt="스크린샷 2021-08-04 오후 9 38 07" src="https://user-images.githubusercontent.com/87232411/128187609-24e36e26-bfb4-4075-82b3-a7198e46e8ac.png"><img width="352" alt="스크린샷 2021-08-04 오후 9 38 27" src="https://user-images.githubusercontent.com/87232411/128187611-e90777a6-6b67-413c-a24c-6ee94469d60c.png"><img width="304" alt="스크린샷 2021-08-04 오후 9 38 43" src="https://user-images.githubusercontent.com/87232411/128187614-48756d15-1034-46a2-a41a-23470cbf231a.png"><img width="594" alt="스크린샷 2021-08-04 오후 9 39 03" src="https://user-images.githubusercontent.com/87232411/128187616-f6f33ec8-9c16-473c-a0eb-32a107ad7e84.png"><img width="593" alt="스크린샷 2021-08-04 오후 9 39 39" src="https://user-images.githubusercontent.com/87232411/128187619-07942b1d-125f-4abd-8939-b3a0cfe5d874.png"><img width="497" alt="스크린샷 2021-08-04 오후 9 39 52" src="https://user-images.githubusercontent.com/87232411/128187623-30fe6d5c-c1ba-44b6-9bad-5edb6b32e563.png"><p>음.. 접속이 안 된다<br><img width="1129" alt="스크린샷 2021-08-04 오후 9 54 12" src="https://user-images.githubusercontent.com/87232411/128187627-c904927f-f308-4e69-8546-704293a042e0.png"></p><p>파일은 있는데 …<br><img width="213" alt="스크린샷 2021-08-04 오후 9 54 21" src="https://user-images.githubusercontent.com/87232411/128187628-7b04a499-4829-467b-bb48-09074725bfca.png"></p><p>디렉터리 안에 페이지는 들어가지는데 보이진 않는다.</p><p>내 개인적인 생각으로 지금 인스턴스에 Mysql이 설치가 안 되어 있는 것도 관련있는 것 같다. 다음 기회에 !<br><img width="634" alt="스크린샷 2021-08-04 오후 9 56 02" src="https://user-images.githubusercontent.com/87232411/128187629-740a633e-2303-4abd-a9c0-ddebfaf6c283.png"></p><h3 id="MariaDB-설치"><a href="#MariaDB-설치" class="headerlink" title="MariaDB 설치"></a>MariaDB 설치</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 설치</span><br>amazon-linux-extras install mariadb10.5 -y<br><br><span class="hljs-comment"># 서비스 시작</span><br>systemctl start mariadb &amp;&amp; systemctl <span class="hljs-built_in">enable</span> mariadb<br><br><span class="hljs-comment"># DB root 계정 설정 및 권장 설정</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\n Y\n n\n Y\n Y\n Y\n Y\n&quot;</span> | /usr/bin/mysql_secure_installation<br><br><br><span class="hljs-comment"># DB 에 한글 입력을 위한 설정</span><br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqld\]/a\character-set-server=utf8&quot;</span> /etc/my.cnf.d/mariadb-server.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqld\]/a\collation-server=utf8_general_ci&quot;</span> /etc/my.cnf.d/mariadb-server.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqld\]/a\init_connect=\&quot;SET NAMES utf8\&quot;&quot;</span> /etc/my.cnf.d/mariadb-server.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqld\]/a\init_connect=\&quot;SET collation_connection = utf8_general_ci\&quot;&quot;</span> /etc/my.cnf.d/mariadb-server.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[client\]/a\default-character-set=utf8&quot;</span> /etc/my.cnf.d/client.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysql\]/a\default-character-set=utf8&quot;</span> /etc/my.cnf.d/mysql-clients.cnf<br>sed -i<span class="hljs-string">&#x27;&#x27;</span> -r -e <span class="hljs-string">&quot;/\[mysqldump\]/a\default-character-set=utf8&quot;</span> /etc/my.cnf.d/mysql-clients.cnf<br><br><span class="hljs-comment"># root 계정을 외부에서도 접속 가능하게 설정</span><br>mysql -e <span class="hljs-string">&quot;set password = password(&#x27;qwe123&#x27;);&quot;</span><br>mysql -uroot -pqwe123 -e <span class="hljs-string">&quot;GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;qwe123&#x27;;&quot;</span><br><br><span class="hljs-comment"># wordpressdb 데이터베이스 생성 및 확인</span><br>mysql -uroot -pqwe123 -e <span class="hljs-string">&quot;CREATE DATABASE wordpressdb&quot;</span><br>mysql -uroot -pqwe123 -e <span class="hljs-string">&quot;show databases;&quot;</span><br><br><span class="hljs-comment"># 서비스 재시작</span><br>systemctl restart mariadb<br><br><span class="hljs-comment"># 버전 확인</span><br>mysql --version<br><br></code></pre></td></tr></table></figure><img width="553" alt="스크린샷 2021-08-04 오후 9 57 40" src="https://user-images.githubusercontent.com/87232411/128187630-48c02094-e6c4-4317-8bc1-eb8e0adff99f.png"><img width="597" alt="스크린샷 2021-08-04 오후 9 58 16" src="https://user-images.githubusercontent.com/87232411/128187634-0adc49ac-2880-412a-9ab8-3a68e100ea94.png"><img width="600" alt="스크린샷 2021-08-04 오후 9 58 44" src="https://user-images.githubusercontent.com/87232411/128187639-d9422701-46f2-480b-a821-3148203c7f42.png"><img width="594" alt="스크린샷 2021-08-04 오후 9 59 01" src="https://user-images.githubusercontent.com/87232411/128187641-23891b5f-6c3e-4189-8dfb-ac69184ba207.png"><img width="592" alt="스크린샷 2021-08-04 오후 10 01 51" src="https://user-images.githubusercontent.com/87232411/128187650-6dc7725a-d0f3-4862-87f5-ee8bb2897b61.png"><img width="585" alt="스크린샷 2021-08-04 오후 10 02 03" src="https://user-images.githubusercontent.com/87232411/128187652-5bf6648a-7e7f-4115-a3c7-c4f5929865e6.png"><img width="595" alt="스크린샷 2021-08-04 오후 10 02 33" src="https://user-images.githubusercontent.com/87232411/128187655-7a9696b0-bc26-40ee-858b-fb1d9509011e.png"><h3 id="Wordpress-v5-8-설치"><a href="#Wordpress-v5-8-설치" class="headerlink" title="Wordpress v5.8 설치"></a>Wordpress v5.8 설치</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 다운로드 (둘 중 아무거나)</span><br>wget https://ko.wordpress.org/wordpress-latest-ko_KR.zip<br>wget https://ko.wordpress.org/wordpress-5.8-ko_KR.zip<br><br><span class="hljs-comment"># 압축 풀기</span><br>unzip wordpress-latest-ko_KR.zip<br><br><span class="hljs-comment"># wp-config.php 파일 복사</span><br><span class="hljs-built_in">cp</span> wordpress/wp-config-sample.php wordpress/wp-config.php<br><br><span class="hljs-comment"># wp-config.php 파일에 db 접속을 위한 정보 입력</span><br>sed -i <span class="hljs-string">&quot;s/database_name_here/wordpressdb/g&quot;</span> wordpress/wp-config.php<br>sed -i <span class="hljs-string">&quot;s/username_here/root/g&quot;</span> wordpress/wp-config.php<br>sed -i <span class="hljs-string">&quot;s/password_here/qwe123/g&quot;</span> wordpress/wp-config.php<br><br><span class="hljs-comment"># wp-config.php 파일에 메모리 상향 설정</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOT&gt;&gt; wordpress/wp-config.php</span><br><span class="hljs-string">define(&#x27;WP_MEMORY_LIMIT&#x27;, &#x27;256M&#x27;);</span><br><span class="hljs-string">EOT</span><br><br><span class="hljs-comment"># 압축 푼 wordpress 파일을 웹 디렉터리에 복사</span><br><span class="hljs-built_in">cp</span> -r wordpress/* /var/www/html/<br><br><span class="hljs-comment"># 사용자와 권한 설정</span><br><span class="hljs-built_in">chown</span> -R apache /var/www<br><span class="hljs-built_in">chgrp</span> -R apache /var/www<br><span class="hljs-built_in">chmod</span> 2775 /var/www<br>find /var/www -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">chmod</span> 2775 &#123;&#125; \;<br>find /var/www -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">chmod</span> 0664 &#123;&#125; \;<br><br><span class="hljs-comment"># 서비스 재시작</span><br>systemctl restart httpd<br></code></pre></td></tr></table></figure><img width="597" alt="스크린샷 2021-08-04 오후 10 02 52" src="https://user-images.githubusercontent.com/87232411/128187657-b7ce35b6-33e2-4ad8-8c5f-563314e7286e.png"><img width="561" alt="스크린샷 2021-08-04 오후 10 04 27" src="https://user-images.githubusercontent.com/87232411/128187658-caecc254-761c-4caa-b532-3d7b1b86b173.png"><img width="596" alt="스크린샷 2021-08-04 오후 10 04 40" src="https://user-images.githubusercontent.com/87232411/128187661-c9e0220a-31c2-4e52-a1d2-31083c912f3f.png"><img width="439" alt="스크린샷 2021-08-04 오후 10 04 52" src="https://user-images.githubusercontent.com/87232411/128187662-de257572-69d4-4a61-b0c9-7c14f9aa3b64.png"><img width="487" alt="스크린샷 2021-08-04 오후 10 05 42" src="https://user-images.githubusercontent.com/87232411/128187663-76ba7f41-8446-4173-910b-b4b92766c21c.png"><img width="372" alt="스크린샷 2021-08-04 오후 10 06 25" src="https://user-images.githubusercontent.com/87232411/128187671-7039fd82-1987-4a46-a0cd-e72558161cdb.png"><h3 id="Wordpress-웹-접속"><a href="#Wordpress-웹-접속" class="headerlink" title="Wordpress 웹 접속"></a>Wordpress 웹 접속</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">http://EC2_PublicIP/<br></code></pre></td></tr></table></figure><p>Wordpress 사이트가 만들어졌다 ㅎㅎ<br><img width="1365" alt="스크린샷 2021-08-04 오후 10 06 51" src="https://user-images.githubusercontent.com/87232411/128187672-17657319-cd26-4492-8e7e-18077cc24adc.png"></p><p>관리자 정보를 입력해준다 -&gt; <code>워드프레스 설치</code> 클릭<br><img width="828" alt="스크린샷 2021-08-04 오후 10 07 47" src="https://user-images.githubusercontent.com/87232411/128187682-0200a217-ab7a-4f32-902f-ad11f65fb35c.png"></p><p>로그인을 해준다<br><img width="458" alt="스크린샷 2021-08-04 오후 10 07 59" src="https://user-images.githubusercontent.com/87232411/128187684-fd5b6190-592b-47f6-8651-06199e342e8c.png"></p><p>짜쟌<br><img width="1436" alt="스크린샷 2021-08-04 오후 10 08 15" src="https://user-images.githubusercontent.com/87232411/128187688-1729847f-f655-4dff-aa43-de5ccdca5510.png"></p><p>첫 글을 써보자<br><img width="207" alt="스크린샷 2021-08-04 오후 10 08 27" src="https://user-images.githubusercontent.com/87232411/128187693-eac0bf86-3bfd-4bcf-8407-075d28c4e56f.png"></p><p>쨔쟌<br><img width="1432" alt="스크린샷 2021-08-04 오후 10 09 04" src="https://user-images.githubusercontent.com/87232411/128187694-a4d77e6d-1c1e-4857-9735-7b894d63a4ab.png"></p><p>일딴 게시물을 아무거나 작성하자 (웃긴 사진 넣을려다가 저작권 때문에 포오기이 …)<br><img width="990" alt="스크린샷 2021-08-04 오후 10 09 43" src="https://user-images.githubusercontent.com/87232411/128187699-e78e254c-3c8b-4b32-8eef-91a4e60e457e.png"></p><p>다 작성 후 -&gt; <code>공개</code> 클릭<br><img width="131" alt="스크린샷 2021-08-04 오후 10 09 48" src="https://user-images.githubusercontent.com/87232411/128187701-298938c6-22b6-4083-a5b1-be608fe4724a.png"></p><p><code>공개</code> 클릭<br><img width="278" alt="스크린샷 2021-08-04 오후 10 09 53" src="https://user-images.githubusercontent.com/87232411/128187704-73e6fdef-96f5-4bf3-8580-014f4032aa27.png"></p><p><code>글 보기</code> 클릭<br><img width="267" alt="스크린샷 2021-08-04 오후 10 09 59" src="https://user-images.githubusercontent.com/87232411/128187705-09b62d29-9932-4354-b7a9-991242a33d2e.png"></p><p>오 글이 작성되었다<br><img width="1433" alt="스크린샷 2021-08-04 오후 10 10 13" src="https://user-images.githubusercontent.com/87232411/128187707-6ba11b84-5b03-457f-925b-b1985caf83f3.png"></p><h3 id="외모-변환"><a href="#외모-변환" class="headerlink" title="외모 변환"></a>외모 변환</h3><p><code>외모</code> -&gt; <code>테마</code> 클릭<br><img width="336" alt="스크린샷 2021-08-04 오후 10 10 34" src="https://user-images.githubusercontent.com/87232411/128187709-dd9b9799-256f-48c3-96e5-af854b9a7f85.png"></p><p><code>새로 추가</code> 클릭<br><img width="262" alt="스크린샷 2021-08-04 오후 10 11 14" src="https://user-images.githubusercontent.com/87232411/128187712-6f3abf15-be2a-493c-ae5b-04b4a440434e.png"></p><p><code>sydney</code> 검색<br><img width="1271" alt="스크린샷 2021-08-04 오후 10 11 31" src="https://user-images.githubusercontent.com/87232411/128187713-89793214-caf3-4370-90b9-eb7e1fb9d079.png"></p><p><code>설치</code> 클릭<br><img width="398" alt="스크린샷 2021-08-04 오후 10 11 42" src="https://user-images.githubusercontent.com/87232411/128187720-a4cf52b5-63a3-4ce9-bdd6-d679624f867e.png"></p><p><code>활성화</code> 클릭<br><img width="402" alt="스크린샷 2021-08-04 오후 10 12 04" src="https://user-images.githubusercontent.com/87232411/128187724-91ad3b14-12d4-404a-a725-c5c09c7d466b.png"></p><p>쨘 테마가 바뀌었다<br><img width="1437" alt="스크린샷 2021-08-04 오후 10 12 44" src="https://user-images.githubusercontent.com/87232411/128187734-e5b13fec-84d5-43df-96cd-caba4c89648c.png"></p><h3 id="옵션-외모-변환-2"><a href="#옵션-외모-변환-2" class="headerlink" title="옵션) 외모 변환 2"></a>옵션) 외모 변환 2</h3><p>Starter Sites 클릭<br><img width="685" alt="스크린샷 2021-08-04 오후 10 12 17" src="https://user-images.githubusercontent.com/87232411/128187728-212daba5-4da5-4206-a07e-6503dcf0475f.png"></p><p><code>Import</code> 클릭<br><img width="440" alt="스크린샷 2021-08-04 오후 10 12 56" src="https://user-images.githubusercontent.com/87232411/128187741-e5e43844-0ddc-4a1a-ad62-10e781f88e71.png"></p><p><code>Import</code> 클릭<br><img width="212" alt="스크린샷 2021-08-04 오후 10 13 01" src="https://user-images.githubusercontent.com/87232411/128187748-5e5c05cf-04d6-4da9-8e90-bf07a77bf035.png"></p><p><code>View Site</code> 클릭<br><img width="312" alt="스크린샷 2021-08-04 오후 10 16 10" src="https://user-images.githubusercontent.com/87232411/128187750-ee16bb51-98a6-4278-aac2-b2340141e673.png"></p><p>쨘 더 예뻐졌다<br><img width="1435" alt="스크린샷 2021-08-04 오후 10 16 25" src="https://user-images.githubusercontent.com/87232411/128187752-edf97f94-2baf-453e-b576-3907c7f453fc.png"></p><br/><br/><br/><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 9주차-1 Wordpress &amp; WooCommerce</title>
    <link href="/2021/08/04/2021-08-04-AFOS-1/"/>
    <url>/2021/08/04/2021-08-04-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h2 id="Wordpress란"><a href="#Wordpress란" class="headerlink" title="Wordpress란?"></a>Wordpress란?</h2><p>누구나 손쉽게 블로그, 웹사이트, 쇼핑몰 들 을 구축하는 <strong>웹사이트 제작 도구</strong>이다</p><p>워드프레스는 수많은 써드파티 테마와 플러그인 제작자들에 의해 제공되는 무료, 유로 플러그인을 설치해 사이트 디자인을 바꾸고 기능을 확장시키는 것이 큰 장점이다</p><ul><li>Free &amp; Open Source</li><li>Blogging Tool &amp; CMS(Content Management System, 콘텐츠 플랫폼&#x2F;시스템) &amp; E-COMMERCE</li><li>PHP and MySQL</li></ul><img width=300 src="/css/images/WordPress.png"><br/><br/><h3 id="워드프레스-구성-환경"><a href="#워드프레스-구성-환경" class="headerlink" title="워드프레스 구성 환경"></a>워드프레스 구성 환경</h3><p><strong>1대 서버에 모든 서비스 구성 - 1대의 인스턴스에 Web + php + DB 구성</strong></p><p><strong>2대 EC2로 구성 - Web&#x2F;PHP 인스턴스 + MariaDB 인스턴스 구성</strong></p><p><strong>1대 EC2(EFS)와 AWS RDS(DB)로 구성 - Web&#x2F;PHP 인스턴스(EFS) + AWS RDS(DB) 구성</strong><br><br/><br><br/></p><h2 id="WooCommerce"><a href="#WooCommerce" class="headerlink" title="WooCommerce"></a>WooCommerce</h2><p>우커머스는 세계에서 가장 많이 사용하는 <strong>워드프레스 쇼핑몰 결제 플러그인</strong>이다<br>극내 쇼핑몰의 다양한 결제 플러그인도 우커머스 플러그인을 기반으로 제작되고 있다<br><br/></p><img width=300 src="/css/images/woocommerce.svg"><br/><br/><br/><hr/><p><strong>참고 자료: AFOS[2기] 노션 내용</strong></p><p><strong>사진 출처: <a href="https://woocommerce.com/">https://woocommerce.com/</a>, <a href="https://wordpress.org/about/logos/">https://wordpress.org/about/logos/</a></strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 8주차-2 EC2 Auto Scaling 구성 실습</title>
    <link href="/2021/07/28/2021-07-28-AFOS-2/"/>
    <url>/2021/07/28/2021-07-28-AFOS-2/</url>
    
    <content type="html"><![CDATA[<h2 id="CloudFormation-스택-생성"><a href="#CloudFormation-스택-생성" class="headerlink" title="CloudFormation 스택 생성"></a>CloudFormation 스택 생성</h2><p><a href="https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=AutoScalingLab&templateURL=https:%2F%2Fcloudneta-book.s3.ap-northeast-2.amazonaws.com%2Fchapter5%2Fautoscaling-AFOS.yaml">https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=AutoScalingLab&amp;templateURL=https:%2F%2Fcloudneta-book.s3.ap-northeast-2.amazonaws.com%2Fchapter5%2Fautoscaling-AFOS.yaml</a></p><p><code>다음</code> 클릭<br><img width="1032" alt="스크린샷 2021-07-28 오후 10 02 04" src="https://user-images.githubusercontent.com/87232411/127346525-ac77a844-2f6c-4195-a8b7-535d97466ca4.png"></p><p>키 선택 후 <code>다음</code> 클릭<br><img width="1040" alt="스크린샷 2021-07-28 오후 10 02 15" src="https://user-images.githubusercontent.com/87232411/127346533-2e31b8eb-132a-4677-9c67-b0087f936fe6.png"></p><p>기본 값으로 둔 후 <code>다음</code> 클릭<br><img width="259" alt="스크린샷 2021-07-28 오후 10 02 26" src="https://user-images.githubusercontent.com/87232411/127346537-af87e995-8fc7-4f37-9b09-ec2379b05148.png"></p><p>파란 박스 체크 후 <code>스택 생성</code> 클릭<br><img width="1067" alt="스크린샷 2021-07-28 오후 10 02 35" src="https://user-images.githubusercontent.com/87232411/127346540-42f2ee0d-739e-4533-a53a-211519e9dad2.png"></p><h2 id="기본-환경-검증-MyEC2-SSH-접속"><a href="#기본-환경-검증-MyEC2-SSH-접속" class="headerlink" title="기본 환경 검증 - MyEC2 SSH 접속"></a>기본 환경 검증 - MyEC2 SSH 접속</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># AWS CLI 확인</span><br>aws --version<br>aws ec2 describe-instances<br>aws ec2 describe-instances --query <span class="hljs-string">&#x27;Reservations[*].Instances[*].[InstanceId, State.Name, PrivateIpAddress]&#x27;</span> --output text<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> aws ec2 describe-instances --query <span class="hljs-string">&#x27;Reservations[*].Instances[*].[InstanceId, State.Name, PrivateIpAddress]&#x27;</span> --output text; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># ApachBench 확인</span><br>ab -V<br><br><span class="hljs-comment"># ALB DNS 이름 변수 지정</span><br>ALB=ALB-TEST-1714841830.ap-northeast-2.elb.amazonaws.com<br>dig +short <span class="hljs-variable">$ALB</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$ALB</span> --silent --connect-timeout 1; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;---[AutoScaling]---&quot;</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><img width="670" alt="스크린샷 2021-07-28 오후 10 09 56" src="https://user-images.githubusercontent.com/87232411/127346547-b0704acc-c268-4023-923d-2aa138e40435.png"><img width="604" alt="스크린샷 2021-07-28 오후 10 11 51" src="https://user-images.githubusercontent.com/87232411/127346549-a4dd5da8-1647-4626-9290-02dd9c9a82d7.png"><img width="599" alt="스크린샷 2021-07-28 오후 10 12 07" src="https://user-images.githubusercontent.com/87232411/127346552-2aedd53e-91d4-4817-b02d-40686ecff32d.png"><img width="577" alt="스크린샷 2021-07-28 오후 10 13 17" src="https://user-images.githubusercontent.com/87232411/127346553-7aa25b2b-b00c-4ff2-a9c6-3618d8619685.png"><img width="605" alt="스크린샷 2021-07-28 오후 10 13 42" src="https://user-images.githubusercontent.com/87232411/127346557-775a7b37-69f8-4fd6-b549-8c16752ff946.png"><p>EC2-&gt;시작 템플릿 -&gt; <code>시작 템플릿 생성</code> 클릭<br><img width="225" alt="스크린샷 2021-07-28 오후 10 14 22" src="https://user-images.githubusercontent.com/87232411/127346559-2cffb422-b28c-4a04-970f-54a4c77603cb.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">시작 템플릿 이름 : EC2LaunchTemplate<br>설명 : EC2 Auto Scaling v1.0<br>Auto Scaling 지침 : 체크<br>AMI : Amazon Linux 2 AMI(HVM), SSD Volume Type - 아키텍처 : 64비트(x86)<br>인스턴스 유형 : t2.micro<br>키 페어 : (각자 자신의 SSH 키페어 선택)<br>네트워킹 플랫폼 : VPC<br>보안 그룹 : <span class="hljs-comment">###-VPC1SG-### 포함된것 선택</span><br>리소스 태그 : 키(Lab) , 값(ASLab)<br>고급 세부 정보 ← 클릭<br>- 세부 CloudWatch 모니터링 : 활성화<br>- 사용자 데이터 : 아래 내용 복붙!<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>RZAZ=`curl http://169.254.169.254/latest/meta-data/placement/availability-zone-id`<br>IID=`curl 169.254.169.254/latest/meta-data/instance-id`<br>LIP=`curl 169.254.169.254/latest/meta-data/local-ipv4`<br>amazon-linux-extras install -y php7.2<br>yum install httpd htop tmux -y<br>systemctl start httpd &amp;&amp; systemctl <span class="hljs-built_in">enable</span> httpd<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;&lt;h1&gt;RegionAz(<span class="hljs-variable">$RZAZ</span>) : Instance ID(<span class="hljs-variable">$IID</span>) : Private IP(<span class="hljs-variable">$LIP</span>) : Web Server&lt;/h1&gt;&quot;</span> &gt; /var/www/html/index.html<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;1&quot;</span> &gt; /var/www/html/HealthCheck.txt<br>curl -o /var/www/html/load.php https://cloudneta-book.s3.ap-northeast-2.amazonaws.com/chapter5/load.php --silent<br>curl -o /var/www/html/cpuload.php https://cloudneta-book.s3.ap-northeast-2.amazonaws.com/chapter5/cpuload-aws.php --silent<br></code></pre></td></tr></table></figure><img width="883" alt="스크린샷 2021-07-28 오후 10 15 14" src="https://user-images.githubusercontent.com/87232411/127346562-f068a7b0-a9dc-4346-b336-93aa1c147828.png"><img width="846" alt="스크린샷 2021-07-28 오후 10 15 21" src="https://user-images.githubusercontent.com/87232411/127346565-900e6564-91e2-4302-b06a-7e9d33fbb5d4.png"><img width="846" alt="스크린샷 2021-07-28 오후 10 15 44" src="https://user-images.githubusercontent.com/87232411/127346570-a3a93571-a50f-4946-bf78-d937d766bbf6.png"><img width="845" alt="스크린샷 2021-07-28 오후 10 16 09" src="https://user-images.githubusercontent.com/87232411/127346573-97f1369f-a6ff-4792-a8bd-417b0d9964b4.png"><img width="2" alt="스크린샷 2021-07-28 오후 10 16 39" src="https://user-images.githubusercontent.com/87232411/127346578-3ffe695a-643e-4fc7-9f01-ce9cfdf7c77d.png"><img width="838" alt="스크린샷 2021-07-28 오후 10 16 46" src="https://user-images.githubusercontent.com/87232411/127346582-0ba44fab-c77d-4d98-9721-c10b926c212b.png"><img width="831" alt="스크린샷 2021-07-28 오후 10 16 51" src="https://user-images.githubusercontent.com/87232411/127346584-2d7a7a4a-cf05-4ed5-94e1-c9089e4f626f.png"><img width="837" alt="스크린샷 2021-07-28 오후 10 17 14" src="https://user-images.githubusercontent.com/87232411/127346587-dbab3a9f-5fe4-4657-9d1e-1eef9849d278.png"><h2 id="시작-템플릿-구성"><a href="#시작-템플릿-구성" class="headerlink" title="시작 템플릿 구성"></a>시작 템플릿 구성</h2><p>생성돤 시작 템플릿 -&gt; <code>Auto Scaling 그룹 생성</code> 클릭<br><img width="1047" alt="스크린샷 2021-07-28 오후 10 17 45" src="https://user-images.githubusercontent.com/87232411/127346591-7dc80ffe-d4c4-4c7d-a135-efa44c61dae4.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Auto Scaling 그룹 이름 : FirstEC2AutoScalingGroup<br>시작 템플릿 : EC2LaunchTemplate<br></code></pre></td></tr></table></figure><img width="850" alt="스크린샷 2021-07-28 오후 10 18 02" src="https://user-images.githubusercontent.com/87232411/127346594-3601bc51-6bf4-49cc-a6e8-918ec0aa0ccf.png"><img width="215" alt="스크린샷 2021-07-28 오후 10 18 09" src="https://user-images.githubusercontent.com/87232411/127346595-0d41fb02-4b00-4785-b5d2-e23ca72ffdcb.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">인스턴스 구매 옵션 : 시작 템플릿 준수<br>네트워크 - VPC : VPC1<br>네트워크 - 서브넷 : VPC1-Public-SN-1 , VPC1-Public-SN-2<br></code></pre></td></tr></table></figure><img width="845" alt="스크린샷 2021-07-28 오후 10 18 29" src="https://user-images.githubusercontent.com/87232411/127346596-9d233cc6-2b83-4b7d-948b-8dd08802564c.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">로드 밸런싱 : 기존 로드 밸런서에 연결<br>로그 밸런서 대상 그룹에서 선택 : 선택<br>기존 로드 밸런서 대상 그룹 : ALB-TG<br>상태 확인 유형 : ELB (Check)<br>상태 확인 유예 기간 : 60초<br>모니터링 - CloudWatch 내에서 그룹 지표 수집 활성화 : 체크<br></code></pre></td></tr></table></figure><img width="856" alt="스크린샷 2021-07-28 오후 10 18 50" src="https://user-images.githubusercontent.com/87232411/127346597-0dcdb76c-0258-40d2-8d44-213561469a06.png"><img width="844" alt="스크린샷 2021-07-28 오후 10 19 05" src="https://user-images.githubusercontent.com/87232411/127346601-75a34a0a-1ce0-4c9b-abaf-29cd73eabc6b.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">원하는 용량 : 1<br>최소 용량 : 1<br>최대 용량 : 4<br>조정 정책 : 대상 추척 조정 정책<br>조정 정책 이름 : Scale Out Policy<br>대상 값 : 80 → 3분 동안 3번 연속 CPU 80% 경우(1분 마다 기록)<br>인스턴스 요구 사항 : 60초 → 지표에 포함하기 전 워밍업 시간(초)<br>확대 정책만 생성하려면 축소 비활성화 : Check → 축소는 직접 정책 추가 예정<br>인스턴스 축소 보호 활성화 : UnCheck<br></code></pre></td></tr></table></figure><img width="876" alt="스크린샷 2021-07-28 오후 10 19 27" src="https://user-images.githubusercontent.com/87232411/127346605-43d3f0d5-bf4b-47a9-a0c6-087a4bfc5067.png"><img width="869" alt="스크린샷 2021-07-28 오후 10 20 22" src="https://user-images.githubusercontent.com/87232411/127346610-7560c21d-66d3-4300-a6e2-276baed6709a.png"><img width="847" alt="스크린샷 2021-07-28 오후 10 20 29" src="https://user-images.githubusercontent.com/87232411/127346612-ce25bc91-737e-4d07-8f11-17d77a882a5a.png"><p><code>다음</code> 클릭<br><img width="514" alt="스크린샷 2021-07-28 오후 10 20 41" src="https://user-images.githubusercontent.com/87232411/127346616-6b2bec11-6907-4aa1-9db2-efffa249e2ac.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">태그 : 키(Name) , 값(WebServers)<br></code></pre></td></tr></table></figure><p><code> 다음</code> 클릭<br><img width="867" alt="스크린샷 2021-07-28 오후 10 21 11" src="https://user-images.githubusercontent.com/87232411/127346617-64c30e1f-a0b9-41f4-a20c-748c31a32cfa.png"></p><p><code>Auto Scaling 그룹 생성</code> 클릭<br><img width="339" alt="스크린샷 2021-07-28 오후 10 21 20" src="https://user-images.githubusercontent.com/87232411/127346623-b34dc1e4-82a4-495d-8da4-dcdcf2c938a2.png"></p><p>짜쟌<br><img width="778" alt="스크린샷 2021-07-28 오후 10 21 31" src="https://user-images.githubusercontent.com/87232411/127346626-41b2388f-455e-447a-83a8-ae7f202800f6.png"></p><p>생성된 Auto Scaling 그룹 클릭 → 세부 정보 → 하단 고급 구성 편집 클릭<br><img width="419" alt="스크린샷 2021-07-28 오후 10 21 45" src="https://user-images.githubusercontent.com/87232411/127346628-291c2ae9-b771-4653-9142-7bc3de7fd03e.png"><br><img width="1110" alt="스크린샷 2021-07-28 오후 10 21 53" src="https://user-images.githubusercontent.com/87232411/127346632-d48457b8-70a2-4676-9c20-8ddc675f8bc2.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">종료 정책 : Newest Instance → 기본 Default 는 제거<br>기본 휴지 기간 : 180초<br></code></pre></td></tr></table></figure><p><code>업데이트</code> 클릭<br><img width="842" alt="스크린샷 2021-07-28 오후 10 22 26" src="https://user-images.githubusercontent.com/87232411/127346633-4bf9ed69-0065-4ff7-a439-4467de9935ba.png"></p><h2 id="축소-정책-추가"><a href="#축소-정책-추가" class="headerlink" title="축소 정책 추가"></a>축소 정책 추가</h2><p>생성된 Auto Scaling 그룹 클릭 → 자동 조정 → <code>Create dynamic scaling policy </code> 클릭<br><img width="1063" alt="스크린샷 2021-07-28 오후 10 23 12" src="https://user-images.githubusercontent.com/87232411/127346638-f681d0b4-4809-42c5-a886-26a599a8e13d.png"></p><p>정책 유형(단순 조정) 선택 후 CloudWatch 경보 생성 클릭<br><img width="551" alt="스크린샷 2021-07-28 오후 10 23 43" src="https://user-images.githubusercontent.com/87232411/127346642-84074763-bf7f-459d-9f3a-9a11fb9813f9.png"></p><p><code>지표 선택</code> 클릭<br><img width="493" alt="스크린샷 2021-07-28 오후 10 23 58" src="https://user-images.githubusercontent.com/87232411/127346647-74269bee-9c44-4815-951c-f72eba3c335e.png"></p><p><code>EC2</code> 클릭<br><img width="293" alt="스크린샷 2021-07-28 오후 10 24 12" src="https://user-images.githubusercontent.com/87232411/127346651-b86e11c6-7b58-4c05-98d5-beaeda10c541.png"></p><p><code>Auto Scaling 그룹별</code> 클릭<br><img width="303" alt="스크린샷 2021-07-28 오후 10 24 19" src="https://user-images.githubusercontent.com/87232411/127346654-6cbd22d5-58b7-440a-8415-ce23bd6e9876.png"></p><p><code>CPUUtilization</code> 클릭 -&gt; <code>지표 선택</code> 클릭<br><img width="1225" alt="스크린샷 2021-07-28 오후 10 24 41" src="https://user-images.githubusercontent.com/87232411/127346656-e51649fd-8915-47b7-a4dd-84042ef0faf4.png"></p><p><code>기간: 1분</code> 클릭<br><img width="809" alt="스크린샷 2021-07-28 오후 10 24 55" src="https://user-images.githubusercontent.com/87232411/127346663-7c37517a-160b-42ef-a17d-6bf458380d94.png"></p><p>정적 -&gt; 보다 작음 -&gt; …보다(10) -&gt; 경보를 알릴 데이터 포인트 (2&#x2F;2) -&gt; <code>다음</code> 클릭<br><img width="807" alt="스크린샷 2021-07-28 오후 10 25 28" src="https://user-images.githubusercontent.com/87232411/127346676-268276c6-bc44-41ca-929f-a44bf762a746.png"></p><p>경보 상태 트리거 제거 -&gt; <code>다음</code> 클릭<br><img width="828" alt="스크린샷 2021-07-28 오후 10 25 47" src="https://user-images.githubusercontent.com/87232411/127346679-3690d25b-d7d1-4571-a4b5-d12e4943a2a3.png"><br><img width="237" alt="스크린샷 2021-07-28 오후 10 25 53" src="https://user-images.githubusercontent.com/87232411/127346682-3eeec42e-5b75-44d0-a47b-2a61b9f063a0.png"></p><p>경보 이름: ASG-CpuLow -&gt; <code>다음</code> 클릭<br><img width="808" alt="스크린샷 2021-07-28 오후 10 26 10" src="https://user-images.githubusercontent.com/87232411/127346685-b43b010b-e85b-45a9-a2c6-598e4a0d9626.png"></p><p><code>경보 생성</code> 클릭<br><img width="264" alt="스크린샷 2021-07-28 오후 10 26 18" src="https://user-images.githubusercontent.com/87232411/127346689-12dce6dd-dbbd-4a50-aa23-f9941e2765a2.png"></p><p>경보가 만들어졌습니다<br><img width="434" alt="스크린샷 2021-07-28 오후 10 26 32" src="https://user-images.githubusercontent.com/87232411/127346692-0bdd072a-e381-4674-b92b-bb4a2bd1d3dc.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">정책 유형: 단순 조정<br>조정 정책 이름: Scale In Policy<br>CloudWatch: ASG-CpuLow<br>작업 수행: 제거, 1(용량 단위)<br>그런 다음 대기: 60<br></code></pre></td></tr></table></figure><p>생성 클릭<br><img width="849" alt="스크린샷 2021-07-28 오후 10 26 58" src="https://user-images.githubusercontent.com/87232411/127346694-098513bf-43e6-41f0-bf3f-8fb60d56f187.png"></p><p>CloudWatch 경보 2개를 대시보드에 추가<br><img width="1123" alt="스크린샷 2021-07-28 오후 10 27 22" src="https://user-images.githubusercontent.com/87232411/127346703-ca1ca3f4-cb89-4a5c-bdb9-e44a45237fb9.png"></p><p>이름 마음대로 -&gt; 기본 값 -&gt; <code>대시보드에 추가</code> 클릭<br><img width="956" alt="스크린샷 2021-07-28 오후 10 28 00" src="https://user-images.githubusercontent.com/87232411/127346708-99954eee-f0b1-49c0-89d5-0be5a40748a0.png"></p><p><code>위젯 추가</code> 클릭<br><img width="388" alt="스크린샷 2021-07-28 오후 10 31 18" src="https://user-images.githubusercontent.com/87232411/127346712-327d9c5b-61ec-45eb-af2c-58aefb367aba.png"></p><p><code>행</code> 클릭 -&gt; <code>다음</code> 클릭<br><img width="911" alt="스크린샷 2021-07-28 오후 10 31 24" src="https://user-images.githubusercontent.com/87232411/127346715-28094844-5148-4961-a03b-76539a3b44af.png"><br>-&gt; <code>지표</code> 클릭 -&gt; <code>구성</code> 클릭<br><img width="909" alt="스크린샷 2021-07-28 오후 10 31 30" src="https://user-images.githubusercontent.com/87232411/127346719-89266004-fcff-49e5-a4af-1b280a92e7b1.png"></p><p><code>GroupInServiceInstances</code> 검색 후 선택<br><img width="1378" alt="스크린샷 2021-07-28 오후 10 31 59" src="https://user-images.githubusercontent.com/87232411/127346720-030f6769-ff88-4c26-a35d-538f12a70dc7.png"></p><p>통계: 평균, 기간: 1분 설정 후 -&gt; <code>위젯 생성</code> 클릭<br><img width="537" alt="스크린샷 2021-07-28 오후 10 32 52" src="https://user-images.githubusercontent.com/87232411/127346724-40e2e4f4-cb9a-413d-bc9c-d763e21cbea0.png"></p><p>최종 모습<br><img width="1180" alt="스크린샷 2021-07-28 오후 10 33 44" src="https://user-images.githubusercontent.com/87232411/127346726-cba2541c-cc44-4ec8-9599-db4a1d03c6da.png"></p><h2 id="EC2-인스턴스에-CPU-부하-발생-및-Auto-Scaling-확인"><a href="#EC2-인스턴스에-CPU-부하-발생-및-Auto-Scaling-확인" class="headerlink" title="EC2 인스턴스에 CPU 부하 발생 및 Auto Scaling 확인"></a>EC2 인스턴스에 CPU 부하 발생 및 Auto Scaling 확인</h2><p>배포된 Web EC2. 접속</p><p>아이피 주소를 웹 창에 입력하면 인스턴스 정보가 뜨는 걸 알 수 있다<br><img width="1376" alt="스크린샷 2021-07-29 오전 12 49 59" src="https://user-images.githubusercontent.com/87232411/127360368-5abf6bfd-8158-443e-97bd-ddf15e26d726.png"></p><p>인스턴스가 아직 1개이다</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$ALB</span> --silent --connect-timeout 1; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;---[AutoScaling]---&quot;</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> aws ec2 describe-instances --filter <span class="hljs-string">&quot;Name=tag:Lab,Values=ASLab&quot;</span> --query <span class="hljs-string">&#x27;Reservations[*].Instances[*].[InstanceId, State.Name, PrivateIpAddress]&#x27;</span> --output text; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><img width="1036" alt="스크린샷 2021-07-29 오전 12 54 29" src="https://user-images.githubusercontent.com/87232411/127360378-6f36369c-511a-451b-b8e9-3d9cf6c41a73.png"><p>Auto Scaling 그룹 -&gt; 작업 기록 -&gt; 성공적으로 런치된 걸 볼 수 있다.<br><img width="963" alt="스크린샷 2021-07-29 오전 12 55 40" src="https://user-images.githubusercontent.com/87232411/127360388-22a8208e-318c-43b3-afed-944bf7faf5fd.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">## (심화 옵션) Client IP 확인</span><br>vim /etc/httpd/conf/httpd.conf<br>196 <span class="hljs-built_in">shift</span>+G<br>%&#123;X-Forwarded-For&#125;i<br>systemctl reload httpd<br><span class="hljs-built_in">tail</span> -f /var/log/httpd/access_log |grep -v <span class="hljs-string">&quot;ELB-HealthChecker/2.0&quot;</span><br></code></pre></td></tr></table></figure><img width="466" alt="스크린샷 2021-07-29 오전 12 59 11" src="https://user-images.githubusercontent.com/87232411/127360401-8efb1442-95d2-4cf8-9274-c6b3bcd92685.png"><img width="309" alt="스크린샷 2021-07-29 오전 12 58 47" src="https://user-images.githubusercontent.com/87232411/127360395-628065f1-8577-46bd-8473-cc7f3880ab77.png"><p><code>curl $ALB</code> 를 쳤을 때는 CPU 사용량이 적은 걸 알 수 있다.<br><img width="1155" alt="스크린샷 2021-07-29 오전 1 02 39" src="https://user-images.githubusercontent.com/87232411/127360404-46f6f1ef-8c0b-40e2-a9de-bb986b5513b5.png"></p><h2 id="MyEC2-SSH-접속-⇒-ab-부하발생-→-4분-1대-증가-→-ab-off-ctrl-c-→-for-접속으로-부하분산-확인"><a href="#MyEC2-SSH-접속-⇒-ab-부하발생-→-4분-1대-증가-→-ab-off-ctrl-c-→-for-접속으로-부하분산-확인" class="headerlink" title="MyEC2 SSH 접속 ⇒ ab 부하발생 → 4분(1대 증가) → ab off(ctrl+c) → for 접속으로 부하분산 확인"></a>MyEC2 SSH 접속 ⇒ ab 부하발생 → 4분(1대 증가) → ab off(ctrl+c) → for 접속으로 부하분산 확인</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 접속 시 마다 CPU 부하 발생</span><br>curl <span class="hljs-variable">$ALB</span>/load.php;<span class="hljs-built_in">echo</span><br></code></pre></td></tr></table></figure><img width="478" alt="스크린샷 2021-07-29 오전 1 03 20" src="https://user-images.githubusercontent.com/87232411/127360412-67bb48d5-8e7e-4887-ade9-a8b7a262e4f9.png"><p>갑자기 CPU 사용량이 올랐다가 내려가는 걸 볼 수 있다.<br><img width="223" alt="스크린샷 2021-07-29 오전 1 03 10" src="https://user-images.githubusercontent.com/87232411/127360411-6ea46fa4-2fba-4fb4-885d-93398a39eb69.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1개 요청(풀)로 총합 500번 요청 진행</span><br>ab -n 500 -c 1 http://<span class="hljs-variable">$ALB</span>/load.php<br></code></pre></td></tr></table></figure><p>CPU 사용량이 계속 증가한다<br><img width="349" alt="스크린샷 2021-07-29 오전 1 05 28" src="https://user-images.githubusercontent.com/87232411/127360417-5a37b067-6d22-4179-965a-7121225740eb.png"></p><p>ALBDNS 주소로 웹 접속 후 주소 뒤에 &#x2F;lcpuload.php 를 넣으면 CPU 사용량을 볼 수 있다.<br><img width="682" alt="스크린샷 2021-07-29 오전 1 06 53" src="https://user-images.githubusercontent.com/87232411/127360432-8eed1794-0a9c-4b5a-a091-ace8a029e921.png"></p><p>CloudWatch 경보 대시보드를 보면 계속해서 그래프가 증가하는 걸 볼 수 있다.<br><img width="740" alt="스크린샷 2021-07-29 오전 1 07 29" src="https://user-images.githubusercontent.com/87232411/127360436-9283490d-f7fe-4ee7-a382-a67860559644.png"></p><h2 id="실수"><a href="#실수" class="headerlink" title="실수"></a>실수</h2><p>GroupInServiceInstances 경보 -&gt; 그래프 옵션 -&gt; Y축 한도를 최소 0, 최대 4로 설정 후 확인<br><img width="567" alt="스크린샷 2021-07-29 오전 1 11 07" src="https://user-images.githubusercontent.com/87232411/127360438-a149cacd-a793-45d1-aef8-206403aaf9cb.png"><br><img width="736" alt="스크린샷 2021-07-29 오전 1 13 11" src="https://user-images.githubusercontent.com/87232411/127360441-82e06e7c-be4a-4d2a-bbbb-994d60092486.png"></p><p>확대 조정 정책 경보를 보면 계속 증가하면서 CPU 부하가 80%가 넘으니 경보를 울리는 걸 알 수 있다.<br><img width="754" alt="스크린샷 2021-07-29 오전 1 13 53" src="https://user-images.githubusercontent.com/87232411/127360445-5d2e1a1e-6082-46e4-a24d-7793065f2b9f.png"></p><img width="1" alt="스크린샷 2021-07-29 오전 1 17 37" src="https://user-images.githubusercontent.com/87232411/127360451-6544dd65-7661-4691-b1ef-cc258d53a9c0.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> aws ec2 describe-instances --filter <span class="hljs-string">&quot;Name=tag:Lab,Values=ASLab&quot;</span> --query <span class="hljs-string">&#x27;Reservations[*].Instances[*].[InstanceId, State.Name, PrivateIpAddress]&#x27;</span> --output text; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><p>전에는 인스턴스가 하나였는데 CPU 사용량 증가 이후 Auto Scaling 그룹 설정으로 3개로 증가했다.</p><img width="532" alt="스크린샷 2021-07-29 오전 1 17 46" src="https://user-images.githubusercontent.com/87232411/127360453-90733e5d-61bf-4700-8012-df77045ea7b9.png"><img width="888" alt="스크린샷 2021-07-29 오전 1 17 56" src="https://user-images.githubusercontent.com/87232411/127360459-87152bad-1044-4383-991b-c53bbbc9e20a.png"><p>CloudWatch 경보에서도 확인할 수 있다.<br><img width="1331" alt="스크린샷 2021-07-29 오전 1 18 11" src="https://user-images.githubusercontent.com/87232411/127360465-02a3d5ff-6fa2-4a27-ab65-2cb639837e54.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># EC2 증가 이후 증감 확인</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..100&#125;; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$ALB</span> --silent ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br></code></pre></td></tr></table></figure><img width="531" alt="스크린샷 2021-07-29 오전 1 18 58" src="https://user-images.githubusercontent.com/87232411/127360468-b089b18c-f4ab-4df7-8951-2d47cdcbb9a5.png"><p>이제 CPU 사용량을 0으로 하면<br><img width="206" alt="스크린샷 2021-07-29 오전 1 19 20" src="https://user-images.githubusercontent.com/87232411/127360470-9ee7a813-121a-491e-b3e8-45aa2fc08dc3.png">‘</p><p>축소 조정 정책 경보가 울린다<br><img width="730" alt="스크린샷 2021-07-29 오전 1 19 35" src="https://user-images.githubusercontent.com/87232411/127360473-58f66a29-fcb7-42f0-88f2-5bff87bc64d2.png"></p><p>인스턴스도 감소하는 걸 볼 수 있다.<br><img width="881" alt="스크린샷 2021-07-29 오전 1 21 21" src="https://user-images.githubusercontent.com/87232411/127360496-0261a0a5-6aab-4ffe-807c-78a1a71d1bf5.png"></p><p>EC2 -&gt; Auto Scaling 그룹 -&gt; 활동 -&gt; 작업 기록을 보면 기록이 남아있다.<br><img src="https://user-images.githubusercontent.com/87232411/127366192-1212cb03-a038-4fc3-917e-d9d1a4228f8f.png" alt="스크린샷 2021-07-29 오전 2 06 22"></p><h2 id="자원-삭제-중요"><a href="#자원-삭제-중요" class="headerlink" title="자원 삭제(중요!)"></a>자원 삭제(중요!)</h2><h3 id="CloudWatch-대시보드에-추가된-지표-Metric-삭제-→-대시보드-삭제"><a href="#CloudWatch-대시보드에-추가된-지표-Metric-삭제-→-대시보드-삭제" class="headerlink" title="CloudWatch (대시보드에 추가된 지표 Metric 삭제 → 대시보드 삭제)"></a>CloudWatch (대시보드에 추가된 지표 Metric 삭제 → 대시보드 삭제)</h3><h3 id="EC2-Auto-Scaling-Group-삭제"><a href="#EC2-Auto-Scaling-Group-삭제" class="headerlink" title="EC2 Auto Scaling Group 삭제"></a>EC2 Auto Scaling Group 삭제</h3><h3 id="EC2-시작-템플릿-Launch-Templates-삭제"><a href="#EC2-시작-템플릿-Launch-Templates-삭제" class="headerlink" title="EC2 시작 템플릿(Launch Templates) 삭제"></a>EC2 시작 템플릿(Launch Templates) 삭제</h3><h3 id="CloudFormation-템플릿-스택-삭제"><a href="#CloudFormation-템플릿-스택-삭제" class="headerlink" title="CloudFormation 템플릿 스택 삭제"></a>CloudFormation 템플릿 스택 삭제</h3><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 8주차-1 EC2 Auto Scaling</title>
    <link href="/2021/07/28/2021-07-28-AFOS-1/"/>
    <url>/2021/07/28/2021-07-28-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h2 id="AWS-EC2-Auto-Scaling-소개"><a href="#AWS-EC2-Auto-Scaling-소개" class="headerlink" title="AWS EC2 Auto Scaling 소개"></a>AWS EC2 Auto Scaling 소개</h2><p>EC2 Auto Scailng을 통해 애플리케이션의 로드를 처리할 수 있게 동적으로 EC2 인스턴스를 유지하도록 보장할 수 있다.</p><p><strong>Auto Scaling 그룹</strong>이라는 EC2 인스턴스 모음을 생성한다.</p><p>각 Auto Scaling 그룹의 최소 인스턴스 수를 지정할 수 있으며, Amazon EC2 Auto Scaling에서는 <strong>그룹의 크기가 이 값 아래로 내려가지 않는다.</strong><br>각 Auto Scaling 그룹의 최소 인스턴스 수를 지정할 수 있으며, Amazon EC2 Auto Scaling에서는 <strong>그룹의 크기가 이 값을 넘지 않는다.</strong></p><p>원하는 용량을 지정한 경우 그룹을 생성한 다음에는 언제든지 Amazon EC2 Auto Scaling에서 해당 그룹에서 이만큼의 인스턴스를 보유할 수 있다.<br>조정 정책을 지정했다면 Amazon EC2 Auto Scaling에서는 애플리케이션의 늘어나거나 줄어드는 수요에 따라 인스턴스를 시작하거나 종료할 수 았다.</p> <img src="/css/images/as-group.png"><h2 id="구성요소"><a href="#구성요소" class="headerlink" title="구성요소"></a>구성요소</h2><h3 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h3><p>EC2 인스턴스는 조정 및 관리 목적의 논리 단위로 취급될 수 있도록 그룹으로 구성된다</p><img src="/css/images/group-graphic.png"><h3 id="구성-템플릿"><a href="#구성-템플릿" class="headerlink" title="구성 템플릿"></a>구성 템플릿</h3><p>그룹은 EC2 인스턴스에 대한 구성 템플릿으로 시작 템플릿(모든 기능 제공) 또는 시작 구성(권장X, 더 적은 기능 제공)을 사용한다</p><p><strong>시작 템플릿: Launch Template<br>시작 구성: Launch Configuration</strong></p><img src="/css/images/launch.png"><h3 id="조정-옵션"><a href="#조정-옵션" class="headerlink" title="조정 옵션"></a>조정 옵션</h3><p>EC2 Auto Scaling은 Auto Scaling 그룹을 조정하는 다양한 방법을 제공한다.<br>ex. 지정한 조건의 발생(동적 확장) 또는 일정에 따라 조정하도록 그룹을 구성할 수 있다.</p><img src="/css/images/scaling.png"><h3 id="장점"><a href="#장점" class="headerlink" title="장점"></a>장점</h3><p>가변 수요 허용</p><p>가용성과 내결함성 향상</p><h2 id="인스턴스-수명-주기"><a href="#인스턴스-수명-주기" class="headerlink" title="인스턴스 수명 주기"></a>인스턴스 수명 주기</h2><p>Auto Scaling 그룹이 인스턴스를 시작하고 서비스에 들어갈 때 시작된다<br>수명 주기는 인스턴스를 종료하거나 Auto Scaling 그룹이 인스턴스 서비스에서 제외시키고 이를 종료할 때 끝난다.</p><h2 id="조정-정책-Scaling-Policy"><a href="#조정-정책-Scaling-Policy" class="headerlink" title="조정 정책(Scaling Policy)"></a>조정 정책(Scaling Policy)</h2><h3 id="대상-추적-조정"><a href="#대상-추적-조정" class="headerlink" title="대상 추적 조정"></a>대상 추적 조정</h3><p>특정 지표의 목표 값을 기준으로 그룹의 현재 용량을 <strong>알아서</strong> 늘리거나 줄인다</p><h3 id="단계-조정"><a href="#단계-조정" class="headerlink" title="단계 조정"></a>단계 조정</h3><p>그룹의 현재 용량을 <strong>일련의 조정 조절</strong>에 따라 늘리거나 줄이며 경보 위반의 크기에 따라 달라지는 단계 조정이라고 한다</p><h3 id="단순-조정"><a href="#단순-조정" class="headerlink" title="단순 조정"></a>단순 조정</h3><p>그룹의 현재 용량을 <strong>단일 조정 조절</strong>에 따라 늘리거나 줄인다.</p><p>-&gt;<br>Auto Scaling 그룹의 인스턴스 수에 비례하여 증가하거나 감소하는 사용률 수치를 기준으로 조정하는 경우, <strong>대상 추적 조정 정책</strong>을 사용하는 것이 좋다</p><p>그렇지 않은 경우, <strong>단계 조정 정책</strong>을 사용하는 것이 좋다.</p><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong><br><strong>사진 출처: AFOS[2기] 노션 내용, <a href="https://docs.aws.amazon.com/ko_kr/autoscaling/ec2/userguide/what-is-amazon-ec2-auto-scaling.html">https://docs.aws.amazon.com/ko_kr/autoscaling/ec2/userguide/what-is-amazon-ec2-auto-scaling.html</a></strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 7주차-4 실습 문제 풀기</title>
    <link href="/2021/07/22/2021-07-21-AFOS-4/"/>
    <url>/2021/07/22/2021-07-21-AFOS-4/</url>
    
    <content type="html"><![CDATA[<h3 id="curl-EC21-x2F-xff-php-출력-IP-정보들은-무엇일까"><a href="#curl-EC21-x2F-xff-php-출력-IP-정보들은-무엇일까" class="headerlink" title="curl $EC21&#x2F;xff.php 출력 IP 정보들은 무엇일까?"></a>curl $EC21&#x2F;xff.php 출력 IP 정보들은 무엇일까?</h3><ul><li>Last Client IP: MyEC2 인스턴스의 퍼블릭 IP</li><li>Server Public IP &#x3D; ELB-1 인스턴스의 퍼블릭 IP</li><li>Server Private IP &#x3D; ELB-2 인스턴스의 프라이빗 IP</li></ul><h3 id="for-i-in-1-20-do-curl-ALB-–silent-done-sort-uniq-c-sort-nr-출력-결과는-왜"><a href="#for-i-in-1-20-do-curl-ALB-–silent-done-sort-uniq-c-sort-nr-출력-결과는-왜" class="headerlink" title="for i in {1..20}; do curl $ALB –silent ; done | sort | uniq -c | sort -nr 출력 결과는 왜?"></a>for i in {1..20}; do curl $ALB –silent ; done | sort | uniq -c | sort -nr 출력 결과는 왜?</h3><ul><li>사진을 보면 두 인스턴스의 트래픽이 10씩 나누어져 전송되고 있다. 이와 같이 로드 밸런싱을 사용하면 양쪽으로 트래픽을 골고루 배분하여 전송 할 수 있다.</li></ul><h3 id="curl-ALB-x2F-dev-x2F-index-html-–silent-실행-반복-시-출력-결과-차이점과-원인과-해결방안-curl-ALB-x2F-mgt-x2F-index-html-–silent-상동"><a href="#curl-ALB-x2F-dev-x2F-index-html-–silent-실행-반복-시-출력-결과-차이점과-원인과-해결방안-curl-ALB-x2F-mgt-x2F-index-html-–silent-상동" class="headerlink" title="curl $ALB&#x2F;dev&#x2F;index.html –silent 실행 반복 시 출력 결과 차이점과 원인과 해결방안? (curl $ALB&#x2F;mgt&#x2F;index.html –silent 상동)"></a>curl $ALB&#x2F;dev&#x2F;index.html –silent 실행 반복 시 출력 결과 차이점과 원인과 해결방안? (curl $ALB&#x2F;mgt&#x2F;index.html –silent 상동)</h3><ul><li>dev 페이지가 잘 나오다가, 오류가 난다. 해결 방안으로 경로 기반 라우팅을 예로 들 수 있다.</li><li>경로 기반 라우팅 기능은 HTTP 접근을 위한 URL 경로 정보를 확인하여 원하는 대상으로 라우팅 할 수 있는 기능이다.</li><li>dev 페이지는 ELB-1, mgt 페이지는 ELB-2 로만 전달하는 경로 기반 라우팅을 설정하면 된다.</li></ul><h3 id="curl-ALB-x2F-xff-php-echo-실행-반복-시-출력-결과-차이점과-원인과-해결방안"><a href="#curl-ALB-x2F-xff-php-echo-실행-반복-시-출력-결과-차이점과-원인과-해결방안" class="headerlink" title="curl $ALB&#x2F;xff.php ;echo 실행 반복 시 출력 결과 차이점과 원인과 해결방안?"></a>curl $ALB&#x2F;xff.php ;echo 실행 반복 시 출력 결과 차이점과 원인과 해결방안?</h3><ul><li>각각 출력 결과의 Server Private IP가 다르다.</li><li>정답은 아닌 거 같지만 경로 기반 라우팅을 예로 들 수 있다.</li><li>리스너 규칙에 경로 값을 &#x2F;xff.php로 설정하고 만약 전달 대상을 Dev-Group 으로 경로 기반 라우팅을 설정했다면, EC2-ELB-1 의 xff.php만 보인다.</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># curl 접속 테스트</span><br><span class="hljs-comment"># NLB 는 5 Tuple Hash 결과로 분산하며 default 설정이 Cross Zone Load Balancing(교차 영역 로드 밸런싱)이 비활성화 상태</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> snmpget -v2c -c public <span class="hljs-variable">$NLB</span> 1.3.6.1.2.1.1.5.0 ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> snmpget -v2c -c public <span class="hljs-variable">$NLB1</span> 1.3.6.1.2.1.1.5.0 ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> snmpget -v2c -c public <span class="hljs-variable">$NLB2</span> 1.3.6.1.2.1.1.5.0 ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br></code></pre></td></tr></table></figure><h3 id="위-for-NLB-와-NLB1-NLB2-동작의-차이점은-왜그런건가요"><a href="#위-for-NLB-와-NLB1-NLB2-동작의-차이점은-왜그런건가요" class="headerlink" title="위 for $NLB 와 $NLB1, $NLB2 동작의 차이점은 왜그런건가요?"></a>위 for $NLB 와 $NLB1, $NLB2 동작의 차이점은 왜그런건가요?</h3><ul><li>NLB는</li><li>NLB1 이나 NLB2의 결과는 교차 영역 로드 밸런싱을 비활성화 해놓았기 때문에 해당 가용 영역에 있는 등록된 대상 간에만 트래픽을 분산했다.</li></ul><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용, [도서] 따라하며 배우는 AWS 네트워크 입문-chapter5A</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 7주차-3 NLB를 통한 로드 밸런싱 실습</title>
    <link href="/2021/07/22/2021-07-21-AFOS-3/"/>
    <url>/2021/07/22/2021-07-21-AFOS-3/</url>
    
    <content type="html"><![CDATA[<h2 id="NLB-생성"><a href="#NLB-생성" class="headerlink" title="NLB 생성"></a>NLB 생성</h2><p>EC2 -&gt; 로드밸런서 -&gt; <code>Load Balancer 생성</code> 클릭<br><img width="200" alt="스크린샷 2021-07-22 오전 12 02 22" src="https://user-images.githubusercontent.com/87232411/126533019-7f75307b-fb26-446f-b6b7-ba8318f4dee5.png"></p><p><code>생성</code> 클릭<br><img width="386" alt="스크린샷 2021-07-22 오전 12 02 27" src="https://user-images.githubusercontent.com/87232411/126533030-2465b670-f582-4be5-9f85-227fd4d3819c.png"></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 기본 구성<br><span class="hljs-bullet">    -</span> 이름(NLB-TEST), 인터넷 경계<br><span class="hljs-bullet">    -</span> 리스너 : 프로토콜(UDP), 포트(161)<br><span class="hljs-bullet">    -</span> 가용 영역 : ELB-VPC, 2a 와 2c 선택 - IP는 AWS에서 할당 or 사용자의 EIP 사용 가능<br></code></pre></td></tr></table></figure><img width="1136" alt="스크린샷 2021-07-22 오전 12 02 46" src="https://user-images.githubusercontent.com/87232411/126533037-4068dd8f-ca9e-4bf7-935b-3279c145bb0d.png"><img width="982" alt="스크린샷 2021-07-22 오전 12 02 58" src="https://user-images.githubusercontent.com/87232411/126533040-bf7cfd0c-d018-4875-a2a7-100dfed4c9fb.png"><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode">대상 그룹<span class="hljs-comment">(새 대상 그룹)</span>, 이름<span class="hljs-comment">(NLB-TG)</span>, 대상 유형<span class="hljs-comment">(인스턴스)</span>, 프로토콜<span class="hljs-comment">(UDP)</span>, 포트<span class="hljs-comment">(161)</span><br>상태 검사<span class="hljs-comment">(HTTP)</span> → 고급 상태 검사 설정 : 간격<span class="hljs-comment">(10)</span>, 나머지는 기본값 ⇒ UDP는 기본 단방향 통신으로 상태검사에 비적합<br></code></pre></td></tr></table></figure><img width="1090" alt="스크린샷 2021-07-22 오전 12 03 29" src="https://user-images.githubusercontent.com/87232411/126533044-ebed91c0-c64b-41e3-8309-22586aa41ec3.png"><img width="943" alt="스크린샷 2021-07-22 오전 12 03 55" src="https://user-images.githubusercontent.com/87232411/126533047-da274995-74ad-4530-be1a-b3060860cc02.png"><img width="480" alt="스크린샷 2021-07-22 오전 12 04 34" src="https://user-images.githubusercontent.com/87232411/126533049-6af0c0eb-1812-44ed-a4b0-c032dc0fc265.png"><p>인스턴스 선택 후 -&gt; <code>Include as pending below</code> 클릭<br><img width="1180" alt="스크린샷 2021-07-22 오후 7 47 11" src="https://user-images.githubusercontent.com/87232411/126627916-be8cb052-f7b8-4abb-a504-2ff7b0f21514.png"></p><p>하단에 <code>Create target group</code> 클릭<br><img width="1348" alt="스크린샷 2021-07-22 오후 7 47 20" src="https://user-images.githubusercontent.com/87232411/126627931-fd743031-fcaa-45c9-bfcd-d9f7a9cc7d47.png"></p><p>대상 그룹 선택<br><img width="1121" alt="스크린샷 2021-07-22 오전 12 05 39" src="https://user-images.githubusercontent.com/87232411/126533058-3b9367fd-c2e0-4bef-83b9-65e80bb1f821.png"></p><p><code>Create load balancer</code> 클릭<br><img width="407" alt="스크린샷 2021-07-22 오전 12 05 48" src="https://user-images.githubusercontent.com/87232411/126533061-e0f1ae19-d7a9-4e88-8bf9-ebfa734a37bd.png"></p><p>My-EC2 에서 확인</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">NLB= NLB DNS 주소<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$NLB</span><br><br><span class="hljs-comment"># NLB는 아래 도메인 쿼리 응답 IP가 고정</span><br>dig <span class="hljs-variable">$NLB</span> +short<br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> dig <span class="hljs-variable">$NLB</span> +short &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;------------------------------&quot;</span> &amp;&amp; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 5; <span class="hljs-keyword">done</span><br><br><br><span class="hljs-comment"># NLB IP를 변수에 지정 &lt;&lt; 아래 NLB1 NLB2 IP 정보는 각자 멤버들 &#x27;dig $NLB&#x27; 출력된 IP 2개 정보를 각각 입력</span><br>NLB1=3.38.32.124<br>NLB2=13.124.129.65<br><br> curl 접속 테스트<br><span class="hljs-comment"># NLB 는 5 Tuple Hash 결과로 분산하며 default 설정이 Cross Zone Load Balancing(교차 영역 로드 밸런싱)이 비활성화 상태</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> snmpget -v2c -c public <span class="hljs-variable">$NLB</span> 1.3.6.1.2.1.1.5.0 ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> snmpget -v2c -c public <span class="hljs-variable">$NLB1</span> 1.3.6.1.2.1.1.5.0 ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> snmpget -v2c -c public <span class="hljs-variable">$NLB2</span> 1.3.6.1.2.1.1.5.0 ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br></code></pre></td></tr></table></figure><img width="585" alt="스크린샷 2021-07-22 오전 12 06 28" src="https://user-images.githubusercontent.com/87232411/126533062-55008ca4-20a1-48ec-bc48-a9b5e2280215.png"><img width="267" alt="스크린샷 2021-07-22 오전 12 06 36" src="https://user-images.githubusercontent.com/87232411/126533063-d4977ba3-e942-42c4-88c5-fdf081309e54.png"><img width="717" alt="스크린샷 2021-07-22 오전 12 08 44" src="https://user-images.githubusercontent.com/87232411/126533065-6e30202b-22a5-489b-8a2a-9717c4861ea4.png"><img width="369" alt="스크린샷 2021-07-22 오전 2 08 13" src="https://user-images.githubusercontent.com/87232411/126533066-2b7895f6-48fb-457e-9024-fb8e364b8a21.png"><img width="299" alt="스크린샷 2021-07-22 오전 2 08 53" src="https://user-images.githubusercontent.com/87232411/126533070-a1d48b69-a36f-4210-acaa-c3b2a60e6be6.png"><img width="559" alt="스크린샷 2021-07-22 오전 2 09 08" src="https://user-images.githubusercontent.com/87232411/126533073-43ffa4d2-9086-4264-9bff-a8085ca1b138.png"><img width="563" alt="스크린샷 2021-07-22 오전 2 09 19" src="https://user-images.githubusercontent.com/87232411/126533074-9d45ae31-d4ed-4ca6-b743-f22edab86b37.png"><img width="562" alt="스크린샷 2021-07-22 오전 2 09 30" src="https://user-images.githubusercontent.com/87232411/126533076-d275ff6d-afa2-4134-b561-cfd4b186b0ad.png"><p>ELB-EC2-1&#x2F;2 에서 확인</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 패킷덤프 시 클라이언트IP가 NLB를 경유해서 인입하였지만 변경 안됨 - 클라이언트IP보존</span><br><span class="hljs-comment"># EC2 보안그룹에 NLB로 서비스하는 포트의 대상을 대부분 0.0.0.0/0 지정하게됨 - 클라이언트IP로 인입되기 때문</span><br><span class="hljs-attribute">tcpdump</span> udp port <span class="hljs-number">161</span> -nn<br></code></pre></td></tr></table></figure><p><strong>오류 수정 완료!</strong><br>잘 나온다 ㅎㅎ 만약에 어쩌고 저쩌고 bytes 하는 글만 나온다면 My-EC2에 위에 for문 첫 번째 코드를 다시 돌려보자.<br><img width="774" alt="스크린샷 2021-07-22 오후 7 52 43" src="https://user-images.githubusercontent.com/87232411/126628407-6846b507-4967-410f-90f4-def3493ee3af.png"><br><img width="603" alt="스크린샷 2021-07-22 오후 7 52 52" src="https://user-images.githubusercontent.com/87232411/126628421-ca0e3cf6-bda2-47f9-83ca-a4d4d548356c.png"></p><h3 id="NLB-Cross-Zone-Load-Balancing-활성화"><a href="#NLB-Cross-Zone-Load-Balancing-활성화" class="headerlink" title="NLB Cross Zone Load Balancing 활성화"></a>NLB Cross Zone Load Balancing 활성화</h3><p>EC2 -&gt; 로드밸런서 -&gt; 작업 클릭 -&gt; 속성 편집 클릭<br><img width="340" alt="스크린샷 2021-07-22 오전 2 21 16" src="https://user-images.githubusercontent.com/87232411/126533084-8b961892-4822-4fda-ae78-c1613fba25a0.png"></p><p>교차 영역 로드 밸런싱 활성화 클릭<br><img width="1001" alt="스크린샷 2021-07-22 오전 2 21 23" src="https://user-images.githubusercontent.com/87232411/126533086-345b68ee-a167-45fc-9adb-55b949f12132.png"></p><p>My-EC2 에서 확인</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># curl 접속 테스트</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> snmpget -v2c -c public <span class="hljs-variable">$NLB1</span> 1.3.6.1.2.1.1.5.0 ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> snmpget -v2c -c public <span class="hljs-variable">$NLB2</span> 1.3.6.1.2.1.1.5.0 ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br></code></pre></td></tr></table></figure><p><strong>오류 수정 완료!</strong><br>요즘에 오류를 고치고 성공적인 결과가 나올 때 제일 행복한 거 같다 ㅎㅎ<br><img width="867" alt="스크린샷 2021-07-22 오후 8 00 18" src="https://user-images.githubusercontent.com/87232411/126629205-b6117981-6906-4e7f-97d9-d40b8798e630.png"></p><hr/><h3 id="자원-삭제-중요"><a href="#자원-삭제-중요" class="headerlink" title="자원 삭제(중요!)"></a>자원 삭제(중요!)</h3><h3 id="로드-밸런서-삭제-EC2-→-로드-밸런싱-→-로드-밸런서-→-작업-→-삭제"><a href="#로드-밸런서-삭제-EC2-→-로드-밸런싱-→-로드-밸런서-→-작업-→-삭제" class="headerlink" title="로드 밸런서 삭제 (EC2 → 로드 밸런싱 → 로드 밸런서 → 작업 → 삭제)"></a>로드 밸런서 삭제 (EC2 → 로드 밸런싱 → 로드 밸런서 → 작업 → 삭제)</h3><h3 id="대상-그룹-삭제-EC2-→-로드-밸런싱-→-대상-그룹-→-작업-→-삭제"><a href="#대상-그룹-삭제-EC2-→-로드-밸런싱-→-대상-그룹-→-작업-→-삭제" class="headerlink" title="대상 그룹 삭제 (EC2 → 로드 밸런싱 → 대상 그룹 → 작업 → 삭제)"></a>대상 그룹 삭제 (EC2 → 로드 밸런싱 → 대상 그룹 → 작업 → 삭제)</h3><h3 id="CloudFormation-스택-삭제-CloudFormation-→-스택-→-스택-삭제"><a href="#CloudFormation-스택-삭제-CloudFormation-→-스택-→-스택-삭제" class="headerlink" title="CloudFormation 스택 삭제 (CloudFormation → 스택 → 스택 삭제)"></a>CloudFormation 스택 삭제 (CloudFormation → 스택 → 스택 삭제)</h3><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 7주차-2 ALB를 통한 로드 밸런싱 실습</title>
    <link href="/2021/07/21/2021-07-21-AFOS-2/"/>
    <url>/2021/07/21/2021-07-21-AFOS-2/</url>
    
    <content type="html"><![CDATA[<p>링크 접속</p><p><a href="https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=ELBLab&templateURL=https:%2F%2Fcloudneta-book.s3.ap-northeast-2.amazonaws.com%2Fchapter5%2F5_lab1-AFOS.yaml">https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=ELBLab&amp;templateURL=https:%2F%2Fcloudneta-book.s3.ap-northeast-2.amazonaws.com%2Fchapter5%2F5_lab1-AFOS.yaml</a></p><p><code>다음</code> 클릭 -&gt; <code>key설정</code> 후 <code>다음</code> 클릭 -&gt; <code>다음</code> 클릭 -&gt; <code>스택 생성</code> 클릭<br><img width="254" alt="스크린샷 2021-07-21 오후 10 20 06" src="https://user-images.githubusercontent.com/87232411/126513896-bf1a3072-a6f7-47d1-9623-2718618982a5.png"><br><img width="819" alt="스크린샷 2021-07-21 오후 10 20 29" src="https://user-images.githubusercontent.com/87232411/126513901-4dd6b737-85df-4d16-9a1d-9a80e69663b7.png"><br><img width="222" alt="스크린샷 2021-07-21 오후 10 20 35" src="https://user-images.githubusercontent.com/87232411/126513903-726afd98-4287-4ba2-a97f-292363046ec2.png"><br><img width="225" alt="스크린샷 2021-07-21 오후 10 20 42" src="https://user-images.githubusercontent.com/87232411/126513905-1aa5ba67-db60-4826-b121-9232e5a27338.png"></p><h3 id="기본-환경-검증"><a href="#기본-환경-검증" class="headerlink" title="기본 환경 검증"></a>기본 환경 검증</h3><p>ELB-EC2-1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo su -<br>tree /var/www/html<br>/var/www/html<br><span class="hljs-built_in">cat</span> /var/www/html/xff.php<br></code></pre></td></tr></table></figure><p>ELB-EC2-2</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo su -<br>tree /var/www/html<br>/var/www/html<br><span class="hljs-built_in">cat</span> /var/www/html/xff.php<br></code></pre></td></tr></table></figure><img width="358" alt="스크린샷 2021-07-21 오후 10 32 44" src="https://user-images.githubusercontent.com/87232411/126513908-3b266227-1859-47d0-bcf3-6e94b504e938.png"><img width="810" alt="스크린샷 2021-07-21 오후 10 33 18" src="https://user-images.githubusercontent.com/87232411/126513912-2a025826-0414-4cbe-b832-c183f93f5991.png"><img width="336" alt="스크린샷 2021-07-21 오후 10 33 51" src="https://user-images.githubusercontent.com/87232411/126513916-48d1da1e-ac23-4575-b816-c98119159b89.png"><img width="808" alt="스크린샷 2021-07-21 오후 10 34 18" src="https://user-images.githubusercontent.com/87232411/126513919-c8d6116c-dc9c-4288-8d28-823c01b6a93f.png"><h3 id="My-EC2-에서-확인"><a href="#My-EC2-에서-확인" class="headerlink" title="My-EC2 에서 확인"></a>My-EC2 에서 확인</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">EC21= 아이피 주소<br>EC22= 아이피 주소<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$EC21</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$EC22</span><br><br><span class="hljs-comment"># ELB-EC2-1 서비스 확인</span><br>curl <span class="hljs-variable">$EC21</span><br>curl <span class="hljs-variable">$EC21</span>/xff.php;<span class="hljs-built_in">echo</span><br>curl <span class="hljs-variable">$EC21</span>/dev/<br>snmpget -v2c -c public <span class="hljs-variable">$EC21</span> 1.3.6.1.2.1.1.5.0<br>snmpget -v2c -c public <span class="hljs-variable">$EC21</span> 1.3.6.1.2.1.1.3.0<br><br><span class="hljs-comment"># ELB-EC2-2 서비스 확인</span><br>curl <span class="hljs-variable">$EC22</span><br>curl <span class="hljs-variable">$EC22</span>/xff.php;<span class="hljs-built_in">echo</span><br>curl <span class="hljs-variable">$EC22</span>/mgt/<br>snmpget -v2c -c public <span class="hljs-variable">$EC22</span> 1.3.6.1.2.1.1.5.0<br></code></pre></td></tr></table></figure><img width="302" alt="스크린샷 2021-07-21 오후 10 36 49" src="https://user-images.githubusercontent.com/87232411/126513921-d04951ba-14b7-47ee-9b99-7b10032429be.png"><img width="551" alt="스크린샷 2021-07-21 오후 10 42 19" src="https://user-images.githubusercontent.com/87232411/126513923-d7609886-1c23-490e-a024-187657ebc61c.png"><img width="538" alt="스크린샷 2021-07-21 오후 10 42 28" src="https://user-images.githubusercontent.com/87232411/126513925-2a76745d-5d76-4842-abdc-fff9148cd40f.png"><img width="556" alt="스크린샷 2021-07-21 오후 10 43 38" src="https://user-images.githubusercontent.com/87232411/126513927-e66eb166-2e65-41ea-b05c-25773b91ac28.png"><img width="540" alt="스크린샷 2021-07-21 오후 10 43 46" src="https://user-images.githubusercontent.com/87232411/126513929-61849ccc-ae6c-4215-b476-f9a74224b6a9.png"><h3 id="ALB-생성"><a href="#ALB-생성" class="headerlink" title="ALB 생성"></a>ALB 생성</h3><p><code>Load Banlancer 생성</code> 클릭 -&gt; ALB 찾아서 <code>생성</code> 클릭<br><img width="241" alt="스크린샷 2021-07-21 오후 10 45 30" src="https://user-images.githubusercontent.com/87232411/126513932-9de2d48d-331e-430a-ad5d-9c716781c2dd.png"><br><img width="391" alt="스크린샷 2021-07-21 오후 10 45 36" src="https://user-images.githubusercontent.com/87232411/126513935-09d6f355-06b6-45cc-a9fe-7d1e78c0ee30.png"></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 기본 구성<br><span class="hljs-bullet">    -</span> 이름(ALB-TEST), 인터넷 경계<br><span class="hljs-bullet">    -</span> 리스너 : 프로토콜(HTTP), 포트(80)<br><span class="hljs-bullet">    -</span> 가용 영역 : ELB-VPC, 2a 와 2c 선택<br><span class="hljs-bullet">2.</span> 보안 설정 구성 : skip<br><span class="hljs-bullet">3.</span> 보안 그룹 구성 : 기존보안그룹 (###-ELBSG-### , TCP 80, 22 허용) 선택<br><span class="hljs-bullet">4.</span> 라우팅 구성<br><span class="hljs-bullet">    -</span> 대상 그룹(새 대상 그룹), 이름(ALB-TG), 대상 유형(인스턴스), 프로토콜(HTTP), 포트(80)<br><span class="hljs-bullet">    -</span> 상태 검사 → 고급 상태 검사 설정 : 정상 임계 값(3), 간격(10), 나머지는 기본값<br><span class="hljs-bullet">5.</span> 대상 등록 : 하단 인스턴스 선택 → 등록된 항목에 추가<br><span class="hljs-bullet">6.</span> 검토 → 생성<br></code></pre></td></tr></table></figure><img width="748" alt="스크린샷 2021-07-21 오후 10 46 31" src="https://user-images.githubusercontent.com/87232411/126513936-0af397ed-e381-4b06-9c67-48a08f3d57b9.png"><img width="827" alt="스크린샷 2021-07-21 오후 10 47 02" src="https://user-images.githubusercontent.com/87232411/126513938-a24d4b61-e497-450c-b3f1-44a0fcbd3763.png"><img width="181" alt="스크린샷 2021-07-21 오후 10 47 12" src="https://user-images.githubusercontent.com/87232411/126513939-6b5e92ab-2f74-41cd-be78-0a760948ded7.png"><img width="1088" alt="스크린샷 2021-07-21 오후 10 47 30" src="https://user-images.githubusercontent.com/87232411/126513941-8aff99c3-aa20-4485-b875-37e535afe80a.png"><img width="1078" alt="스크린샷 2021-07-21 오후 10 47 40" src="https://user-images.githubusercontent.com/87232411/126513943-8a8c15d7-dadf-4ec3-8fd8-322b055f0d0c.png"><img width="802" alt="스크린샷 2021-07-21 오후 10 48 11" src="https://user-images.githubusercontent.com/87232411/126513945-b19f6810-8c58-414b-a22e-9d4ea2b79cb3.png"><img width="1088" alt="스크린샷 2021-07-21 오후 10 48 34" src="https://user-images.githubusercontent.com/87232411/126513948-f44d731d-d7a4-4cc6-8c24-2c7d382b5331.png"><img width="641" alt="스크린샷 2021-07-21 오후 10 48 51" src="https://user-images.githubusercontent.com/87232411/126513954-f88f4a2d-4306-402f-b042-6a6270a7b800.png"><img width="1057" alt="스크린샷 2021-07-21 오후 10 49 02" src="https://user-images.githubusercontent.com/87232411/126513958-3dbbde6e-5f8c-4f45-82c9-e1875c147495.png"><img width="157" alt="스크린샷 2021-07-21 오후 10 49 06" src="https://user-images.githubusercontent.com/87232411/126513960-8c66bd83-784c-4eb9-8477-d025d617c08e.png"><img width="100" alt="스크린샷 2021-07-21 오후 10 49 11" src="https://user-images.githubusercontent.com/87232411/126513965-94690be9-adf7-47bc-b5e5-b39ab45e4b32.png"><p>EC2 -&gt; 네트워크 및 보안 -&gt; 네트워크 인터페이스에서 IP주소랑, 인스턴스 소유자 확인<br><img width="625" alt="스크린샷 2021-07-21 오후 10 50 26" src="https://user-images.githubusercontent.com/87232411/126513968-ab5da299-fb8d-4c11-a5cd-b0a77c59fe3e.png"><br><img width="569" alt="스크린샷 2021-07-21 오후 10 51 16" src="https://user-images.githubusercontent.com/87232411/126513969-f63d34cb-5228-4a65-904e-7f83b64d5857.png"></p><h3 id="ALB-검증"><a href="#ALB-검증" class="headerlink" title="ALB 검증"></a>ALB 검증</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">ALB=ALB DNS 주소<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$ALB</span><br><br><span class="hljs-comment"># curl 접속 테스트 - ALB 는 기본 라운드 로빈 방식으로 대상 분산</span><br>dig <span class="hljs-variable">$ALB</span> +short<br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> dig <span class="hljs-variable">$ALB</span> +short &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;------------------------------&quot;</span> &amp;&amp; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 5; <span class="hljs-keyword">done</span><br><br>curl <span class="hljs-variable">$ALB</span><br>curl <span class="hljs-variable">$ALB</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..20&#125;; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$ALB</span> --silent ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..100&#125;; <span class="hljs-keyword">do</span> curl <span class="hljs-variable">$ALB</span> --silent ; <span class="hljs-keyword">done</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr<br>curl <span class="hljs-variable">$ALB</span>/xff.php ;<span class="hljs-built_in">echo</span><br>curl <span class="hljs-variable">$ALB</span>/xff.php ;<span class="hljs-built_in">echo</span><br><br><span class="hljs-comment"># /dev/index.html 접근</span><br>curl <span class="hljs-variable">$ALB</span>/dev/index.html --silent<br>curl <span class="hljs-variable">$ALB</span>/dev/index.html --silent<br><br><span class="hljs-comment"># /mgt/index.html 접근</span><br>curl <span class="hljs-variable">$ALB</span>/mgt/index.html --silent<br>curl <span class="hljs-variable">$ALB</span>/mgt/index.html --silent<br></code></pre></td></tr></table></figure><img width="542" alt="스크린샷 2021-07-21 오후 10 52 54" src="https://user-images.githubusercontent.com/87232411/126513971-35bd0525-a98b-4042-9573-3fcd2c239604.png"><img width="300" alt="스크린샷 2021-07-21 오후 10 53 16" src="https://user-images.githubusercontent.com/87232411/126513975-d0ea6586-08ae-4d5c-bf58-b257741e45a5.png"><img width="567" alt="스크린샷 2021-07-21 오후 10 53 35" src="https://user-images.githubusercontent.com/87232411/126513977-cc14e79f-bef1-46cb-8d18-cdbf09d9dba3.png"><img width="258" alt="스크린샷 2021-07-21 오후 10 54 00" src="https://user-images.githubusercontent.com/87232411/126513978-152bae5b-6716-4e88-bb5c-f86c56adf6ea.png"><img width="564" alt="스크린샷 2021-07-21 오후 10 54 16" src="https://user-images.githubusercontent.com/87232411/126513980-85485ff1-d4f4-4c42-a02f-b8b9d9f9aeac.png"><img width="564" alt="스크린샷 2021-07-21 오후 10 54 33" src="https://user-images.githubusercontent.com/87232411/126513983-a1cb3c39-2695-4aaa-8062-f8204d456229.png"><img width="544" alt="스크린샷 2021-07-21 오후 10 54 52" src="https://user-images.githubusercontent.com/87232411/126513984-1bda53b2-95f0-4251-8d29-906421d96ccf.png"><img width="656" alt="스크린샷 2021-07-21 오후 10 57 03" src="https://user-images.githubusercontent.com/87232411/126513986-1a9d27f1-29b0-49f9-91fd-59468778fe96.png"><img width="628" alt="스크린샷 2021-07-21 오후 10 57 09" src="https://user-images.githubusercontent.com/87232411/126513989-ff79dd85-c772-4399-866d-ce142f256078.png"><img width="669" alt="스크린샷 2021-07-21 오후 10 57 33" src="https://user-images.githubusercontent.com/87232411/126536890-78ebd884-8d2c-47ff-999e-364909bea0e3.png"><img width="660" alt="스크린샷 2021-07-21 오후 10 57 43" src="https://user-images.githubusercontent.com/87232411/126536904-7010bf68-8409-4cbd-bed8-ab196fb06a4f.png"><img width="407" alt="스크린샷 2021-07-21 오후 10 58 23" src="https://user-images.githubusercontent.com/87232411/126513997-e51e5189-30dc-4e44-8a7f-38770d078bd2.png"><img width="410" alt="스크린샷 2021-07-21 오후 10 58 31" src="https://user-images.githubusercontent.com/87232411/126513999-6f28092d-c14c-4489-9ca8-dc774f868c31.png"><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tail -f <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/httpd/</span>access_log<br>tail -f <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/httpd/</span>access_log |<span class="hljs-keyword">grep</span> -v <span class="hljs-string">&quot;ELB-HealthChecker/2.0&quot;</span><br>tcpdump tcp port <span class="hljs-number">80</span> -nn<br></code></pre></td></tr></table></figure><img width="700" alt="스크린샷 2021-07-21 오후 11 12 50" src="https://user-images.githubusercontent.com/87232411/126514001-e3efc504-ec68-4ca6-a5dc-2349a73feb1e.png"><img width="631" alt="스크린샷 2021-07-21 오후 11 13 07" src="https://user-images.githubusercontent.com/87232411/126514002-e6efa7cb-cac5-453a-996d-14090953cc75.png"><img width="495" alt="스크린샷 2021-07-21 오후 11 13 54" src="https://user-images.githubusercontent.com/87232411/126514006-ca870d38-b49e-4b04-9c8a-1998521ccd4c.png"><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># Apache 기본 로그 설정 정보 확인</span><br>grep -n LogFormat <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf/</span>httpd.conf<br><br><span class="hljs-comment"># Apache 기본 로그 설정 변경 : 196번째 줄에 %&#123;X-Forwarded-For&#125;i 추가</span><br>nano <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf/</span>httpd.conf<br><span class="hljs-comment"># CTRL+X Y Enter 로 저장하고 빠져나오기</span><br><br><span class="hljs-comment"># HTTP 다시 로드</span><br>systemctl reload httpd<br><br><span class="hljs-comment"># 실시간 로그 출력 후 외부에서 접속 시도</span><br>tail -f <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/httpd/</span>access_log |grep -v <span class="hljs-string">&quot;ELB-HealthChecker/2.0&quot;</span><br></code></pre></td></tr></table></figure><img width="703" alt="스크린샷 2021-07-21 오후 11 14 45" src="https://user-images.githubusercontent.com/87232411/126514007-b5b94f66-a5ca-4cef-bd2f-eebfa86cba05.png"><img width="799" alt="스크린샷 2021-07-21 오후 11 15 42" src="https://user-images.githubusercontent.com/87232411/126514009-27bef401-c872-4b63-85b8-d2afd1c74565.png"><img width="930" alt="스크린샷 2021-07-21 오후 11 17 01" src="https://user-images.githubusercontent.com/87232411/126537302-de88651b-47ba-41c4-aacc-6a8661a6673e.png"><h3 id="경로-Path-기반-라우팅-설정"><a href="#경로-Path-기반-라우팅-설정" class="headerlink" title="경로(Path) 기반 라우팅 설정"></a>경로(Path) 기반 라우팅 설정</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">- 대상 그룹 생성 : Dev-<span class="hljs-keyword">Group</span>(ELB-EC2-<span class="hljs-number">1</span>) , Mgt-<span class="hljs-keyword">Group</span>(ELB-EC2-<span class="hljs-number">2</span>)<br>- 리스너 규칙 편집 : 경로 <span class="hljs-regexp">/dev/</span>* → 전달 대상(Dev-<span class="hljs-keyword">Group</span>) , 경로 <span class="hljs-regexp">/mgt/</span>* → 전달 대상(Mgt-<span class="hljs-keyword">Group</span>)<br></code></pre></td></tr></table></figure><p><code>Create target group</code> 클릭<br><img width="239" alt="스크린샷 2021-07-21 오후 11 21 50" src="https://user-images.githubusercontent.com/87232411/126514014-6e697fa0-eec1-4038-bc31-4e4873ef4db4.png"></p><p>Target group name ‘Dev-Group’ 입력<br><img width="954" alt="스크린샷 2021-07-21 오후 11 22 19" src="https://user-images.githubusercontent.com/87232411/126514017-f53cb9b9-3e23-4ed5-82ea-3afd1baacab1.png"></p><p>VPC <code>ELB-VPC</code>로 변경<br><img width="994" alt="스크린샷 2021-07-21 오후 11 22 38" src="https://user-images.githubusercontent.com/87232411/126514020-2aed6484-a9ab-43ea-9387-6b3c3afa6a9c.png"></p><p><code>Next</code> 클릭<br><img width="155" alt="스크린샷 2021-07-21 오후 11 22 43" src="https://user-images.githubusercontent.com/87232411/126514021-cdf090be-b80d-4802-bcf8-cc87fef4d046.png"></p><p>ALB-EC2-1 클릭 -&gt; <code>Include as pending below</code> 클릭<br><img width="1159" alt="스크린샷 2021-07-21 오후 11 23 22" src="https://user-images.githubusercontent.com/87232411/126514023-43d3b2a4-7409-4232-8c40-d8af5b488d38.png"></p><p>추가 됐으면 <code>Create target group</code> 클릭</p><img width="1368" alt="스크린샷 2021-07-21 오후 11 23 34" src="https://user-images.githubusercontent.com/87232411/126514028-8deb41cb-4ccf-4112-ad92-07ae38f51912.png"><p>Mgt-Group도 똑같이 만들기<br><img width="619" alt="스크린샷 2021-07-21 오후 11 24 19" src="https://user-images.githubusercontent.com/87232411/126514029-e3d00282-c1cb-4268-91e7-2d49bd3d6647.png"></p><p>EC2 -&gt; 로드밸런서 -&gt; ALB-TEST 선택 후 리스너 클릭 -&gt; <code>규칙 보기/편집</code> 클릭<br>상단에 <code>+</code> 버튼 클릭<br><img width="411" alt="스크린샷 2021-07-21 오후 11 25 11" src="https://user-images.githubusercontent.com/87232411/126514031-4c62d139-ba93-47b9-baa5-4017cf3ee095.png"><br><img width="694" alt="스크린샷 2021-07-21 오후 11 25 24" src="https://user-images.githubusercontent.com/87232411/126514032-42b8b5fc-ecf3-4497-ac03-864dd573fa48.png"><br><img width="165" alt="스크린샷 2021-07-21 오후 11 25 41" src="https://user-images.githubusercontent.com/87232411/126514033-24d32d01-454c-4e68-9b9a-660e3eda74e3.png"></p><p><code>규칙 삽입</code> 클릭</p><img width="798" alt="스크린샷 2021-07-21 오후 11 25 51" src="https://user-images.githubusercontent.com/87232411/126514036-cf1df150-780b-4c05-a9f7-97bad452b73a.png"><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livescript">조건 -&gt; 경로 -&gt; 값 <span class="hljs-regexp">/dev/</span>*<br>전달 대상 -&gt; 대상 그룹: Dev-Group<br></code></pre></td></tr></table></figure><p><code>저장</code> 클릭</p><img width="1272" alt="스크린샷 2021-07-21 오후 11 26 33" src="https://user-images.githubusercontent.com/87232411/126514038-11982d69-c719-41a5-9acf-76d95cc47d5a.png"><p>Mgt-group에도 똑같이 리스너 규칙을 추가해줍니다.<br><img width="1244" alt="스크린샷 2021-07-21 오후 11 27 11" src="https://user-images.githubusercontent.com/87232411/126514041-1b5598da-1cc5-44a6-88dc-5ca06299e8b1.png"></p><p>규칙 설정 전<br><img width="659" alt="스크린샷 2021-07-21 오후 11 29 28" src="https://user-images.githubusercontent.com/87232411/126514044-a12a4824-eb0f-4fa0-8d46-1129e9bcfda8.png"><br><img width="701" alt="스크린샷 2021-07-21 오후 11 30 34" src="https://user-images.githubusercontent.com/87232411/126514046-8f116457-8b38-4c81-87d3-601ce08b2e8d.png"></p><p>규칙 설정 후<br><img width="722" alt="스크린샷 2021-07-21 오후 11 31 54" src="https://user-images.githubusercontent.com/87232411/126514056-f95f2d99-558d-4e4b-97b9-e88fbfd76a35.png"></p><h3 id="HTTP-헤더-기반-라우팅-설정-고정-응답-반환"><a href="#HTTP-헤더-기반-라우팅-설정-고정-응답-반환" class="headerlink" title="HTTP 헤더 기반 라우팅 설정 - 고정 응답 반환"></a>HTTP 헤더 기반 라우팅 설정 - 고정 응답 반환</h3><p>목적: HTTP header 에 이름이 user 이고 값이 이름인 쿠키(Cookie)가 매칭되면 고정된 응답을 반환</p><p>EC2 -&gt; 로드밸런서 -&gt; ALB-TEST 선택 후 리스너 클릭 -&gt; <code>규칙 보기/편집</code> 클릭<br>상단에 <code>+</code> 버튼 클릭 -&gt; <code>규칙 삽입</code> 클릭<br><img width="712" alt="스크린샷 2021-07-21 오후 11 33 21" src="https://user-images.githubusercontent.com/87232411/126514057-f56b37e6-c0ed-4718-8ffb-383218923d5a.png"><br><img width="197" alt="스크린샷 2021-07-21 오후 11 33 27" src="https://user-images.githubusercontent.com/87232411/126514059-5bbdd5c2-4e35-4d6d-8615-ca8d0c53a9af.png"></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">리스너 규칙 편집 : HTTP 헤더 - Cookie 는 <span class="hljs-attribute">user</span>=닉네임 → 고정 응답 반환 200 <span class="hljs-string">&quot;Hello 닉네임&quot;</span><br></code></pre></td></tr></table></figure><img width="1271" alt="스크린샷 2021-07-21 오후 11 34 18" src="https://user-images.githubusercontent.com/87232411/126514062-80ca9641-1e78-48d2-94db-cf1e354f3609.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl --cookie <span class="hljs-string">&quot;user=닉네임&quot;</span> <span class="hljs-variable">$ALB</span> ;<span class="hljs-built_in">echo</span><br></code></pre></td></tr></table></figure><img width="432" alt="스크린샷 2021-07-21 오후 11 35 01" src="https://user-images.githubusercontent.com/87232411/126514064-08408799-6725-4761-9a5a-0cb95e7f9b7e.png"><h3 id="소스-IP-기반-라우팅-설정-고정-응답-반환"><a href="#소스-IP-기반-라우팅-설정-고정-응답-반환" class="headerlink" title="소스 IP 기반 라우팅 설정 - 고정 응답 반환"></a>소스 IP 기반 라우팅 설정 - 고정 응답 반환</h3><p>목적: 소스IP 주소가 매칭되면 고정된 응답을 반환</p><p><code>규칙 삽입</code> 클릭<br><img width="206" alt="스크린샷 2021-07-21 오후 11 35 14" src="https://user-images.githubusercontent.com/87232411/126514068-54b05f13-65ad-49a6-b0aa-9331660861e8.png"></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">리스너 규칙 편집 : 소스<span class="hljs-type">IP</span> -확장=<span class="hljs-symbol">&#x27;My</span>-EC2 공인 IP입력&#x27; → 고정 응답 반환 <span class="hljs-number">200</span> <span class="hljs-string">&quot;Hello EC2 Instance. Your IP address #&quot;</span><br></code></pre></td></tr></table></figure><img width="1247" alt="스크린샷 2021-07-21 오후 11 36 34" src="https://user-images.githubusercontent.com/87232411/126514070-d2145dd5-e421-4c67-8f67-96d9bfcb6f01.png"><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 인터넷 사용 시 자신의 IP 주소(공인IP)를 확인하는 법</span><br> <span class="hljs-built_in">curl</span> <span class="hljs-literal">-4</span> icanhazip.com<br><br><span class="hljs-comment"># 규칙 확인</span><br><span class="hljs-built_in">curl</span> <span class="hljs-variable">$ALB</span><br></code></pre></td></tr></table></figure><img width="469" alt="스크린샷 2021-07-21 오후 11 37 11" src="https://user-images.githubusercontent.com/87232411/126514073-a1eff0fb-fc7c-4c97-bdad-9e1cdae8b617.png"><h3 id="Query-String-기반-라우팅-설정-고정-응답-반환"><a href="#Query-String-기반-라우팅-설정-고정-응답-반환" class="headerlink" title="Query String 기반 라우팅 설정 - 고정 응답 반환"></a>Query String 기반 라우팅 설정 - 고정 응답 반환</h3><p>목적: 쿼리 문자열 값이 매칭되면 고정된 응답을 반환</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">리스너 규칙 편집 : 쿼리 문자열=&#x27;ABTest&#x27; → 고정 응답 반환 <span class="hljs-number">200</span> <span class="hljs-string">&quot;A/B Test, option A selected&quot;</span><br></code></pre></td></tr></table></figure><img width="1279" alt="스크린샷 2021-07-21 오후 11 38 45" src="https://user-images.githubusercontent.com/87232411/126514074-d8393ac3-d71e-4264-8ea4-688157b6d6e7.png"><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">curl</span> <span class="hljs-variable">$ALB</span><br><span class="hljs-built_in">curl</span> <span class="hljs-variable">$ALB</span>?ABTest=A<br></code></pre></td></tr></table></figure><img width="601" alt="스크린샷 2021-07-21 오후 11 39 27" src="https://user-images.githubusercontent.com/87232411/126514077-04d207ba-bd74-42aa-9012-486d90883322.png"><p>HTTP Request method 기반 라우팅 설정 - 고정 응답 반환</p><p>목적: HTTP 특정 메소드가 매칭되면 고정된 응답을 반환</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">리스너 규칙 편집 : <span class="hljs-type">HTTP</span> 요청 메서드=<span class="hljs-symbol">&#x27;READ</span>&#x27; → 고정 응답 반환 <span class="hljs-number">200</span> <span class="hljs-string">&quot;Custom READ method invoked&quot;</span><br></code></pre></td></tr></table></figure><img width="1268" alt="스크린샷 2021-07-21 오후 11 40 16" src="https://user-images.githubusercontent.com/87232411/126514079-52870cd8-0807-4d6a-a3e3-46a4129d8b99.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@ip-172-31-7-124 ~]$ curl --request READ <span class="hljs-variable">$ALB</span><br>Custom READ method invoked<br></code></pre></td></tr></table></figure><img width="346" alt="스크린샷 2021-07-21 오후 11 40 54" src="https://user-images.githubusercontent.com/87232411/126514081-d7f160b9-19a1-424b-a245-b1e46167316a.png"><h3 id="ALB-고급-라우팅-아이폰-사용자-차단"><a href="#ALB-고급-라우팅-아이폰-사용자-차단" class="headerlink" title="ALB 고급 라우팅: 아이폰 사용자 차단"></a>ALB 고급 라우팅: 아이폰 사용자 차단</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">리스너 규칙:<br>HTTP 헤더 → **User-Agent** 는 *iPhone*<br>고정 응답 반환 : 503 <span class="hljs-type">iPhone</span> <span class="hljs-keyword">Access</span> Deny<br></code></pre></td></tr></table></figure><img width="1262" alt="스크린샷 2021-07-21 오후 11 42 36" src="https://user-images.githubusercontent.com/87232411/126514085-7ba3e249-d5b2-4499-b6eb-3b00953def39.png"><p>리스너 규칙 설정 전<br><img src="https://user-images.githubusercontent.com/87232411/126527042-62e35afe-fcfc-4490-821e-a2d5520badf3.jpeg" alt="1"></p><p>리스너 규칙 설정 후<br><img src="https://user-images.githubusercontent.com/87232411/126527035-7c11492e-7e00-446a-89bf-b35073ecc8fc.jpeg" alt="2"></p><h3 id="가용성-테스트"><a href="#가용성-테스트" class="headerlink" title="가용성 테스트"></a>가용성 테스트</h3><p>ELB-EC2-1 인스턴스 중지<br><img width="385" alt="스크린샷 2021-07-21 오후 11 58 31" src="https://user-images.githubusercontent.com/87232411/126514093-9038013d-d042-41c6-afbc-920bf0aed126.png"></p><p>ELB-1 으로 접속은 안 되네요<br><img width="643" alt="스크린샷 2021-07-21 오후 11 59 28" src="https://user-images.githubusercontent.com/87232411/126514095-1db5f0c3-d80d-4879-bbec-d6eb7b7b85f0.png"></p><p>EC2 -&gt; 대상 그룹 -&gt; 모니터링 클릭<br><img width="455" alt="스크린샷 2021-07-22 오전 12 00 38" src="https://user-images.githubusercontent.com/87232411/126514096-59faf71e-deb3-4d65-baf2-320a4e70927c.png"></p><p>비정상 호스트 확인 -&gt; 음 … 잘못한 건가<br><img width="1328" alt="스크린샷 2021-07-22 오전 12 01 08" src="https://user-images.githubusercontent.com/87232411/126514101-6ee27713-bf34-4bd4-b222-49c09b6bcd0b.png"></p><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 7주차-1 네트워크(부하분산) 서비스</title>
    <link href="/2021/07/21/2021-07-21-AFOS-1/"/>
    <url>/2021/07/21/2021-07-21-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h2 id="ELB란"><a href="#ELB란" class="headerlink" title="ELB란?"></a>ELB란?</h2><p>배경: 고가용성 환경 구성 요구</p><p>AWS에서 제공하는 로드 밸런싱 기술이다.<br>일반적으로 최소 2개의 AZ 사용(<strong>복수의 가용영역으로 고가용성 보장</strong>)하며 사용자는 Route 53을 통해서 도메인 주소로 접근한다.</p><h2 id="ELB-구성-리스너와-대상-그룹"><a href="#ELB-구성-리스너와-대상-그룹" class="headerlink" title="ELB 구성 리스너와 대상 그룹"></a>ELB 구성 리스너와 대상 그룹</h2><p><img src="https://user-images.githubusercontent.com/87232411/126491191-62051a25-fecb-477c-8843-f55eb3c85fa9.png" alt="스크린샷 2021-07-21 오후 9 48 42"></p><h2 id="ELB-종류-및-기능"><a href="#ELB-종류-및-기능" class="headerlink" title="ELB 종류 및 기능"></a>ELB 종류 및 기능</h2><h3 id="ALB"><a href="#ALB" class="headerlink" title="ALB"></a>ALB</h3><p>프로토콜: HTTP, HTTPS<br>처리속도: 느림<br>플랫폼: VPC<br>OSI 계층: Layer 7(Application)<br>동일 인스턴스로 다수의 포트 전달: 지원<br>IP를 통한 관리: 미지원<br>프라이빗 링크 지원: 미지원<br>경로 기반 라우팅: 지원<br>호스트 기반 라우팅: 지원</p><h3 id="NLB"><a href="#NLB" class="headerlink" title="NLB"></a>NLB</h3><p>프로토콜: TCP, UDP, TLS<br>처리속도: 빠름<br>플랫폼: VPC<br>OSI 계층: Layer 4 (TransPort)<br>동일 인스턴스로 다수의 포트 전달: 지원<br>IP를 통한 관리: 지원<br>프라이빗 링크 지원: 지원<br>경로 기반 라우팅: 미지원<br>호스트 기반 라우팅: 미지원</p><h3 id="CLB"><a href="#CLB" class="headerlink" title="CLB"></a>CLB</h3><p>프로토콜: TCP, TLS, HTTP, HTTPS<br>처리속도: 중간<br>플랫폼: VPC, EC2-Classic<br>OSI 계층: -<br>동일 인스턴스로 다수의 포트 전달: 미지원<br>IP를 통한 관리: 미지원<br>프라이빗 링크 지원: 미지원<br>경로 기반 라우팅: 미지원<br>호스트 기반 라우팅: 미지원</p><h2 id="ALB-VS-NLB"><a href="#ALB-VS-NLB" class="headerlink" title="ALB VS NLB"></a>ALB VS NLB</h2><p>ALB는 HTTP&#x2F;HTTPS 처리에 특화된 애플리케이션 레밸의 로드 밸런서이다.<br>L7 라우팅 동작 가능, 람다(Lambda)를 대상 그룹 지정이 가능하다.</p><p>NLB는 TCP, UDP, TLS 처리할 수 있는 OSI 4계층 레벨의 로드 밸런서이다.<br>높은 처리량, 고정 IP를 보유한다.</p><h2 id="교차-영역-로드-밸런싱"><a href="#교차-영역-로드-밸런싱" class="headerlink" title="교차 영역 로드 밸런싱"></a>교차 영역 로드 밸런싱</h2><p>로드 밸런서의 노드는 클라이언트로부터 요청을 가져와서 등록된 대상에 분산한다.<br>교차 영역 로드 밸런싱을 활성화하면 각 로드 밸런서 노드가 활성화된 모든 가용영역에 있는 등록된 대상 간에 트래픽을 분산한다.<br>교차 영역 로드 밸런싱을 비활성화하면 각 로드 밸런서 노드가 해당 가용 영역에 있는 등록된 대상 간에만 트래픽을 분산한다.</p><h3 id="교차-영역-로드-밸런싱이-비활성화되어-있는-경우"><a href="#교차-영역-로드-밸런싱이-비활성화되어-있는-경우" class="headerlink" title="교차 영역 로드 밸런싱이 비활성화되어 있는 경우"></a>교차 영역 로드 밸런싱이 비활성화되어 있는 경우</h3><p><img src="https://user-images.githubusercontent.com/87232411/126492833-b2aef1be-7917-4847-a384-495452c9dad0.png" alt="스크린샷 2021-07-21 오후 10 00 55"></p><h3 id="교차-영역-로드-밸런싱이-활성화되어-있는-경우"><a href="#교차-영역-로드-밸런싱이-활성화되어-있는-경우" class="headerlink" title="교차 영역 로드 밸런싱이 활성화되어 있는 경우"></a>교차 영역 로드 밸런싱이 활성화되어 있는 경우</h3><p><img src="https://user-images.githubusercontent.com/87232411/126492841-46a854d8-b327-4cce-87a0-0f2107688f98.png" alt="스크린샷 2021-07-21 오후 10 01 02"><br><br/><br><br/></p><h2 id="심화-옵션-Linux-OS에-snmpget-의-수집-할-수-있는-OID-정보-참고"><a href="#심화-옵션-Linux-OS에-snmpget-의-수집-할-수-있는-OID-정보-참고" class="headerlink" title="심화 옵션) Linux OS에 snmpget 의 수집 할 수 있는 OID 정보 참고"></a>심화 옵션) Linux OS에 snmpget 의 수집 할 수 있는 OID 정보 참고</h2><h3 id="sysDescr"><a href="#sysDescr" class="headerlink" title="sysDescr"></a>sysDescr</h3><p>장비에 대한 설명 정보<br>Vendor에 따라 사이즈의 차이가 있으며 장비 정보 출력 시 부가 정보로 출력한다<br><strong>1.3.6.1.2.1.1.1.0 - sysDescr</strong></p><h3 id="sysObjectID"><a href="#sysObjectID" class="headerlink" title="sysObjectID"></a>sysObjectID</h3><p>장비의 고유한 ID값을 리턴 하며, 해당 값을 이용하여, 장비의 Vendor, 장비 종류를 고유하게 관리할 수 있다.<br><strong>1.3.6.1.2.1.1.2.0 - sysObjectID</strong></p><h3 id="sysUpTime"><a href="#sysUpTime" class="headerlink" title="sysUpTime"></a>sysUpTime</h3><p>장비가 부팅되어 현재까지 동작한 milli-second 값이며, 쿼리 시 업데이트 되는 정보<br><strong>1.3.6.1.2.1.1.3.0 - sysUpTime</strong></p><h3 id="sysName"><a href="#sysName" class="headerlink" title="sysName"></a>sysName</h3><p>사용자가 장비에 설정한 장비명, 설정하지 않았을 경우 Null 결과값을 출력한다.<br>Null값 출력 시 해당 장비명 출력은 IP주소 혹은 장비 Alias명으로 한다.<br><strong>1.3.6.1.2.1.1.5.0 - sysName</strong></p><h2 id="심화-정보"><a href="#심화-정보" class="headerlink" title="심화 정보"></a>심화 정보</h2><h3 id="reload와-restart의-차이점"><a href="#reload와-restart의-차이점" class="headerlink" title="reload와 restart의 차이점"></a>reload와 restart의 차이점</h3><p><strong>restart</strong>: 해당 서비스를 stop하고, start 해주는 작업을 한다.<br>접속 상태에 따라 몇십초 가량의 시간이 소요될 수 있다. 이 시간동안에는 접속이 안되거나 이상현상이 발생할 수 있다.</p><p><strong>reload</strong>: 서버를 종료하지 않은 채 conf 설정 파일들만 새로 갱신해준다는 차이점이 있다.<br>기존의 접속자들은 과거의 설정대로 접속을 유지한채 새롭게 연결되는 접속부터 변경점이 적용된다.</p><p><strong>현업에서는 최대한 reload로 적용을 하고, reload가 불가한 경우에 restart를 사용하자</strong></p><h3 id="Client-IP를-가져오는-법"><a href="#Client-IP를-가져오는-법" class="headerlink" title="Client IP를 가져오는 법"></a>Client IP를 가져오는 법</h3><p><strong>웹 애플리케이션이 client IP를 추출하기 위해서 Http request header를 다음과 같은 순서로 찾는다.</strong></p><ol><li>Proxy-Client-IP: 특정 웹 애플리케이션에서 사용 (ex. WebLogic Connector - mod_wl)</li><li>WL-Proxy-Client-IP: 특정 웹 애플리케이션에서 사용 (ex. WebLogic Connector - mod_wl)</li><li>X-Forwarded-For: HTTP RFC 표준에는 없지만 사실상 표준이다.</li><li>request.getRemoteAddr()</li><li>CLIENT_IP</li></ol><h3 id="X-Forwarded-For-client-proxy1-proxy2"><a href="#X-Forwarded-For-client-proxy1-proxy2" class="headerlink" title="X-Forwarded-For: (client), (proxy1), (proxy2)"></a>X-Forwarded-For: (client), (proxy1), (proxy2)</h3><p>요청이 여러 프록시를 거치는 경우 x-Forwarded-For 요청 헤더의 clientIPAddress 다음에는 로드 밸런서에 도달하기 전에 요청이 통과하는 각 연속 프록시의 IP주소가 온다.<br>따라서 가장 오른쪽의 IP주소는 가장 최근의 프록시의 IP주소이고 가장 왼쪽의 IP주소는 원래 클라이언트의 IP주소이다.</p><p><strong>access log 를 보면 외부에서 지속적인 접속 및 취약점 시도 등이 이루어짐을 알 수 있다. 특히 &#x2F;admin, &#x2F;login</strong></p><h2 id="NLB는-클라이언트-IP확인을-위한-HTTP-헤더의-XFF를-왜-사용하지-못할까"><a href="#NLB는-클라이언트-IP확인을-위한-HTTP-헤더의-XFF를-왜-사용하지-못할까" class="headerlink" title="NLB는 클라이언트 IP확인을 위한 HTTP 헤더의 XFF를 왜 사용하지 못할까?"></a>NLB는 클라이언트 IP확인을 위한 HTTP 헤더의 XFF를 왜 사용하지 못할까?</h2><h4 id="NLB는-Layer-4-계층까지만-이해하고-통제가-가능하여-HTTP-헤더를-이해하지-못한다"><a href="#NLB는-Layer-4-계층까지만-이해하고-통제가-가능하여-HTTP-헤더를-이해하지-못한다" class="headerlink" title="NLB는 Layer 4 계층까지만 이해하고 통제가 가능하여 HTTP 헤더를 이해하지 못한다."></a>NLB는 Layer 4 계층까지만 이해하고 통제가 가능하여 HTTP 헤더를 이해하지 못한다.</h4><br/><br/><h3 id="HTTP-프로토콜에-대해서-학습하면-큰-도움이-된다"><a href="#HTTP-프로토콜에-대해서-학습하면-큰-도움이-된다" class="headerlink" title="HTTP 프로토콜에 대해서 학습하면 큰 도움이 된다."></a>HTTP 프로토콜에 대해서 학습하면 큰 도움이 된다.</h3><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong><br><strong>사진 출처: AFOS[2기] 노션 내용, <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/userguide/how-elastic-load-balancing-works.html#availability-zones">https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/userguide/how-elastic-load-balancing-works.html#availability-zones</a></strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 6주차-3 Amazon RDS 실습</title>
    <link href="/2021/07/15/2021-07-14-AFOS-3/"/>
    <url>/2021/07/15/2021-07-14-AFOS-3/</url>
    
    <content type="html"><![CDATA[<h2 id="실습2-Amazon-RDS-실습"><a href="#실습2-Amazon-RDS-실습" class="headerlink" title="실습2) Amazon RDS 실습"></a>실습2) Amazon RDS 실습</h2><p><code>RDS</code> -&gt; <code>데이터베이스</code> -&gt; <code>데이터베이스 생성</code> 클릭<br><img width="229" alt="스크린샷 2021-07-15 오전 1 28 41" src="https://user-images.githubusercontent.com/87232411/125659321-076e1e37-e694-4d53-8fe0-e8bd79b486b3.png"></p><p>RDS DB 1 생성</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown">생성 방식 : <span class="hljs-strong">**표준 생성**</span><br>엔진 옵션 : <span class="hljs-strong">**MySQL**</span><br>템플릿 : <span class="hljs-strong">**프리 티어**</span><br>DB 인스턴스 식별자 : <span class="hljs-strong">**<span class="hljs-emphasis">*beas1*</span>* (현재 AWS 리전에서 AWS 계정이 소유하는 모든 DB 인스턴스에 대해 유일, 각자 편하게 설정)*</span><br><span class="hljs-strong">마스터 사용자 이름 : **</span>root**<br>마스터 암호(암호확인) : <span class="hljs-strong">**qwe12345**</span><br>DB 인스턴스 클래스 : 버스터블 클래스(t 클래스 포함) <span class="hljs-strong">**db.t2.micro**</span><br>VPC : <span class="hljs-strong">**DB-VPC1**</span><br>퍼블릭 액세스 가능 : <span class="hljs-strong">**아니요**</span><br>VPC 보안 그룹 : ##-<span class="hljs-strong">**VPC1SG3**</span>-## 포함된것 선택 , 기본 default 는 제거<br>가용 영역 : <span class="hljs-strong">**ap-northeast-2a**</span><br>추가 구성 : <span class="hljs-strong">**클릭**</span><br><span class="hljs-bullet">-</span> 초기 데이터베이스 이름 : <span class="hljs-strong">**sample**</span><br><span class="hljs-bullet">-</span> DB 파라미터 그룹 : <span class="hljs-strong">****</span>##-<span class="hljs-strong">**mydbparametergroup**</span>-## 포함된것 선택<br><span class="hljs-bullet">-</span> 백업 보존 기간 : 0일<br><span class="hljs-bullet">-</span> 유지 관리 기간 : 선택 기간 → 일요일 , 01 :00 , 0.5시간<br></code></pre></td></tr></table></figure><img width="876" alt="스크린샷 2021-07-15 오전 1 29 00" src="https://user-images.githubusercontent.com/87232411/125659323-6b1ed569-b4b9-4e20-87b0-e215cd6a4e69.png"><img width="868" alt="스크린샷 2021-07-15 오전 1 29 28" src="https://user-images.githubusercontent.com/87232411/125659328-15b09223-97c3-4fb6-b9c2-ef73f10260f0.png"><img width="791" alt="스크린샷 2021-07-15 오전 1 29 42" src="https://user-images.githubusercontent.com/87232411/125659330-10903482-f9d4-4b91-8b3c-2e7973d5590b.png"><img width="808" alt="스크린샷 2021-07-15 오전 1 29 51" src="https://user-images.githubusercontent.com/87232411/125659331-93d68a0c-bf8e-4b44-bccb-e53ed42b95ad.png"><p>프리티어에서는 <code>가용성 및 내구성</code>은 막혀있네요<br><img width="841" alt="스크린샷 2021-07-15 오전 1 29 56" src="https://user-images.githubusercontent.com/87232411/125659332-c55cd6ca-12b5-4df1-8ce1-e267c2978844.png"><br><img width="819" alt="스크린샷 2021-07-15 오전 1 30 07" src="https://user-images.githubusercontent.com/87232411/125659333-4305ac1f-91f7-4131-9f09-3f902dead097.png"><br><img width="798" alt="스크린샷 2021-07-15 오전 1 30 21" src="https://user-images.githubusercontent.com/87232411/125659335-ac155a76-8b6b-4486-8f91-79130a6f4c18.png"><br><img width="816" alt="스크린샷 2021-07-15 오전 1 30 44" src="https://user-images.githubusercontent.com/87232411/125659338-41483834-1b2f-40f5-af29-956592113907.png"><br><img width="785" alt="스크린샷 2021-07-15 오전 1 31 23" src="https://user-images.githubusercontent.com/87232411/125659340-c505a053-8807-4d62-b0df-0a0f7e25e03e.png"><br><img width="303" alt="스크린샷 2021-07-15 오전 1 31 32" src="https://user-images.githubusercontent.com/87232411/125659342-9cbee479-6f03-463a-b5aa-f3bc69ff68c8.png"></p><p>RDS DB 2(Muti-AZ) 생성(12분 정도 소요)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section"># 별로 언급이 없는 부분은 기본값 설정입니다!</span><br>생성 방식 : <span class="hljs-strong">**표준 생성**</span><br>엔진 옵션 : <span class="hljs-strong">**MySQL**</span><br>템플릿 : <span class="hljs-strong">**개발/테스트**</span><br>DB 인스턴스 식별자 : <span class="hljs-strong">**<span class="hljs-emphasis">*beas2*</span>**</span> <span class="hljs-emphasis">*(현재 AWS 리전에서 AWS 계정이 소유하는 모든 DB 인스턴스에 대해 유일, 각자 편하게 설정)*</span><br>마스터 사용자 이름 : <span class="hljs-strong">**root**</span><br>마스터 암호(암호확인) : <span class="hljs-strong">**qwe12345**</span><br>DB 인스턴스 클래스 : 버스터블 클래스(t 클래스 포함) <span class="hljs-strong">**db.t2.micro**</span> (이전 세대 클래스 포함 체크)<br>다중 AZ 배포 : <span class="hljs-strong">**대기 인스턴스 생성**</span><br>VPC : <span class="hljs-strong">**DB-VPC1**</span><br>퍼블릭 액세스 가능 : <span class="hljs-strong">**아니요**</span><br>VPC 보안 그룹 : ##-<span class="hljs-strong">**VPC1SG3**</span>-## 포함된것 선택 , 기본 default 는 제거<br>추가 구성 : <span class="hljs-strong">**클릭**</span><br><span class="hljs-bullet">-</span> 초기 데이터베이스 이름 : <span class="hljs-strong">**sample**</span><br><span class="hljs-bullet">-</span> DB 파라미터 그룹 : <span class="hljs-strong">****</span>##-<span class="hljs-strong">**mydbparametergroup**</span>-## 포함된것 선택<br><span class="hljs-bullet">-</span> 백업 보존 기간 : <span class="hljs-strong">**35일**</span><br><span class="hljs-bullet">-</span> Enhanced 모니터링 활성화 (<span class="hljs-strong">**Uncheck**</span>)<br></code></pre></td></tr></table></figure><img width="901" alt="스크린샷 2021-07-15 오전 1 31 55" src="https://user-images.githubusercontent.com/87232411/125659345-1cb42e26-82fe-46ec-bbdf-836dfb047c74.png"><img width="835" alt="스크린샷 2021-07-15 오전 1 32 02" src="https://user-images.githubusercontent.com/87232411/125659346-66536ca4-a7f9-4f65-88e6-c702b418d63c.png"><img width="804" alt="스크린샷 2021-07-15 오전 1 32 26" src="https://user-images.githubusercontent.com/87232411/125659347-df216ca7-65b1-48b1-bed8-e478f141049c.png"><img width="813" alt="스크린샷 2021-07-15 오전 1 32 36" src="https://user-images.githubusercontent.com/87232411/125659352-a44c5715-ff61-4fc7-b6c2-ace4f9a50964.png"><p>개발&#x2F;테스트에서는 <code>가용성 및 내구성</code>이 열려 있네요<br><img width="823" alt="스크린샷 2021-07-15 오전 1 32 42" src="https://user-images.githubusercontent.com/87232411/125659353-0307d756-52e5-449a-a10d-dfa6f9167c4f.png"><br><img width="863" alt="스크린샷 2021-07-15 오전 1 32 50" src="https://user-images.githubusercontent.com/87232411/125659355-ba7a2326-1aef-458f-aac3-a689cfee7fc2.png"><br><img width="832" alt="스크린샷 2021-07-15 오전 1 33 03" src="https://user-images.githubusercontent.com/87232411/125659358-c769bcee-3143-43f3-bfab-be8d84c0f287.png"><br><img width="796" alt="스크린샷 2021-07-15 오전 1 33 14" src="https://user-images.githubusercontent.com/87232411/125659361-fe24370e-5e60-49fa-9b63-f60c8b9e7548.png"><br><img width="857" alt="스크린샷 2021-07-15 오전 1 33 43" src="https://user-images.githubusercontent.com/87232411/125659363-00194b62-b047-474a-88a3-93e523fb4edb.png"></p><p>요금은 금방 삭제하면 얼마 안 드니 걱정 안 해도 됩니다<br><img width="794" alt="스크린샷 2021-07-15 오전 1 34 04" src="https://user-images.githubusercontent.com/87232411/125659365-14f8d9f2-0ebf-4ca0-917a-7245420b565d.png"></p><p>RDS DB1 엔드포인트를 확인해줍니다<br><img width="880" alt="스크린샷 2021-07-15 오전 2 17 59" src="https://user-images.githubusercontent.com/87232411/125667282-e9b25432-5421-4c3c-bb2c-9b8c6659043a.png"></p><p>다중 AZ는 아니요라고 적혀있고, 보조 영역은 없네요<br><img width="328" alt="스크린샷 2021-07-15 오전 2 17 23" src="https://user-images.githubusercontent.com/87232411/125667267-f99f6ba8-7f37-4835-8c83-651045e8f90a.png"></p><p>RDS DB2 의 엔드포인트도 확인해줍니다<br><img width="713" alt="스크린샷 2021-07-15 오전 2 17 41" src="https://user-images.githubusercontent.com/87232411/125667273-e8b8dfe4-3dee-404a-aaea-2b9b37b800a7.png"></p><p>여기에는 다중 AZ와 보조 영역 2개 다 있네요<br><img width="315" alt="스크린샷 2021-07-15 오전 2 17 47" src="https://user-images.githubusercontent.com/87232411/125667280-36ad64be-f9bd-441e-bf52-6f0a1796ea03.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 변수 지정</span><br>RDS1=gasidards1.cb79jlim4dyq.ap-northeast-2.rds.amazonaws.com<br>RDS2=gasidards2.cb79jlim4dyq.ap-northeast-2.rds.amazonaws.com<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$RDS1</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$RDS2</span><br><br><span class="hljs-comment"># dig 질의</span><br>dig +short <span class="hljs-variable">$RDS1</span><br>dig +short <span class="hljs-variable">$RDS2</span><br><br><span class="hljs-comment"># mysql 접속</span><br>mysql -h <span class="hljs-variable">$RDS1</span> -uroot -pqwe12345<br>mysql -h <span class="hljs-variable">$RDS2</span> -uroot -pqwe12345<br><br><span class="hljs-comment"># 상태정보 및 데이터베이스 확인</span><br>status;<br>show databases;<br></code></pre></td></tr></table></figure><img width="565" alt="스크린샷 2021-07-15 오전 2 20 41" src="https://user-images.githubusercontent.com/87232411/125667298-d4871a99-7dbd-4c9d-8179-18a9fc9a9a82.png"><img width="471" alt="스크린샷 2021-07-15 오전 2 20 57" src="https://user-images.githubusercontent.com/87232411/125667300-c038be49-67d3-4153-8802-fc1616da44fe.png"><img width="370" alt="스크린샷 2021-07-15 오전 2 21 16" src="https://user-images.githubusercontent.com/87232411/125667305-80676526-1fe4-4440-a14c-50a318db4eb9.png"><img width="567" alt="스크린샷 2021-07-15 오전 2 22 14" src="https://user-images.githubusercontent.com/87232411/125667308-571275cf-f28c-4526-a8bc-2b33b9b8f032.png"><img width="400" alt="스크린샷 2021-07-15 오전 2 22 25" src="https://user-images.githubusercontent.com/87232411/125667317-5c850576-9d00-4fa6-acf8-39da5751aa71.png"><img width="564" alt="스크린샷 2021-07-15 오전 2 23 01" src="https://user-images.githubusercontent.com/87232411/125667320-752fda62-ccc7-4f3b-a9b4-b2bea3452647.png"><img width="350" alt="스크린샷 2021-07-15 오전 2 23 08" src="https://user-images.githubusercontent.com/87232411/125667325-4c571158-631a-4396-9b19-e3cecc3c6419.png"><p>WebSrv 의 index.php 수정 후 WebSrv 에서 AWS RDS1 DB 사용</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 상태정보 및 데이터베이스 확인</span><br>nano /var/www/html/index.php<br><br><span class="hljs-comment">## 아래 DB 주소와 암호를 변경</span><br>&lt;?php<br>define(<span class="hljs-string">&#x27;DB_SERVER&#x27;</span>, <span class="hljs-string">&#x27;**자신의RDS1 엔드포인트 주소**&#x27;</span>);<br>define(<span class="hljs-string">&#x27;DB_USERNAME&#x27;</span>, <span class="hljs-string">&#x27;root&#x27;</span>);<br>define(<span class="hljs-string">&#x27;DB_PASSWORD&#x27;</span>, <span class="hljs-string">&#x27;**qwe12345**&#x27;</span>);<br>define(<span class="hljs-string">&#x27;DB_DATABASE&#x27;</span>, <span class="hljs-string">&#x27;sample&#x27;</span>);<br>?&gt;<br></code></pre></td></tr></table></figure><img width="565" alt="스크린샷 2021-07-15 오전 2 57 51" src="https://user-images.githubusercontent.com/87232411/125671678-760030f8-8946-4df4-9069-d84b34994c13.png"><p>이건 오류나서 모르겠다 이유를 찾고 게시물을 수정하겠습니다</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># mysql 접속 후 데이터 확인</span><br>mysql -h <span class="hljs-variable">$RDS1</span> -uroot -pqwe12345 -e <span class="hljs-string">&quot;USE sample;SELECT * FROM EMPLOYEES;&quot;</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> mysql -h <span class="hljs-variable">$RDS1</span> -uroot -pqwe12345 -e <span class="hljs-string">&quot;USE sample;SELECT * FROM EMPLOYEES;&quot;</span>; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><img width="566" alt="스크린샷 2021-07-15 오전 2 29 57" src="https://user-images.githubusercontent.com/87232411/125668330-eabb305b-3f9d-450f-b005-19538802c955.png"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql"># mysql 접속<br>mysql <span class="hljs-operator">-</span>h $RDS1 <span class="hljs-operator">-</span>uroot <span class="hljs-operator">-</span>pqwe12345<br><br># 스키마 생성<br><span class="hljs-keyword">CREATE</span> SCHEMA `shopdb`;<br>USE shopdb;<br><br># 테이블 생성<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `shopdb`.`memberTBL` (<br>  `memberID` <span class="hljs-type">CHAR</span>(<span class="hljs-number">8</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `memberName` <span class="hljs-type">CHAR</span>(<span class="hljs-number">5</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `memberAddress` <span class="hljs-type">CHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NULL</span>,<br>  `age` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`memberID`));<br><br># 행(<span class="hljs-operator">=</span>데이터<span class="hljs-operator">=</span>레코드) 넣기<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> memberTBL <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;Gasida&#x27;</span>, <span class="hljs-string">&#x27;베아스&#x27;</span>, <span class="hljs-string">&#x27;인천 연수구 송도동&#x27;</span>, <span class="hljs-string">&#x27;30&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> memberTBL <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;User4&#x27;</span>, <span class="hljs-string">&#x27;유나&#x27;</span>, <span class="hljs-string">&#x27;경기 성남시 분당구&#x27;</span>, <span class="hljs-string">&#x27;27&#x27;</span>);<br><br># 조회<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> memberTBL;<br></code></pre></td></tr></table></figure><img width="566" alt="스크린샷 2021-07-15 오전 2 31 52" src="https://user-images.githubusercontent.com/87232411/125668332-89b70e67-cd8e-4a22-88e5-f4e6d1fc5563.png"><img width="326" alt="스크린샷 2021-07-15 오전 2 32 09" src="https://user-images.githubusercontent.com/87232411/125668334-70d87914-b719-4a4e-8a4b-57e292e5141a.png"><img width="423" alt="스크린샷 2021-07-15 오전 2 32 22" src="https://user-images.githubusercontent.com/87232411/125668335-f4104fa0-7282-4c25-a729-3f8f584e0722.png"><img width="563" alt="스크린샷 2021-07-15 오전 2 33 23" src="https://user-images.githubusercontent.com/87232411/125668340-de47ba47-e0e7-44aa-9f1a-ddb399df2281.png"><img width="516" alt="스크린샷 2021-07-15 오전 2 33 35" src="https://user-images.githubusercontent.com/87232411/125668342-5b98512d-4363-496f-82bf-70ae3646c9fb.png"><h3 id="RDS-Muti-AZ-실습-진행-1번-RDS"><a href="#RDS-Muti-AZ-실습-진행-1번-RDS" class="headerlink" title="RDS Muti-AZ 실습 진행 (1번 RDS)"></a>RDS Muti-AZ 실습 진행 (1번 RDS)</h3><p>백업 0일 미사용 상태에서 <code>읽기 복제본 생성</code> 가능을 확인해보지만 가능하지 않는다<br><img width="333" alt="스크린샷 2021-07-15 오전 2 34 01" src="https://user-images.githubusercontent.com/87232411/125668345-1139fe09-8b9d-4c6c-b010-026783f6a6a4.png"></p><p>작업 바로 왼쪽에 <code>수정</code>을 누른다<br><img width="235" alt="스크린샷 2021-07-15 오전 2 34 18" src="https://user-images.githubusercontent.com/87232411/125668346-644dd075-4c6d-45cc-bd37-72d011c23dd8.png"></p><p>가용성 및 내구성 에서 <code>대기 인스턴스 생성</code> 클릭<br><img width="801" alt="스크린샷 2021-07-15 오전 2 35 03" src="https://user-images.githubusercontent.com/87232411/125668347-58714c1e-1616-4e1a-a383-366fde14a4f6.png"></p><p>백업 보존 기간 <code>35일</code>로 변경<br><img width="795" alt="스크린샷 2021-07-15 오전 2 35 16" src="https://user-images.githubusercontent.com/87232411/125668349-bd7d3a70-1249-43bc-81a6-21e12429e137.png"></p><p>하단에 <code>계속</code> 클릭<br><img width="202" alt="스크린샷 2021-07-15 오전 2 35 20" src="https://user-images.githubusercontent.com/87232411/125668370-2ca81ad8-1a05-4a18-a4ce-ea8808a2b00e.png"></p><p>수정 예약에서 <code>즉시 사용</code> 클릭 -&gt; 하단에 <code>DB 인스턴스 수정</code> 클릭<br><img width="838" alt="스크린샷 2021-07-15 오전 2 35 27" src="https://user-images.githubusercontent.com/87232411/125668372-3e30830c-a67b-403a-835e-21afb1c1f575.png"></p><p>WebSrv 의 index.php 수정 후 WebSrv 에서 AWS RDS2 DB 사용</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 상태정보 및 데이터베이스 확인</span><br><span class="hljs-built_in">cat</span> /var/www/html/index.php<br><br><span class="hljs-comment">## 아래 DB 주소와 암호를 변경</span><br>nano /var/www/html/index.php<br>&lt;?php<br>define(<span class="hljs-string">&#x27;DB_SERVER&#x27;</span>, <span class="hljs-string">&#x27;자신의RDS2 엔드포인트 주소&#x27;</span>);<br>define(<span class="hljs-string">&#x27;DB_USERNAME&#x27;</span>, <span class="hljs-string">&#x27;root&#x27;</span>);<br>define(<span class="hljs-string">&#x27;DB_PASSWORD&#x27;</span>, <span class="hljs-string">&#x27;qwe12345&#x27;</span>);<br>define(<span class="hljs-string">&#x27;DB_DATABASE&#x27;</span>, <span class="hljs-string">&#x27;sample&#x27;</span>);<br>?&gt;<br></code></pre></td></tr></table></figure><img width="564" alt="스크린샷 2021-07-15 오전 2 56 18" src="https://user-images.githubusercontent.com/87232411/125671672-6fa21469-d940-4b10-83d6-8675b473dc4f.png"><img width="562" alt="스크린샷 2021-07-15 오전 2 58 51" src="https://user-images.githubusercontent.com/87232411/125671681-ac63a2cb-f3cc-444b-a102-61c1eb85c87f.png"><p><a href="http://webec2_publicip/">HTTP://WebEC2_PublicIP/</a> 접속 → 이후 이름,주소 추가<br><img src="https://user-images.githubusercontent.com/87232411/125671682-00f3e53e-db82-4d7a-a08a-dba10a64d696.png" alt="스크린샷 2021-07-15 오전 3 00 56"><br><img src="https://user-images.githubusercontent.com/87232411/125671684-de3f8917-0888-468d-a80f-6e4c7d6709f2.png" alt="스크린샷 2021-07-15 오전 3 01 16"><br><img src="https://user-images.githubusercontent.com/87232411/125671686-e94c0f44-7132-4cd8-a079-05007687cc4d.png" alt="스크린샷 2021-07-15 오전 3 01 25"></p><p>WebSrv 에서 동작</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># mysql 접속 후 데이터 확인 반복 → 아래 재부팅 시 동작 확인을 위함</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> mysql -h <span class="hljs-variable">$RDS2</span> -uroot -pqwe12345 -e <span class="hljs-string">&quot;USE sample;SELECT * FROM EMPLOYEES;&quot;</span>; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># (옵션) dig 조회 → IP 변경 확인을 위함</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> dig +short <span class="hljs-variable">$RDS2</span>; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><img width="709" alt="스크린샷 2021-07-18 오전 2 12 30" src="https://user-images.githubusercontent.com/87232411/126044843-5cd5bc0a-354a-467e-9d7d-b396818802da.png"><img width="559" alt="스크린샷 2021-07-18 오전 2 12 35" src="https://user-images.githubusercontent.com/87232411/126044807-32ec235a-c872-47eb-a3bc-3551a57982ff.png"><p>RDS -&gt; 작업 -&gt; <code>재부팅</code> 클릭<br><img width="233" alt="스크린샷 2021-07-15 오전 3 05 49" src="https://user-images.githubusercontent.com/87232411/125671700-d982efef-3e2f-4b6b-adfd-224fc5f360cb.png"></p><p><code>장애 조치로 재부팅</code> 클릭 -&gt; <code>확인</code> 클릭<br><img width="824" alt="스크린샷 2021-07-15 오전 3 05 57" src="https://user-images.githubusercontent.com/87232411/125671706-abcd9006-73e5-4276-b0f2-b315d8659b39.png"></p><p>작업 -&gt; <code>읽기 전용 복제본 생성</code> 클릭<br><img width="256" alt="스크린샷 2021-07-15 오전 3 08 23" src="https://user-images.githubusercontent.com/87232411/125671726-79aca13d-04cf-4f78-89ea-321427434596.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">DB 인스턴스 식별자 : ***bea2-readonly*** *(현재 AWS 리전에서 AWS 계정이 소유하는 모든 DB 인스턴스에 대해 유일, 각자 편하게 설정)*<br>AWS 리전 : **Asia Pacific (Seoul)**<br>다중 AZ 배포 : **대기 인스턴스를 생성하지 마십시오**<br></code></pre></td></tr></table></figure><img width="868" alt="스크린샷 2021-07-15 오전 3 09 13" src="https://user-images.githubusercontent.com/87232411/125671729-ec1f2778-f7ce-49b5-9139-c0d91c035fa4.png"><img width="800" alt="스크린샷 2021-07-15 오전 3 09 25" src="https://user-images.githubusercontent.com/87232411/125671732-c1aa4bf6-5b29-4eb8-b127-fbc0c22506d4.png"><img width="332" alt="스크린샷 2021-07-15 오전 3 09 32" src="https://user-images.githubusercontent.com/87232411/125671736-dbcec82c-d0e7-4be6-9c0b-9901730f4831.png"><p>읽기 복제본에 엔드 포인트를 확인해 줍니다<br><img width="638" alt="스크린샷 2021-07-15 오전 3 32 19" src="https://user-images.githubusercontent.com/87232411/125675563-8475fc49-526b-4642-b23e-271d48fbebd1.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">RDS2=엔드 포인트<br>RDS2Read=엔드 포인트<br><br><span class="hljs-comment"># mysql 접속 후 데이터 확인</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> mysql -h <span class="hljs-variable">$RDS2</span> -uroot -pqwe12345 -e <span class="hljs-string">&quot;USE sample;SELECT * FROM EMPLOYEES;&quot;</span>; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> mysql -h <span class="hljs-variable">$RDS2Read</span> -uroot -pqwe12345 -e <span class="hljs-string">&quot;USE sample;SELECT * FROM EMPLOYEES;&quot;</span>; <span class="hljs-built_in">date</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># 마스터 DB에서 정보 확인 : 마스터 DB에 바이너리 로그를 이용하여 복제를 구현</span><br>mysql -h <span class="hljs-variable">$RDS2</span> -uroot -pqwe12345 -e <span class="hljs-string">&quot;show master status;&quot;</span><br><br><span class="hljs-comment"># 읽기 복제본 DB에서 정보 확인</span><br>mysql -h <span class="hljs-variable">$RDS2Read</span> -uroot -pqwe12345 -e <span class="hljs-string">&quot;show slave status\G&quot;</span><br></code></pre></td></tr></table></figure><img width="571" alt="스크린샷 2021-07-15 오전 3 35 12" src="https://user-images.githubusercontent.com/87232411/125675565-33c4c1b3-4f54-4d0d-8844-881b5b864875.png"><p>제가 사이트에 입력한 정보가 나오네요<br><img width="565" alt="스크린샷 2021-07-15 오전 3 35 38" src="https://user-images.githubusercontent.com/87232411/125675566-4bc731aa-1cc6-4c3f-aadd-26988145fd3b.png"><br><img width="698" alt="스크린샷 2021-07-15 오전 3 36 04" src="https://user-images.githubusercontent.com/87232411/125675567-8bb214bc-7fef-43ed-a1c8-601e73d67a4f.png"><br><img width="681" alt="스크린샷 2021-07-15 오전 3 38 20" src="https://user-images.githubusercontent.com/87232411/125675573-037f449c-8880-4a74-8d80-97720ced578f.png"><br><br/><br><br/><br><br/></p><h2 id="자원-삭제-중요"><a href="#자원-삭제-중요" class="headerlink" title="자원 삭제 (중요!)"></a>자원 삭제 (중요!)</h2><h3 id="RDS-삭제-DB-삭제-시-꼭-참고"><a href="#RDS-삭제-DB-삭제-시-꼭-참고" class="headerlink" title="RDS 삭제 : DB 삭제 시 꼭 참고"></a>RDS 삭제 : DB 삭제 시 꼭 참고</h3><img width="577" alt="스크린샷 2021-07-15 오전 3 44 55" src="https://user-images.githubusercontent.com/87232411/125677034-dc4f5f45-7d16-4d94-9b41-7327b04cb3de.png"><h3 id="CloudFormation-삭제"><a href="#CloudFormation-삭제" class="headerlink" title="CloudFormation 삭제"></a>CloudFormation 삭제</h3><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 6주차-2 MariaDB 접속 및 기본 사용 실습</title>
    <link href="/2021/07/14/2021-07-14-AFOS-2/"/>
    <url>/2021/07/14/2021-07-14-AFOS-2/</url>
    
    <content type="html"><![CDATA[<p>CloudFormation 스택 생성하기 - 링크 클릭 후 템플릿 파일로 기본 환경 자동 배포<br><a href="https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=DBLab&templateURL=https:%2F%2Fs3.ap-northeast-2.amazonaws.com%2Fcloudformation.cloudneta.net%2FDB%2Faws-db.yaml">https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=DBLab&amp;templateURL=https:%2F%2Fs3.ap-northeast-2.amazonaws.com%2Fcloudformation.cloudneta.net%2FDB%2Faws-db.yaml</a></p><p><code>다음</code> 클릭<br><img src="https://user-images.githubusercontent.com/87232411/125659192-87264bb2-32b0-4d41-a8a3-c4681853f260.png" alt="스크린샷 2021-07-15 오전 1 01 45"></p><p>키 설정 후 <code> 다음</code> 클릭<br><img src="https://user-images.githubusercontent.com/87232411/125659203-d2a4fb70-2a98-479d-b4fe-202aba1a7614.png" alt="스크린샷 2021-07-15 오전 1 01 51"></p><p>기본 값으로 두고 <code>다음</code> 클릭<br><img src="https://user-images.githubusercontent.com/87232411/125659207-49c45819-4126-44c3-af88-2d19ed6d3498.png" alt="스크린샷 2021-07-15 오전 1 01 58"></p><p><code>스택 생성</code> 클릭<br><img src="https://user-images.githubusercontent.com/87232411/125659209-96fae96b-dcba-4c20-b678-5124558b35b7.png" alt="스크린샷 2021-07-15 오전 1 02 04"></p><p>DBLab이 생성되었습니다<br><img src="https://user-images.githubusercontent.com/87232411/125659211-0a8702e8-3ced-4803-9571-10de996f4caa.png" alt="스크린샷 2021-07-15 오전 1 03 36"></p><p>SSH로 WebSrv 접속 후</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># IP확인 및 DBSrv ping 테스트</span><br>ip a<br>ping 10.1.2.10<br><br><span class="hljs-comment"># DBSrv 로 MySQL 접속 (계정 정보: root/qwe123)</span><br>mysql -h 10.1.2.10 -uroot -pqwe123<br></code></pre></td></tr></table></figure><img width="563" alt="스크린샷 2021-07-15 오전 1 06 18" src="https://user-images.githubusercontent.com/87232411/125659213-b3004f56-9e3c-4a75-931d-a435b22568da.png"><img width="500" alt="스크린샷 2021-07-15 오전 1 06 33" src="https://user-images.githubusercontent.com/87232411/125659215-564ffa1c-1628-4d2f-b86a-cb77427fd673.png"><img width="562" alt="스크린샷 2021-07-15 오전 1 06 53" src="https://user-images.githubusercontent.com/87232411/125659216-94a9c4b1-3261-490c-8c58-1738dd8deb2f.png"><p>SSH로 DBSrv에 접속 후</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># IP확인</span><br>ip a<br><br><span class="hljs-comment"># MySQL 접속 (계정 정보: root/qwe123)</span><br>mysql -uroot -pqwe123<br><br></code></pre></td></tr></table></figure><img width="560" alt="스크린샷 2021-07-15 오전 1 07 06" src="https://user-images.githubusercontent.com/87232411/125659218-f4455832-314e-4921-a1ee-9325888fad79.png"><img width="562" alt="스크린샷 2021-07-15 오전 1 07 17" src="https://user-images.githubusercontent.com/87232411/125659221-ca461efc-5351-4af6-8360-2165dd0e0825.png"><h3 id="MariaDB-에서-기본적인-SQL문-사용해보기"><a href="#MariaDB-에서-기본적인-SQL문-사용해보기" class="headerlink" title="MariaDB 에서 기본적인 SQL문 사용해보기"></a>MariaDB 에서 기본적인 SQL문 사용해보기</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sql"># DB 서버의 상태 정보<br>MariaDB [(<span class="hljs-keyword">none</span>)]<span class="hljs-operator">&gt;</span> status;<br><br># 데이터베이스(<span class="hljs-operator">=</span>스키마) 확인<br><span class="hljs-keyword">SHOW</span> DATABASES;<br><br># employees 데이터베이스 선택 하기<br>USE employees;<br>MariaDB [(<span class="hljs-keyword">none</span>)]<span class="hljs-operator">&gt;</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span>USE employees;<span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>MariaDB [<span class="hljs-operator">*</span><span class="hljs-operator">*</span>employees<span class="hljs-operator">*</span><span class="hljs-operator">*</span>]<span class="hljs-operator">&gt;</span><br><br># 테이블 확인<br><span class="hljs-keyword">SHOW</span> TABLES;<br><br># 테이블 필드와 타입 등 정보 확인<br><span class="hljs-keyword">DESC</span> employees;<br><br># employees 테이블 조회 하기<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employees;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employees LIMIT <span class="hljs-number">10</span>;<br><br># 특정 열(컬럼<span class="hljs-operator">=</span>필드) 기준 오름<span class="hljs-operator">/</span>내림차순으로 정렬 조회 하기<br># <span class="hljs-comment">-- 공백이 있는 개체의 이름 사용 시는 백틱(backtick) `` 으로 묶어줘야 하나의 이름으로 인식함</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employees <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> `emp_no` <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">100</span>;<br><br># 특정 행(<span class="hljs-operator">=</span>로우<span class="hljs-operator">=</span>레코드)만 출력 <span class="hljs-operator">-</span> Mary 이름(first_name) , Baba 성(last_name)<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employees <span class="hljs-keyword">WHERE</span> first_name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Mary&#x27;</span>;<br></code></pre></td></tr></table></figure><img width="564" alt="스크린샷 2021-07-15 오전 1 07 35" src="https://user-images.githubusercontent.com/87232411/125659224-126f3840-bdfc-4d23-a09b-7633d3c55cf4.png"><img width="323" alt="스크린샷 2021-07-15 오전 1 07 50" src="https://user-images.githubusercontent.com/87232411/125659226-26807007-7e59-45c9-a5f6-b5a78720e60c.png"><img width="499" alt="스크린샷 2021-07-15 오전 1 08 06" src="https://user-images.githubusercontent.com/87232411/125659229-66072272-467a-4e3e-9f16-dbf55d0a74d2.png"><img width="339" alt="스크린샷 2021-07-15 오전 1 08 22" src="https://user-images.githubusercontent.com/87232411/125659230-6ea9ec21-1480-4661-a598-6ea9b9a1342e.png"><img width="527" alt="스크린샷 2021-07-15 오전 1 09 45" src="https://user-images.githubusercontent.com/87232411/125659232-9bad22b7-d008-403d-96e3-ed3a87761a05.png"><img width="552" alt="스크린샷 2021-07-15 오전 1 10 12" src="https://user-images.githubusercontent.com/87232411/125659235-b3abb029-47bf-4818-b25b-200a1aac548e.png"><img width="519" alt="스크린샷 2021-07-15 오전 1 10 22" src="https://user-images.githubusercontent.com/87232411/125659238-3d409269-88c5-49ab-8abb-24ccb8a2a76e.png"><img width="559" alt="스크린샷 2021-07-15 오전 1 10 34" src="https://user-images.githubusercontent.com/87232411/125659241-159aad6d-0d36-44e2-8c59-58a5b319437b.png"><img width="540" alt="스크린샷 2021-07-15 오전 1 10 58" src="https://user-images.githubusercontent.com/87232411/125659242-3f4093b5-a3cd-42b2-b5d6-f5600c7c111e.png"><h3 id="생성-및-데이터-레코드-생성-변경"><a href="#생성-및-데이터-레코드-생성-변경" class="headerlink" title="생성 및 데이터(레코드) 생성 변경"></a>생성 및 데이터(레코드) 생성 변경</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 스키마(<span class="hljs-operator">=</span>데이터베이스) 생성<br><span class="hljs-keyword">CREATE</span> SCHEMA `shopdb`;<br><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-keyword">SHOW</span> DATABASES;<span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>USE shopdb;<br><br># 테이블 생성 <span class="hljs-operator">-</span> (Workbench) GUI 설정 보여주기 <span class="hljs-operator">-</span> 아래 복붙해서 적용하기<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `shopdb`.`memberTBL` (<br>  `memberID` <span class="hljs-type">CHAR</span>(<span class="hljs-number">8</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `memberName` <span class="hljs-type">CHAR</span>(<span class="hljs-number">5</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `memberAddress` <span class="hljs-type">CHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NULL</span>,<br>  `age` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`memberID`));<br><br># 테이블 정보 확인<br><span class="hljs-keyword">DESC</span> memberTBL;<br><br># 데이터 넣기 <span class="hljs-operator">-</span> (Workbench) GUI 설정 보여주기 <span class="hljs-operator">-</span> (카톡 멤버 정보 받기) <span class="hljs-operator">-</span> 아래 복붙해서 적용하기<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> memberTBL;<br><br># 행(<span class="hljs-operator">=</span>데이터<span class="hljs-operator">=</span>레코드) <span class="hljs-number">1</span>개 넣기<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> memberTBL <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;icebear2n2&#x27;</span>, <span class="hljs-string">&#x27;아이수베어&#x27;</span>, <span class="hljs-string">&#x27;제주도 제주시&#x27;</span>, <span class="hljs-string">&#x27;19&#x27;</span>);<br><br>## 카톡 멤버 정보 받아서 넣기<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> memberTBL <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;Gasida&#x27;</span>, <span class="hljs-string">&#x27;가시다&#x27;</span>, <span class="hljs-string">&#x27;서울 잠실동 분당구&#x27;</span>, <span class="hljs-string">&#x27;30&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> memberTBL <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;User4&#x27;</span>, <span class="hljs-string">&#x27;유나&#x27;</span>, <span class="hljs-string">&#x27;경기 성남시 분당구&#x27;</span>, <span class="hljs-string">&#x27;27&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> memberTBL <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;Minyoung&#x27;</span>, <span class="hljs-string">&#x27;민영&#x27;</span>, <span class="hljs-string">&#x27;경기도 부천시 중동&#x27;</span>, <span class="hljs-string">&#x27;30&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> memberTBL <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;Eunji&#x27;</span>, <span class="hljs-string">&#x27;은지&#x27;</span>, <span class="hljs-string">&#x27;인천 남구 주안동&#x27;</span>, <span class="hljs-string">&#x27;28&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> memberTBL <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;Yujeong&#x27;</span>, <span class="hljs-string">&#x27;유정&#x27;</span>, <span class="hljs-string">&#x27;서울 은평구 증산동&#x27;</span>, <span class="hljs-string">&#x27;29&#x27;</span>);<br><br># 조회<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> memberTBL;<br><span class="hljs-keyword">SELECT</span> memberName, memberAddress <span class="hljs-keyword">FROM</span> memberTBL;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> memberTBL <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">27</span>;<br><br># 행(<span class="hljs-operator">=</span>데이터<span class="hljs-operator">=</span>레코드) 변경(<span class="hljs-operator">=</span>업데이트)<br><span class="hljs-keyword">UPDATE</span> memberTBL <span class="hljs-keyword">SET</span> memberID<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Yuna&#x27;</span> <span class="hljs-keyword">WHERE</span> memberName<span class="hljs-operator">=</span><span class="hljs-string">&#x27;유나&#x27;</span>;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> memberTBL;<br></code></pre></td></tr></table></figure><img width="335" alt="스크린샷 2021-07-15 오전 1 11 25" src="https://user-images.githubusercontent.com/87232411/125659243-f778732c-6a67-42fb-b5c8-79fba2d7f5b2.png"><img width="320" alt="스크린샷 2021-07-15 오전 1 11 36" src="https://user-images.githubusercontent.com/87232411/125659248-38b90d21-04d2-498c-a675-558ebdf00e3c.png"><img width="267" alt="스크린샷 2021-07-15 오전 1 11 48" src="https://user-images.githubusercontent.com/87232411/125659249-aa01aab5-5809-4f8c-9bd5-71794e64a373.png"><img width="435" alt="스크린샷 2021-07-15 오전 1 12 00" src="https://user-images.githubusercontent.com/87232411/125659250-b0d28d85-74fa-4fa2-90fe-2fa26f9fde5f.png"><img width="474" alt="스크린샷 2021-07-15 오전 1 12 13" src="https://user-images.githubusercontent.com/87232411/125659251-74f6ff70-dfaf-40f9-b91e-82f09cb55a84.png"><img width="356" alt="스크린샷 2021-07-15 오전 1 12 57" src="https://user-images.githubusercontent.com/87232411/125659253-e46ab7c5-b3fa-485d-b347-a6c652413f6d.png"><img width="695" alt="스크린샷 2021-07-15 오전 1 14 55" src="https://user-images.githubusercontent.com/87232411/125659255-34ac7a5f-ff96-4380-a4ee-355d4b1f4e1e.png"><img width="696" alt="스크린샷 2021-07-15 오전 1 15 43" src="https://user-images.githubusercontent.com/87232411/125659257-d3a82eea-4a69-4ff6-9c91-ff04e55dae6f.png"><img width="505" alt="스크린샷 2021-07-15 오전 1 16 10" src="https://user-images.githubusercontent.com/87232411/125659259-0dca49c9-17c7-4a89-8e64-3724360a2859.png"><img width="564" alt="스크린샷 2021-07-15 오전 1 17 00" src="https://user-images.githubusercontent.com/87232411/125659260-4d782599-ee69-4ad3-a6ff-00fa45381b61.png"><img width="500" alt="스크린샷 2021-07-15 오전 1 17 21" src="https://user-images.githubusercontent.com/87232411/125659264-c8f31d14-bac1-4b55-a3d8-389606ecb5cf.png"><img width="583" alt="스크린샷 2021-07-15 오전 1 17 32" src="https://user-images.githubusercontent.com/87232411/125659266-f8647494-90b6-41f5-95a6-559ba0124fc4.png"><img width="527" alt="스크린샷 2021-07-15 오전 1 17 41" src="https://user-images.githubusercontent.com/87232411/125659269-9dc59f70-8c17-4a43-b20a-d66a7655b049.png"><h3 id="트리-파일-확인"><a href="#트리-파일-확인" class="headerlink" title="트리 파일 확인"></a>트리 파일 확인</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tree /var/www/html<br></code></pre></td></tr></table></figure><img width="396" alt="스크린샷 2021-07-15 오전 1 19 05" src="https://user-images.githubusercontent.com/87232411/125659272-08a4d22e-acc4-487a-84be-6f776a5e8624.png"><h3 id="심화-옵션-HTTP-x2F-x2F-WebEC2-PublicIP-x2F-php-mysql-x2F-1-php-형식으로-접속"><a href="#심화-옵션-HTTP-x2F-x2F-WebEC2-PublicIP-x2F-php-mysql-x2F-1-php-형식으로-접속" class="headerlink" title="심화 옵션)HTTP:&#x2F;&#x2F;WebEC2_PublicIP&#x2F;php_mysql&#x2F;1.php 형식으로 접속"></a>심화 옵션)HTTP:&#x2F;&#x2F;WebEC2_PublicIP&#x2F;php_mysql&#x2F;1.php 형식으로 접속</h3><p><code>1.php</code> 접속<br><img width="486" alt="스크린샷 2021-07-15 오전 1 19 37" src="https://user-images.githubusercontent.com/87232411/125659274-6dbc0d56-45b3-4a17-a3f8-3cfa6adc4bc7.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl localhost/php_mysql/1.php<br></code></pre></td></tr></table></figure><img width="380" alt="스크린샷 2021-07-15 오전 1 20 21" src="https://user-images.githubusercontent.com/87232411/125659276-d519b64c-553c-41b5-8699-a8e92fc5d907.png"><p><code>2.php</code> 접속</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> mysql -h <span class="hljs-number">10.1</span>.<span class="hljs-number">2.10</span> -uroot -pqwe123 -e <span class="hljs-string">&quot;show databases;&quot;</span>; date; sleep <span class="hljs-number">1</span>; done<br></code></pre></td></tr></table></figure><img width="691" alt="스크린샷 2021-07-15 오전 1 22 08" src="https://user-images.githubusercontent.com/87232411/125659278-459b4f1c-04a9-4e2a-98d6-ba7f165b6975.png"><img width="505" alt="스크린샷 2021-07-15 오전 1 22 19" src="https://user-images.githubusercontent.com/87232411/125659279-99de7272-f3ef-4cff-9665-a915d6c238fa.png"><p><code>3.php</code> 접속</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> mysql -h <span class="hljs-number">10.1</span>.<span class="hljs-number">2.10</span> -uroot -pqwe123 -e <span class="hljs-string">&quot;USE sqlDB2;show tables;&quot;</span>; date; sleep <span class="hljs-number">1</span>; done<br></code></pre></td></tr></table></figure><img width="640" alt="스크린샷 2021-07-15 오전 1 22 40" src="https://user-images.githubusercontent.com/87232411/125659280-3edb024f-3ceb-40b9-8770-e0ead70078d8.png"><img width="471" alt="스크린샷 2021-07-15 오전 1 22 55" src="https://user-images.githubusercontent.com/87232411/125659281-944dabd6-e41b-40e6-a957-41b988e319df.png"><p><code>4.php</code> 접속</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> mysql -h <span class="hljs-number">10.1</span>.<span class="hljs-number">2.10</span> -uroot -pqwe123 -e <span class="hljs-string">&quot;USE sqlDB2;select * from userTbl;&quot;</span>; date; sleep <span class="hljs-number">1</span>; done<br></code></pre></td></tr></table></figure><img width="664" alt="스크린샷 2021-07-15 오전 1 23 09" src="https://user-images.githubusercontent.com/87232411/125659282-bab63dcd-b6e9-455f-8f72-29f3f732cbdb.png"><img width="466" alt="스크린샷 2021-07-15 오전 1 23 18" src="https://user-images.githubusercontent.com/87232411/125659283-662dabf3-593f-4410-8e7b-e2d930d2a469.png"><p><code>5.php</code> 접속<br><img width="645" alt="스크린샷 2021-07-15 오전 1 23 33" src="https://user-images.githubusercontent.com/87232411/125659286-855a20a7-7eb2-441b-85e9-17f00480ef07.png"></p><p>직접 레코드 추가 후 웹 페이지(5.php) 반영 확인</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql <span class="hljs-operator">-</span>h <span class="hljs-number">10.1</span><span class="hljs-number">.2</span><span class="hljs-number">.10</span> <span class="hljs-operator">-</span>uroot <span class="hljs-operator">-</span>pqwe123<br>USE sqlDB2;<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> userTbl <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;AAA&#x27;</span>, <span class="hljs-string">&#x27;가시다&#x27;</span>, <span class="hljs-number">2000</span>, <span class="hljs-string">&#x27;전주&#x27;</span>, <span class="hljs-string">&#x27;019&#x27;</span>, <span class="hljs-string">&#x27;1234567&#x27;</span>, <span class="hljs-number">179</span>, <span class="hljs-string">&#x27;2015-5-5&#x27;</span>);<br></code></pre></td></tr></table></figure><img width="473" alt="스크린샷 2021-07-15 오전 1 23 45" src="https://user-images.githubusercontent.com/87232411/125659289-33e04fc5-9abf-47bf-a9bd-3e2cfa6d8a4b.png"><img width="586" alt="스크린샷 2021-07-15 오전 1 24 26" src="https://user-images.githubusercontent.com/87232411/125659293-4746a539-e7e1-4ab4-b278-d25106f82a75.png"><img width="698" alt="스크린샷 2021-07-15 오전 1 25 21" src="https://user-images.githubusercontent.com/87232411/125659297-cfede565-6fa8-4ee8-b01c-55ac73681b28.png"><p>다시 5.php를 조회해보면 내가 추가된 걸 볼 수 있다<br><img width="473" alt="스크린샷 2021-07-15 오전 1 25 31" src="https://user-images.githubusercontent.com/87232411/125659299-3f4f3bc4-2671-432e-9598-172c86606b74.png"></p><h2 id="심화-옵션-회원-관리-시스템"><a href="#심화-옵션-회원-관리-시스템" class="headerlink" title="심화 옵션) 회원 관리 시스템"></a>심화 옵션) 회원 관리 시스템</h2><p><a href="http://webec2_publicip/usermgmt/main.html">HTTP://WebEC2_PublicIP/usermgmt/main.html</a> 형식으로 접속<br><img src="https://user-images.githubusercontent.com/87232411/125659300-6d0942ce-6c9b-4575-80c2-3a58ac4618a1.png" alt="스크린샷 2021-07-15 오전 1 26 44"></p><p><code>신규 회원 등록</code>을 누른 후에 정보를 입력<br><img src="https://user-images.githubusercontent.com/87232411/125659301-37b3ba66-5c6c-4878-8018-a90be2c8f8e9.png" alt="스크린샷 2021-07-15 오전 1 27 24"></p><p>오 등록이 되었습니다<br><img src="https://user-images.githubusercontent.com/87232411/125659307-8248bfdf-9205-413c-91d3-0234cbb55c20.png" alt="스크린샷 2021-07-15 오전 1 27 35"></p><p>회원을 조회해보니 가시다님이랑 제가 있네요 ㅎㅎ<br><img src="https://user-images.githubusercontent.com/87232411/125659310-ea33ecfd-d6ae-4fb5-92e5-8070c7306363.png" alt="스크린샷 2021-07-15 오전 1 27 46"></p><p>자 회원 삭제를 해줍시다<br><img src="https://user-images.githubusercontent.com/87232411/125659312-26bd48f1-0a26-4ad7-8185-2c60b3f22a57.png" alt="스크린샷 2021-07-15 오전 1 27 52"></p><p><code>회원 삭제</code>를 클릭<br><img src="https://user-images.githubusercontent.com/87232411/125659314-0c13697c-e396-4df1-a153-00d3d1527814.png" alt="스크린샷 2021-07-15 오전 1 27 57"></p><p>삭제 되었네요<br><img src="https://user-images.githubusercontent.com/87232411/125659316-cc048c3b-d3fe-43e0-8683-aac11f147792.png" alt="스크린샷 2021-07-15 오전 1 28 01"></p><p>보시다시피 제가 사라졌습니다<br><img src="https://user-images.githubusercontent.com/87232411/125659318-a9331fab-6897-4f55-bc16-274ea2fb7c42.png" alt="스크린샷 2021-07-15 오전 1 28 06"></p><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 6주차-1 데이터베이스 서비스</title>
    <link href="/2021/07/14/2021-07-14-AFOS-1/"/>
    <url>/2021/07/14/2021-07-14-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h2 id="DBMS-란"><a href="#DBMS-란" class="headerlink" title="DBMS 란?"></a>DBMS 란?</h2><h3 id="데이터베이스"><a href="#데이터베이스" class="headerlink" title="데이터베이스"></a>데이터베이스</h3><ul><li>데이터의 집합</li><li>데이터의 저장공간</li></ul><h3 id="DBMS"><a href="#DBMS" class="headerlink" title="DBMS"></a>DBMS</h3><ul><li>데이터베이스를 관리&#x2F;운영하는 역할(시스템)</li></ul><h3 id="DBMS-종류"><a href="#DBMS-종류" class="headerlink" title="DBMS 종류"></a>DBMS 종류</h3><ul><li>MySQL</li><li>MariaDB</li><li>PostgreSQL</li><li>Oracle</li><li>SQL Server</li><li>DB2</li><li>Access</li><li>SQLite<br>등등 ..</li></ul><h3 id="DBMS-특징"><a href="#DBMS-특징" class="headerlink" title="DBMS 특징"></a>DBMS 특징</h3><ul><li>데이터의 무결성, 보안, 데이터 중복의 최소화, 프로그래밍 언어를 통하여 응용ㅇ 프로그램 제작 및 수정이 쉬워짐(자동화 등)</li></ul><h3 id="데이터베이스의-발전"><a href="#데이터베이스의-발전" class="headerlink" title="데이터베이스의 발전"></a>데이터베이스의 발전</h3><ul><li>오프라인 -&gt; 파일 시스템 사용 -&gt; 데이터베이스 관리 시스템(DBMS)</li></ul><h3 id="DBMS-분류"><a href="#DBMS-분류" class="headerlink" title="DBMS 분류"></a>DBMS 분류</h3><ul><li>계층형 DBMS</li><li>망형 DBMS</li><li>관계형 DBMS(MySQL, Oracle 등)</li><li>객체 지향형 DBMS</li><li>객체 관계형 DBMS</li></ul><h3 id="관계형-Relational-DBMS"><a href="#관계형-Relational-DBMS" class="headerlink" title="관계형(Relational) DBMS"></a>관계형(Relational) DBMS</h3><ul><li>데이터베이스 테이블 이라고 불리는 최소 단위로 구성되어 있음</li><li>이 테이블은 하나 이상의 열로 구성되어 있음</li><li>테이블을 부르는 다른 용어로 릴레이션(Relation), 엔티티(Entity) 등이 있다.</li></ul><h3 id="SQL-개요-데이터베이스를-조작하는-언어"><a href="#SQL-개요-데이터베이스를-조작하는-언어" class="headerlink" title="SQL 개요 - 데이터베이스를 조작하는 언어"></a>SQL 개요 - 데이터베이스를 조작하는 언어</h3><ul><li>DBMS 제작 회사와 독립적</li><li>다른 시스템으로 이식성이 좋음</li><li>표준이 계속 발전함 - SQL은 국제 표준화 기관에서 표준화된 내용을 계속 발표</li><li>대화식 언어</li><li>분산형 클라이언트&#x2F;서버 구조</li></ul><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><ul><li>Oracle 사에서 제작한 DBMS 소프트웨어로 오픈 소스로 제공</li><li>비상업용이나 교육용으로 제한 없이 사용되지만 상용으로 사용시 라이선스 취득 비용 필요</li><li>초기 MySQL 개발자들이 독립해서 만든 MariaDB 사용을 권장, MariaDB는 MySQL 과 대부분 호환됨</li></ul><h3 id="MySQL-에디션-및-기능-비교"><a href="#MySQL-에디션-및-기능-비교" class="headerlink" title="MySQL 에디션 및 기능 비교"></a>MySQL 에디션 및 기능 비교</h3><ul><li>무료인 Community 에디션은 Enterprise 에디션과 기능상 차이는 거의 없음</li></ul><h2 id="AWS-데이터베이스-서비스-amp-주요-기능"><a href="#AWS-데이터베이스-서비스-amp-주요-기능" class="headerlink" title="AWS 데이터베이스 서비스 &amp; 주요 기능"></a>AWS 데이터베이스 서비스 &amp; 주요 기능</h2><h3 id="Cloud-DB-진화-순서대로"><a href="#Cloud-DB-진화-순서대로" class="headerlink" title="Cloud DB 진화 (순서대로)"></a>Cloud DB 진화 (순서대로)</h3><ol><li>On-Premises<ul><li>MySQL</li></ul></li><li>Less Cloud<ul><li>MySQL on EC2</li></ul></li><li>Managed<ul><li>RDS MySQL&#x2F;Aurora</li></ul></li><li>Serverless<ul><li>Aurora Serverless</li><li>DynamoDB</li></ul></li></ol><h3 id="서버리스-DB"><a href="#서버리스-DB" class="headerlink" title="서버리스 DB"></a>서버리스 DB</h3><ul><li>서버 및 클러스터 관리 전혀 필요 없음</li><li>사용량에 따라 자동으로 확장 가능</li><li>고 가용성 및 자동 장애 복구 지원</li><li>컴퓨팅 사용량 기준으로만 과금</li></ul><h3 id="Amazon-Aurora"><a href="#Amazon-Aurora" class="headerlink" title="Amazon Aurora"></a>Amazon Aurora</h3><ul><li>클라우드를 위해 구축된 MySQL 및 PostSQL 호환 관계형 데이터베이스</li><li>1&#x2F;10 비용으로 상용 데이터베이스 수준의 성능 및 가용성 제공</li></ul><h3 id="Amazon-DynamoDB"><a href="#Amazon-DynamoDB" class="headerlink" title="Amazon DynamoDB"></a>Amazon DynamoDB</h3><ul><li>어떤 규모에서든 빠르고 유연한 Key-Value NoSQL 데이터베이스</li></ul><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 5주차-2 보안 실습</title>
    <link href="/2021/07/07/2021-07-07-AFOS-2/"/>
    <url>/2021/07/07/2021-07-07-AFOS-2/</url>
    
    <content type="html"><![CDATA[<h2 id="실습-IAM-User-생성-및-로그인"><a href="#실습-IAM-User-생성-및-로그인" class="headerlink" title="실습) IAM User 생성 및 로그인"></a>실습) IAM User 생성 및 로그인</h2><p>IAM -&gt; <code>사용자</code> 클릭<br><img width="215" alt="스크린샷 2021-07-07 오후 11 46 05" src="https://user-images.githubusercontent.com/86812249/124787372-68fc3100-df83-11eb-9248-51d91a62dcf2.png"></p><p><code>사용자 추가</code> 클릭<br><img width="131" alt="스크린샷 2021-07-07 오후 11 46 12" src="https://user-images.githubusercontent.com/86812249/124787373-68fc3100-df83-11eb-8036-056e399b4c02.png"></p><p><code>사용자 이름 : admin</code>.<br><code>프로그래밍 방식 엑세스</code>, <code>AWS Management Console 액세스</code> 선택 후 -&gt; 비밀번호 설정 -&gt; <code>다음: 권한</code> 클릭<br><img width="1063" alt="스크린샷 2021-07-07 오후 11 46 43" src="https://user-images.githubusercontent.com/86812249/124787378-6994c780-df83-11eb-9faf-4f9ebf7d35d1.png"></p><p>상단 오른쪽에 <code>기존 정책 직접 연결</code> 클릭<br><img width="428" alt="스크린샷 2021-07-07 오후 11 46 50" src="https://user-images.githubusercontent.com/86812249/124787381-6a2d5e00-df83-11eb-8e41-b4bce692bad9.png"></p><p><code>AdministratorAccess</code> 체크<br><img width="826" alt="스크린샷 2021-07-07 오후 11 46 57" src="https://user-images.githubusercontent.com/86812249/124787382-6ac5f480-df83-11eb-8cee-765a09655059.png"></p><p>하단에 <code>다음: 태그</code> 클릭<br><img width="211" alt="스크린샷 2021-07-07 오후 11 47 02" src="https://user-images.githubusercontent.com/86812249/124787384-6ac5f480-df83-11eb-89bd-03dd9e39a8d5.png"></p><p>기본 값으로 둔 후 -&gt; <code>다음: 검토</code> 클릭<br><img width="151" alt="스크린샷 2021-07-07 오후 11 47 28" src="https://user-images.githubusercontent.com/86812249/124787387-6b5e8b00-df83-11eb-91f5-0fcb016b878d.png"></p><p>하단에 <code>사용자 만들기</code> 클릭<br><img width="199" alt="스크린샷 2021-07-07 오후 11 47 35" src="https://user-images.githubusercontent.com/86812249/124787388-6bf72180-df83-11eb-90f1-d79039d516f7.png"></p><p>이 뒤로 닫기를 누르면 다시는 액세스키를 볼 수 없으니, <code>.csv 다운로드</code> 클릭해주자<br><img width="351" alt="스크린샷 2021-07-07 오후 11 47 46" src="https://user-images.githubusercontent.com/86812249/124787392-6bf72180-df83-11eb-869c-08e8e256fe21.png"></p><p>다음 계정도 똑같이 만들어 주자<br><code>사용자 이름: viewuser</code>.<br><code>AWS Management Console 액세스</code> 만 체크 후 -&gt; 비밀 번호 설정 -&gt; <code>다음: 권한</code> 클릭<br><img width="1081" alt="스크린샷 2021-07-07 오후 11 48 18" src="https://user-images.githubusercontent.com/86812249/124787397-6c8fb800-df83-11eb-971f-4f2493f57c1e.png"></p><p>상단 오른쪽에 <code>기존 정책 직접 연결</code> 클릭<br><img width="352" alt="스크린샷 2021-07-07 오후 11 48 43" src="https://user-images.githubusercontent.com/86812249/124787400-6d284e80-df83-11eb-8f79-6a736cfbec75.png"></p><p><code>view</code>를 검색 후, <code>ViewOnlyAccess</code> 클릭 -&gt; <code>다음: 태그</code> 클릭<br><img width="1035" alt="스크린샷 2021-07-07 오후 11 48 59" src="https://user-images.githubusercontent.com/86812249/124787402-6d284e80-df83-11eb-9b54-ed1d5d0f8376.png"></p><p>기본 값으로 둔 후 -&gt; <code>다음: 검토</code> 클릭<br><img width="142" alt="스크린샷 2021-07-07 오후 11 49 07" src="https://user-images.githubusercontent.com/86812249/124787404-6dc0e500-df83-11eb-8a1c-eddfa3ffefbf.png"></p><p>하단에 <code>사용자 만들기</code> 클릭<br><img width="152" alt="스크린샷 2021-07-07 오후 11 49 11" src="https://user-images.githubusercontent.com/86812249/124787408-6e597b80-df83-11eb-97b0-9ae355c0245a.png"></p><p>view는 액세스키 사용할 일이 없으니 굳이 저장하지 말자<br><img width="1053" alt="스크린샷 2021-07-07 오후 11 49 23" src="https://user-images.githubusercontent.com/86812249/124787410-6e597b80-df83-11eb-9013-817c7c491916.png"></p><p>IAM ‘admin’ 으로 로그인 해보자 (다른 브라우저로 접속 권장, 다시 로그인하기 귀찮기 때문에 ㅎㅎ…)<br><img width="392" alt="스크린샷 2021-07-07 오후 11 50 30" src="https://user-images.githubusercontent.com/86812249/124787412-6ef21200-df83-11eb-9017-55118e253828.png"></p><p>s3 -&gt; <code>버킷 만들기</code> 클릭<br><img width="187" alt="스크린샷 2021-07-07 오후 11 51 50" src="https://user-images.githubusercontent.com/86812249/124787413-6f8aa880-df83-11eb-8fd9-f617f07f8a22.png"></p><p>이름 마음대로 설정 후, <code>버킷 만들기</code> 클릭<br><img width="759" alt="스크린샷 2021-07-07 오후 11 52 14" src="https://user-images.githubusercontent.com/86812249/124787415-6f8aa880-df83-11eb-887d-865a0c01a6e8.png"><br><img width="203" alt="스크린샷 2021-07-07 오후 11 52 17" src="https://user-images.githubusercontent.com/86812249/124787416-70233f00-df83-11eb-9f9a-d844b0fd103d.png"></p><p>만들어졌습니당<br><img width="910" alt="스크린샷 2021-07-07 오후 11 52 58" src="https://user-images.githubusercontent.com/86812249/124787418-70bbd580-df83-11eb-93c3-8b03e5770a75.png"></p><p><code>삭제</code> 클릭 -&gt; <code>버킷 삭제</code> 클릭<br><img width="101" alt="스크린샷 2021-07-07 오후 11 53 08" src="https://user-images.githubusercontent.com/86812249/124787423-70bbd580-df83-11eb-8537-64237cc8c8c9.png"><br><img width="848" alt="스크린샷 2021-07-07 오후 11 53 19" src="https://user-images.githubusercontent.com/86812249/124787426-71546c00-df83-11eb-8b64-fb287f651a6d.png"></p><p>삭제도 가능하네요 !<br><img width="890" alt="스크린샷 2021-07-07 오후 11 53 25" src="https://user-images.githubusercontent.com/86812249/124787430-71ed0280-df83-11eb-913e-3892406a1d92.png"></p><p>이번엔 ‘viewuser’로 로그인 해봅시다<br><img width="366" alt="스크린샷 2021-07-07 오후 11 53 57" src="https://user-images.githubusercontent.com/86812249/124787433-71ed0280-df83-11eb-8421-93b03634c706.png"></p><p>s3 -&gt; <code>버킷 만들기</code> 클릭<br><img width="146" alt="스크린샷 2021-07-07 오후 11 55 05" src="https://user-images.githubusercontent.com/86812249/124787439-731e2f80-df83-11eb-9f4c-fe883b71eb20.png"></p><p>이름 마음대로 설정 후, <code>버킷 만들기</code> 클릭<br><img width="852" alt="스크린샷 2021-07-07 오후 11 55 19" src="https://user-images.githubusercontent.com/86812249/124787440-731e2f80-df83-11eb-909c-a2e7ed581757.png"><br><img width="156" alt="스크린샷 2021-07-07 오후 11 55 23" src="https://user-images.githubusercontent.com/86812249/124787442-73b6c600-df83-11eb-94df-b4ccece6e0f6.png"></p><p>만들어지지 않습니다 이 IAM 계정에는 <code>볼 수 있는 권한</code>밖에 없기 때문이죠<br><img width="828" alt="스크린샷 2021-07-07 오후 11 55 29" src="https://user-images.githubusercontent.com/86812249/124787447-744f5c80-df83-11eb-938a-c6062b10ce72.png"></p><h2 id="실습-admin-사용자로-AWS-CLI-사용하기"><a href="#실습-admin-사용자로-AWS-CLI-사용하기" class="headerlink" title="실습) admin 사용자로 AWS CLI 사용하기"></a>실습) admin 사용자로 AWS CLI 사용하기</h2><p>저는 귀찮아서 그냥 CLI 앱을 깔았습니다<br><img width="364" alt="스크린샷 2021-07-07 오후 11 57 41" src="https://user-images.githubusercontent.com/86812249/124787452-74e7f300-df83-11eb-83a8-a093bff61f46.png"></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"># aws cli 사용을 위한 자격 증명 설정<br>$ aws configure<br>AWS <span class="hljs-keyword">Access</span> Key ID [<span class="hljs-keyword">None</span>]: AKIAIOSFODNN7EXAMPLE<br>AWS Secret <span class="hljs-keyword">Access</span> Key [<span class="hljs-keyword">None</span>]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY<br><span class="hljs-keyword">Default</span> region <span class="hljs-type">name</span> [<span class="hljs-keyword">None</span>]: ap-northeast<span class="hljs-number">-2</span><br><span class="hljs-keyword">Default</span> output <span class="hljs-keyword">format</span> [<span class="hljs-keyword">None</span>]: <span class="hljs-keyword">table</span><br><br># 자격 증명 List 확인<br>$ aws configure list<br><br># VPC 정보 확인<br>$ aws ec2 describe-vpcs<br></code></pre></td></tr></table></figure><img width="480" alt="스크린샷 2021-07-08 오전 12 02 56" src="https://user-images.githubusercontent.com/86812249/124787456-75808980-df83-11eb-8989-3418247373c7.png"><img width="512" alt="스크린샷 2021-07-08 오전 12 03 40" src="https://user-images.githubusercontent.com/86812249/124787460-76192000-df83-11eb-93fe-23c09759f3b9.png"><img width="469" alt="스크린샷 2021-07-08 오전 12 03 49" src="https://user-images.githubusercontent.com/86812249/124787462-76192000-df83-11eb-915d-b2376b64f529.png"><h2 id="실습-IAM-Role"><a href="#실습-IAM-Role" class="headerlink" title="실습) IAM Role"></a>실습) IAM Role</h2><p>CloudFormation 스택 생성 클릭 후 밑에 링크 클릭</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">https</span>://ap-northeast-<span class="hljs-number">2</span>.console.aws.amazon.com/cloudformation/home?region=ap-northeast-<span class="hljs-number">2</span>#/stacks/new?stackName=IamLab&amp;templateURL=https:%<span class="hljs-number">2</span>F%<span class="hljs-number">2</span>Fs3.ap-northeast-<span class="hljs-number">2</span>.amazonaws.com%<span class="hljs-number">2</span>Fcloudformation.cloudneta.net%<span class="hljs-number">2</span>FIAM%<span class="hljs-number">2</span>Fiamlab.yaml<br></code></pre></td></tr></table></figure><p>맨 하단에 <code>다음</code> 클릭<br><img alt="2021-07-08 오전 12 04 28" src="https://user-images.githubusercontent.com/86812249/124787466-76b1b680-df83-11eb-8f79-d98b7991a216.png"></p><p>하단에 키값 설정 후 <code>다음</code> 클릭<br><img alt="스크린샷 2021-07-08 오전 12 04 43" src="https://user-images.githubusercontent.com/86812249/124787469-774a4d00-df83-11eb-804b-86a999b3ed7f.png"></p><p>기본 값으로 둔 후 -&gt; <code>다음</code> 클릭<br><img alt="스크린샷 2021-07-08 오전 12 04 49" src="https://user-images.githubusercontent.com/86812249/124787471-774a4d00-df83-11eb-9dbc-b4b25eeed46f.png"></p><p>하단에 파란박스 체크 후에 <code>스택 생성</code> 클릭<br><img alt="스크린샷 2021-07-08 오전 12 04 57" src="https://user-images.githubusercontent.com/86812249/124787479-77e2e380-df83-11eb-9612-c4c3ec5f9e58.png"></p><p>만들어졌습니당<br><img alt="스크린샷 2021-07-08 오전 12 05 04" src="https://user-images.githubusercontent.com/86812249/124787481-787b7a00-df83-11eb-8b42-e98cf35fb9a9.png"></p><p>EC2 -&gt; <code>인스턴스</code> 클릭<br>EC2가 생성되고 있네요 !<br><img alt="스크린샷 2021-07-08 오전 12 05 52" src="https://user-images.githubusercontent.com/86812249/124787483-79141080-df83-11eb-824d-dfcf5344fb8b.png"></p><p><code>S3IAMRoleEC2</code>에 들어가보면 IAM 역할에 <code>STGLabInstanceRole</code>이 적용된 게 보이실 겁니다<br><img alt="스크린샷 2021-07-08 오전 12 06 24" src="https://user-images.githubusercontent.com/86812249/124787486-79141080-df83-11eb-9ad1-04ee3afb65aa.png"></p><p><code>BasicEC2 SSH</code> 접속</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"># aws cli 사용을 위한 자격 증명 설정 (<span class="hljs-keyword">admin</span>)<br>$ aws configure<br>AWS <span class="hljs-keyword">Access</span> Key ID [<span class="hljs-keyword">None</span>]: AKIAIOSFODNN7EX####<br>AWS Secret <span class="hljs-keyword">Access</span> Key [<span class="hljs-keyword">None</span>]: wJalrXUtnFEMI/K7MD####<br><span class="hljs-keyword">Default</span> region <span class="hljs-type">name</span> [<span class="hljs-keyword">None</span>]: ap-northeast<span class="hljs-number">-2</span><br><span class="hljs-keyword">Default</span> output <span class="hljs-keyword">format</span> [<span class="hljs-keyword">None</span>]: <span class="hljs-keyword">table</span><br><br># 자격 증명 List 확인<br>$ aws configure list<br><br># ec2 조회<br>aws ec2 describe-instances<br></code></pre></td></tr></table></figure><img alt="스크린샷 2021-07-08 오전 12 06 27" src="https://user-images.githubusercontent.com/86812249/124787490-79aca700-df83-11eb-988c-c658cbbc7fed.png"><img width="307" alt="스크린샷 2021-07-08 오전 12 11 12" src="https://user-images.githubusercontent.com/86812249/124787491-7a453d80-df83-11eb-9ea6-0b778312b2dc.png"><img width="514" alt="스크린샷 2021-07-08 오전 12 11 33" src="https://user-images.githubusercontent.com/86812249/124787493-7a453d80-df83-11eb-8edc-57350f6c9766.png"><p><code>S3IAMRoleEC2</code>에 아이디를 복사</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta"># S3IAMRoleEC2 재시작</span><br>aws ec2 reboot-instances --instance-ids <span class="hljs-string">&#x27;S3IAMRoleEC2&#x27;</span><br><span class="hljs-built_in">ping</span> <span class="hljs-string">&#x27;S3IAMRoleEC2&#x27;</span><br></code></pre></td></tr></table></figure><img width="569" alt="스크린샷 2021-07-08 오전 12 12 11" src="https://user-images.githubusercontent.com/86812249/124787494-7addd400-df83-11eb-9382-06345949bf20.png"><img alt="스크린샷 2021-07-08 오전 12 14 23" src="https://user-images.githubusercontent.com/86812249/124787497-7b766a80-df83-11eb-9b43-2a5cf94623ff.png"><img alt="스크린샷 2021-07-08 오전 12 14 27" src="https://user-images.githubusercontent.com/86812249/124787501-7b766a80-df83-11eb-9eca-db1f36d7b47e.png"><img width="568" alt="스크린샷 2021-07-08 오전 12 14 45" src="https://user-images.githubusercontent.com/86812249/124787503-7c0f0100-df83-11eb-9386-6c84d4f7acf2.png"><img width="550" alt="스크린샷 2021-07-08 오전 12 14 53" src="https://user-images.githubusercontent.com/86812249/124787507-7ca79780-df83-11eb-91b5-cdb585c7796d.png"><p>S3IAMRoleEC2 SSH 접속 → 자격 증명 없이도 S3 사용 가능</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 현재 EC2에 적용된 IAM Role(EC2 Profile) 정보 확인</span><br>curl http:<span class="hljs-regexp">//</span><span class="hljs-number">169.254</span>.<span class="hljs-number">169.254</span><span class="hljs-regexp">/latest/m</span>eta-data<span class="hljs-regexp">/iam/</span>security-credentials/STGLabInstanceRole<br><br><span class="hljs-comment"># S3 버킷 조회</span><br>aws s3 ls<br><br><span class="hljs-comment"># S3 버킷 생성</span><br>aws s3 mb s3:<span class="hljs-regexp">//</span>버킷(유일한 이름) --region ap-northeast-<span class="hljs-number">2</span><br><br><span class="hljs-comment"># S3 버킷 삭제</span><br>aws s3 rm s3:<span class="hljs-regexp">//</span>버킷<br></code></pre></td></tr></table></figure><img width="485" alt="스크린샷 2021-07-08 오전 12 15 53" src="https://user-images.githubusercontent.com/86812249/124787509-7ca79780-df83-11eb-9a1b-e7b3d8cd3327.png"><img width="557" alt="스크린샷 2021-07-08 오전 12 17 33" src="https://user-images.githubusercontent.com/86812249/124787513-7dd8c480-df83-11eb-995f-1b78ae0c513a.png"><img width="290" alt="스크린샷 2021-07-08 오전 12 17 44" src="https://user-images.githubusercontent.com/86812249/124787517-7e715b00-df83-11eb-97c7-226655a547fb.png"><img width="565" alt="스크린샷 2021-07-08 오전 12 18 17" src="https://user-images.githubusercontent.com/86812249/124787521-7e715b00-df83-11eb-93ec-b3d824d04925.png"><img width="567" alt="스크린샷 2021-07-08 오전 12 19 28" src="https://user-images.githubusercontent.com/86812249/124787539-80d3b500-df83-11eb-9755-df3e14aa8f67.png"><img width="300" alt="스크린샷 2021-07-08 오전 12 19 40" src="https://user-images.githubusercontent.com/86812249/124787540-816c4b80-df83-11eb-948f-1e3bc5f9c8b3.png"><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-comment"># VPC 정보 확인</span><br><span class="hljs-variable">$ </span>aws ec2 describe-vpcs<br></code></pre></td></tr></table></figure><p>권한이 없어서 VPC 확인을 하지 못합니다<br><img width="566" alt="스크린샷 2021-07-08 오전 12 20 04" src="https://user-images.githubusercontent.com/86812249/124787542-816c4b80-df83-11eb-81a6-ca4e5eff489f.png"></p><h2 id="실습-IAM-Policy"><a href="#실습-IAM-Policy" class="headerlink" title="실습) IAM Policy"></a>실습) IAM Policy</h2><p>IAM → 사용자 → <code>admin</code> 클릭 → 권한에 <code>+ 인라인 정책 추가</code> 클릭<br><img width="290" alt="스크린샷 2021-07-08 오전 12 20 32" src="https://user-images.githubusercontent.com/86812249/124787546-8204e200-df83-11eb-856a-4c969aef775d.png"><br><img width="99" alt="스크린샷 2021-07-08 오전 12 20 48" src="https://user-images.githubusercontent.com/86812249/124787550-829d7880-df83-11eb-80e0-55de6fcbc0d9.png"><br><img width="344" alt="스크린샷 2021-07-08 오전 12 20 52" src="https://user-images.githubusercontent.com/86812249/124787553-829d7880-df83-11eb-94f7-4e9a419f5c76.png"></p><p><code>JSON</code> 클릭 후 아래 내용 입력 -&gt; <code>정책 검토</code> 클릭</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;Version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2012-10-17&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;Statement&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;Effect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Deny&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;Action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-string">&quot;ec2:RebootInstances&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;ec2:StopInstances&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;ec2:TerminateInstances&quot;</span><br>      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;Resource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;*&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><img width="144" alt="스크린샷 2021-07-08 오전 12 21 08" src="https://user-images.githubusercontent.com/86812249/124787556-83360f00-df83-11eb-99b8-fc97c93eda88.png"><img width="1260" alt="스크린샷 2021-07-08 오전 12 21 28" src="https://user-images.githubusercontent.com/86812249/124787558-83cea580-df83-11eb-8ad5-be23cd801764.png"><p>이름은 아무거나<br>하단에 <code>정책 생성</code> 클릭<br><img width="1254" alt="스크린샷 2021-07-08 오전 12 22 14" src="https://user-images.githubusercontent.com/86812249/124787565-84ffd280-df83-11eb-9658-623126cb434d.png"></p><p>정책이 생겼습니당<br><img width="699" alt="스크린샷 2021-07-08 오전 12 22 26" src="https://user-images.githubusercontent.com/86812249/124787567-85986900-df83-11eb-9f62-91d193e188d6.png"></p><p>다시 Basic 인스턴스 CLI로 돌아간 후</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment"># ec2 조회</span><br>aws ec2 describe-<span class="hljs-keyword">instances</span><br><span class="hljs-keyword"></span><br><span class="hljs-comment"># S3IAMRoleEC2 재시작</span><br>aws ec2 reboot-<span class="hljs-keyword">instances </span>--<span class="hljs-keyword">instance-ids </span><span class="hljs-string">&#x27;S3IAMRoleEC2&#x27;</span><br></code></pre></td></tr></table></figure><img width="561" alt="스크린샷 2021-07-08 오전 12 22 52" src="https://user-images.githubusercontent.com/86812249/124787571-85986900-df83-11eb-82f8-a95f1ecb14b0.png"><p>재시작은 안 되는 걸 볼 수 있다. 아까 추가한 인라인 정책 중 Deny 항목에 <strong>ec2:RebootInstances</strong>이 있었기 때문이다<br><img width="609" alt="스크린샷 2021-07-08 오전 12 25 41" src="https://user-images.githubusercontent.com/86812249/124787574-8630ff80-df83-11eb-9f17-34c8efd419ae.png"></p><h2 id="자원-삭제-중요"><a href="#자원-삭제-중요" class="headerlink" title="자원 삭제 (중요!)"></a>자원 삭제 (중요!)</h2><h3 id="IAM-User-삭제-admin-viewuser"><a href="#IAM-User-삭제-admin-viewuser" class="headerlink" title="IAM User 삭제(admin, viewuser)"></a>IAM User 삭제(admin, viewuser)</h3><h3 id="CloudFormation-삭제"><a href="#CloudFormation-삭제" class="headerlink" title="CloudFormation 삭제"></a>CloudFormation 삭제</h3><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 5주차-1 보안 서비스</title>
    <link href="/2021/07/07/2021-07-07-AFOS-1/"/>
    <url>/2021/07/07/2021-07-07-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h2 id="AWS-사용하는-3가지-방법"><a href="#AWS-사용하는-3가지-방법" class="headerlink" title="AWS 사용하는 3가지 방법"></a>AWS 사용하는 3가지 방법</h2><h2 id="1-관리-콘솔로-리소스-만들기"><a href="#1-관리-콘솔로-리소스-만들기" class="headerlink" title="1.관리 콘솔로 리소스 만들기"></a>1.관리 콘솔로 리소스 만들기</h2><ul><li>쉽게 시작 가능</li><li>반복 작업에 적합 X</li><li>시간이 오래 걸림</li></ul><span id="more"></span><h2 id="2-코드-형태의-명령형-인프라-CLI-Command-Line-Interface"><a href="#2-코드-형태의-명령형-인프라-CLI-Command-Line-Interface" class="headerlink" title="2.코드 형태의 명령형 인프라 : CLI(Command Line Interface)"></a>2.코드 형태의 명령형 인프라 : CLI(Command Line Interface)</h2><ul><li>반복 작업에 적합</li><li>원하는 항목에 대한 수정이 용이</li><li>리소스의 준비 상태 확인이 어려움</li><li>문제 발생 시 복원이 어려움</li></ul><h2 id="3-코드로서의-선언적-인프라-AWS-CloudFormation-template-HashiCorp-Configuation-Language-HCL"><a href="#3-코드로서의-선언적-인프라-AWS-CloudFormation-template-HashiCorp-Configuation-Language-HCL" class="headerlink" title="3.코드로서의 선언적 인프라 : AWS CloudFormation template, HashiCorp Configuation Language(HCL)"></a>3.코드로서의 선언적 인프라 : AWS CloudFormation template, HashiCorp Configuation Language(HCL)</h2><ul><li>자동화 구현에 용이</li><li>반복 작업에 적합</li><li>에러 발생 시 원상 복구가 쉬움</li><li>최초 구현이 복잡함</li></ul><h2 id="4-AWS-CDK-DOM-모델-기반-Cloud-Development-Kit"><a href="#4-AWS-CDK-DOM-모델-기반-Cloud-Development-Kit" class="headerlink" title="4.AWS CDK(DOM 모델 기반, Cloud Development Kit)"></a>4.AWS CDK(DOM 모델 기반, Cloud Development Kit)</h2><ul><li>친숙한 개발 언어로 작성</li><li>단일 생성자를 기반으로 많은 AWS 리소스를 생성</li><li>생성자는 간단한 클래스로 각각의 스택을 구성</li><li>여전히 선언적이지만, 생성과 업데이트를 처리할 필요가 없음</li></ul><h3 id="결국-API-모든-방식은-결국-AWS-리소스를-사용-시-혹은-AWS-리소스들간-최종적으로는-API-Application-Programming-Interface-를-사용"><a href="#결국-API-모든-방식은-결국-AWS-리소스를-사용-시-혹은-AWS-리소스들간-최종적으로는-API-Application-Programming-Interface-를-사용" class="headerlink" title="결국 API : 모든 방식은 결국 AWS 리소스를 사용 시 혹은 AWS 리소스들간 최종적으로는 API(Application Programming Interface)를 사용"></a>결국 API : 모든 방식은 결국 AWS 리소스를 사용 시 혹은 AWS 리소스들간 최종적으로는 API(Application Programming Interface)를 사용</h3><h2 id="AWS의-shared-responsibility-model"><a href="#AWS의-shared-responsibility-model" class="headerlink" title="AWS의 shared responsibility model"></a>AWS의 shared responsibility model</h2><ul><li>어떤 환경을 사용하더라도 AWS IAM 필요로 하고, 관리 주체와 책은 고객이다.</li></ul><h2 id="AWS-IAM-Identify-and-Access-Management"><a href="#AWS-IAM-Identify-and-Access-Management" class="headerlink" title="AWS IAM(Identify and Access Management)"></a>AWS IAM(Identify and Access Management)</h2><ul><li>AWS 전체의 권한 통제 시스템 &#x3D;&gt; <strong>인증</strong> + <strong>인가</strong></li><li>인증 : 누구시죠? 정체를 밝혀라 ! (Identity)</li><li>인가 : 권한 있으세요 ? (Access Management)</li></ul><h2 id="IAM-User-사용자-vs-IAM-Group-그룹"><a href="#IAM-User-사용자-vs-IAM-Group-그룹" class="headerlink" title="IAM User(사용자) vs IAM Group(그룹)"></a>IAM User(사용자) vs IAM Group(그룹)</h2><ul><li>IAM Group 은 동일한 권한을 가져야 하는 IAM User 에게 권한을 설정하는 것을 편리하게 하기 위함이며, IAM Group 이 보안 주체가 될 수 없음</li><li>IAM User는 최대 10개의 Group에 속할 수 있음</li></ul><h2 id="AWS-IAM-정책-Policy-의-JSON-구조"><a href="#AWS-IAM-정책-Policy-의-JSON-구조" class="headerlink" title="AWS IAM 정책(Policy)의 JSON 구조"></a>AWS IAM 정책(Policy)의 JSON 구조</h2><ul><li>IAM Policy 는 AWS 서비스와 리소스에 대한 <strong>인가 기능</strong>을 제공</li><li>IAM 은 여러분이 정의한 Policy 를 기반으로 AWS 요청을 검사&#x2F; 평가 하게 되며 최종적으로 허용 혹은 차단을 결정</li></ul><h2 id="IAM-advanced"><a href="#IAM-advanced" class="headerlink" title="IAM advanced"></a>IAM advanced</h2><h2 id="AWS-계정의-활동-모니터링-및-감사"><a href="#AWS-계정의-활동-모니터링-및-감사" class="headerlink" title="AWS 계정의 활동 모니터링 및 감사"></a>AWS 계정의 활동 모니터링 및 감사</h2><pre><code class="hljs">* AWS CloudTrail - API 로깅, 감사 활동의 핵심* AWS IAM Access analyzer - 외부 엔터티와 공유되는 리소스 식별* Amazon GuardDuty - 위협탐지 서비스* AWS Security Hub - 통합 대쉬보드</code></pre><h2 id="속성-기반-접근-제어"><a href="#속성-기반-접근-제어" class="headerlink" title="속성 기반 접근 제어"></a>속성 기반 접근 제어</h2><ul><li>Before : 기존의 RBAC 방식 - 메번 개별적인 권한 관리 운영이 필요함</li><li>ABCA : Attribute Based Access Control<ul><li>IAM 보안 주체의 요소(attribute, 태그)를 이용해서 단일 policy 로 각기 다른 리소스에서 재사용가능한 접근 제어</li></ul></li><li>After : 보안 주체가 가진 태그와 리소스가 가진 태그의 일치를 확인으로 권한 부여 가능 -&gt; 동적인 권한 부여 기능</li></ul><h2 id="Key-take-away"><a href="#Key-take-away" class="headerlink" title="Key take away"></a>Key take away</h2><ul><li>Everything API, AWS 사용자들에게 IAM은 피할 수 없는 숙명</li><li>IAM의 인증과 인가</li><li>정책의 구조와 종류</li><li>IAM 운영은 모범 사례에 맞춰서</li><li>Beyond IAM, 워크로드 보안</li></ul><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 4주차-3 AWS S3 실습</title>
    <link href="/2021/07/01/2021-06-30-AFOS-3/"/>
    <url>/2021/07/01/2021-06-30-AFOS-3/</url>
    
    <content type="html"><![CDATA[<h2 id="Public-S3-버킷-생성"><a href="#Public-S3-버킷-생성" class="headerlink" title="Public S3 버킷 생성"></a>Public S3 버킷 생성</h2><p><code>S3</code>에서 <code>버킷 만들기</code> 클릭<br><br/></p><img width="176" alt="스크린샷 2021-07-02 오후 10 02 47" src="https://user-images.githubusercontent.com/86812249/124284576-16d49d80-db88-11eb-905c-8fa6d4acdf60.png"><br/><p>이름: 유니크한 걸로 ! (<strong>icebear-afos-s3로 바꿨습니다.</strong>), <code>모든 퍼블릭 액세스 차단</code> 해제 후, 하단에 <code>현재 설정으로 인해 ~</code> 체크해주기<br><br/></p><img width="882" alt="스크린샷 2021-07-02 오후 10 03 00" src="https://user-images.githubusercontent.com/86812249/124284585-1805ca80-db88-11eb-865f-d54125b888cd.png"><img width="849" alt="스크린샷 2021-07-02 오후 10 03 13" src="https://user-images.githubusercontent.com/86812249/124284596-19cf8e00-db88-11eb-929b-81db2d36b905.png"><br/><p><code>버킷 만들기</code> 클릭<br><br/></p><img width="214" alt="스크린샷 2021-07-02 오후 10 03 24" src="https://user-images.githubusercontent.com/86812249/124284602-1b00bb00-db88-11eb-89f4-54fba4cad937.png"><br/><p>만든 버킷 안에 들어가서 <code>업로드</code> 클릭<br><br/></p><img width="245" alt="스크린샷 2021-07-02 오후 10 04 10" src="https://user-images.githubusercontent.com/86812249/124284603-1b00bb00-db88-11eb-8f8a-650fbea971b1.png"><br/><p>업로드할 사진 올려주기 ! (아무 사진)<br><br/></p><img width="872" alt="스크린샷 2021-07-02 오후 10 04 28" src="https://user-images.githubusercontent.com/86812249/124284605-1b995180-db88-11eb-989d-1a315d957cdc.png"><br/><p><code>업로드</code> 클릭<br><br/></p><img width="224" alt="스크린샷 2021-07-02 오후 10 04 42" src="https://user-images.githubusercontent.com/86812249/124284610-1b995180-db88-11eb-9ff1-368c703e7a14.png"><br/><p>짜쟌<br><br/></p><img width="232" alt="스크린샷 2021-07-02 오후 10 05 19" src="https://user-images.githubusercontent.com/86812249/124284615-1cca7e80-db88-11eb-922a-344f2eba5138.png"><br/><p>파일에 들어가서 <code>객체 URL</code>를 복사해 웹으로 접속하면<br><br/></p><img width="601" alt="스크린샷 2021-07-02 오후 10 05 48" src="https://user-images.githubusercontent.com/86812249/124284618-1cca7e80-db88-11eb-878f-987f73a0cb99.png"><br/><p>접근 거부가 된다. 다른 사람이 볼 수 있게 설정해 줘야 한다.<br><br/></p> <img width="823" alt="스크린샷 2021-07-02 오후 10 06 48" src="https://user-images.githubusercontent.com/86812249/124284627-1dfbab80-db88-11eb-86ac-88f965ffef6c.png"><br/><p>사진을 클릭 후에, <code>작업</code>을 눌러서 <code>퍼블릭으로 설정</code>을 눌러주자<br><br/></p><img width="944" alt="스크린샷 2021-07-02 오후 10 05 12" src="https://user-images.githubusercontent.com/86812249/124284613-1c31e800-db88-11eb-91f0-988ac3bf6245.png"><br/><p>하단에 <code>퍼블릭 설정</code>을 눌러주자<br><br/><br><img width="232" alt="스크린샷 2021-07-02 오후 10 05 19" src="https://user-images.githubusercontent.com/86812249/124284615-1cca7e80-db88-11eb-922a-344f2eba5138.png"><br><br/></p><p>사진이 드디어 보입니다 !<br><br/></p><img width="993" alt="스크린샷 2021-07-02 오후 10 06 01" src="https://user-images.githubusercontent.com/86812249/124293490-b0ed1380-db91-11eb-9c10-ce6efe18bae5.png"><br/><p>사진에 들어가서 객체 URL를 복사한다.<br><code>STG1 인스턴스</code>에 들어가서 웹서버의 <code>index.html</code> 파일을 수정</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-comment">#root 권한으로 변경</span><br>sudo su<br><br><span class="hljs-comment"># index.html 파일 양식</span><br>cat <span class="hljs-variable">&lt;&lt;EOF&gt;</span> /var/www/html/index.html<br><span class="hljs-variable">&lt;html&gt;</span><br><span class="hljs-variable">&lt;body&gt;</span><br><span class="hljs-variable">&lt;h1&gt;</span>닉네임 S3 Storage<span class="hljs-variable">&lt;br&gt;</span><br><span class="hljs-variable">&lt;img src=&quot;https://S3 객체 URL 주소 입력&quot;&gt;</span><br><span class="hljs-variable">&lt;/body&gt;</span><br><span class="hljs-variable">&lt;/html&gt;</span><br>EOF<br></code></pre></td></tr></table></figure><br/><img width="668" alt="스크린샷 2021-07-02 오후 10 10 27" src="https://user-images.githubusercontent.com/86812249/124284640-1fc56f00-db88-11eb-8a0d-6d07c2dc906f.png"><img width="293" alt="스크린샷 2021-07-02 오후 10 09 18" src="https://user-images.githubusercontent.com/86812249/124284632-1e944200-db88-11eb-815d-18d42d899adf.png"><img width="569" alt="스크린샷 2021-07-02 오후 10 11 15" src="https://user-images.githubusercontent.com/86812249/124284641-1fc56f00-db88-11eb-810c-5e401b0f8762.png"><br/><p><code>EC2</code> -&gt; <code>인스턴스</code>에서 <code>퍼블릭 IPv4주소</code>를 복사하자<br><br/></p><img width="510" alt="스크린샷 2021-07-02 오후 10 09 54" src="https://user-images.githubusercontent.com/86812249/124284638-1f2cd880-db88-11eb-8ec2-51debddbae34.png"><br/><p>성공 !<br><br/></p><img width="1079" alt="스크린샷 2021-07-02 오후 10 11 31" src="https://user-images.githubusercontent.com/86812249/124293706-e72a9300-db91-11eb-8de7-f74a0cce7e9e.png"><br/><h2 id="옵션-지랑하기"><a href="#옵션-지랑하기" class="headerlink" title="옵션) 지랑하기"></a>옵션) 지랑하기</h2><p><code>S3에서 만든 버킷</code> -&gt; <code>업로드</code> 클릭<br><br/><br><img width="186" alt="스크린샷 2021-07-02 오후 10 12 14" src="https://user-images.githubusercontent.com/86812249/124284644-20f69c00-db88-11eb-99d7-803f1f49f96d.png"><br><br/></p><p>바다 영상을 올립니다.<br><Br/><br><img width="890" alt="스크린샷 2021-07-02 오후 10 12 37" src="https://user-images.githubusercontent.com/86812249/124284647-218f3280-db88-11eb-841c-4895949a2750.png"><br><br/></p><p><code>업로드</code> 클릭 !<br><br/></p><img width="233" alt="스크린샷 2021-07-02 오후 10 12 40" src="https://user-images.githubusercontent.com/86812249/124284649-218f3280-db88-11eb-8d94-082f46bf47fc.png"><br/><p>이전 사진처럼 퍼블릭으로 설정해줘야 접속이 가능<br><br/></p><img width="892" alt="스크린샷 2021-07-02 오후 10 12 57" src="https://user-images.githubusercontent.com/86812249/124284651-2227c900-db88-11eb-8600-bba7ef66a0d8.png"><img width="273" alt="스크린샷 2021-07-02 오후 10 13 01" src="https://user-images.githubusercontent.com/86812249/124284653-2227c900-db88-11eb-8b33-7cf0e683f083.png"><br/><p><code>바다.mp4</code>에 들어가서 <code>객체 URL</code> 복사<br><br/><br><img width="693" alt="스크린샷 2021-07-02 오후 10 13 10" src="https://user-images.githubusercontent.com/86812249/124284655-22c05f80-db88-11eb-9080-736cee1c5555.png"><br><br/></p><p>성공 ~<br><br/><br><img width="914" alt="스크린샷 2021-07-02 오후 10 13 24" src="https://user-images.githubusercontent.com/86812249/124284659-22c05f80-db88-11eb-9de7-e3b896a7fa08.png"><br><br/></p><h2 id="옵션-결과"><a href="#옵션-결과" class="headerlink" title="옵션 결과)"></a>옵션 결과)</h2><p>지금은 11시 20분 .. 제 친구들은 다들 새나라 어린이인가 봅니다<br><br/></p><img width="481" alt="스크린샷 2021-07-02 오후 11 20 10" src="https://user-images.githubusercontent.com/86812249/124288402-1a6a2380-db8c-11eb-99a0-dbf21b3869f6.png"><br/><h2 id="옵션-객체마다-모든-사람-읽기를-체크하지-않고-버킷에-객체가-업로드-gt-자동으로-모든-사람-읽기-기능"><a href="#옵션-객체마다-모든-사람-읽기를-체크하지-않고-버킷에-객체가-업로드-gt-자동으로-모든-사람-읽기-기능" class="headerlink" title="옵션) 객체마다 모든 사람 읽기를 체크하지 않고 버킷에 객체가 업로드 -&gt; 자동으로 모든 사람 읽기 기능"></a>옵션) 객체마다 모든 사람 읽기를 <code>체크</code>하지 않고 버킷에 객체가 업로드 -&gt; 자동으로 모든 사람 읽기 기능</h2><p><code>만든 S3 버킷</code>에서 <code>권한</code> 클릭<br><br/><br><img width="337" alt="스크린샷 2021-07-02 오후 10 16 51" src="https://user-images.githubusercontent.com/86812249/124284664-2358f600-db88-11eb-951a-ac2274c78bf9.png"><br><br/></p><p>버킷 정책에 <code>편집</code> 클릭<br><br/></p><img width="1208" alt="스크린샷 2021-07-02 오후 10 17 15" src="https://user-images.githubusercontent.com/86812249/124284669-23f18c80-db88-11eb-8307-027185a79795.png"><br/><p>정책에 붙여놓기 하기</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs prolog">&#123;<br>  <span class="hljs-string">&quot;Version&quot;</span>: <span class="hljs-string">&quot;2012-10-17&quot;</span>,<br>  <span class="hljs-string">&quot;Statement&quot;</span>: [<br>    &#123;<br>      <span class="hljs-string">&quot;Sid&quot;</span>: <span class="hljs-string">&quot;PublicReadGetObject&quot;</span>,<br>      <span class="hljs-string">&quot;Effect&quot;</span>: <span class="hljs-string">&quot;Allow&quot;</span>,<br>      <span class="hljs-string">&quot;Principal&quot;</span>: <span class="hljs-string">&quot;*&quot;</span>,<br>      <span class="hljs-string">&quot;Action&quot;</span>: [<br>        <span class="hljs-string">&quot;s3:GetObject&quot;</span><br>        ],<br>      <span class="hljs-string">&quot;Resource&quot;</span>: [<br>        <span class="hljs-string">&quot;arn:aws:s3:::BUCKET_NAME/*&quot;</span><br>        ]<br>    &#125;<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure><br/><img width="841" alt="스크린샷 2021-07-02 오후 10 17 58" src="https://user-images.githubusercontent.com/86812249/124284672-248a2300-db88-11eb-81e1-1c49cfd3f0de.png"><br/><p><code>변경 사항 저장</code> 클릭<br><br/></p><img width="284" alt="스크린샷 2021-07-02 오후 10 18 05" src="https://user-images.githubusercontent.com/86812249/124284676-248a2300-db88-11eb-9608-c15a78a1f873.png"><br/><h2 id="테스트"><a href="#테스트" class="headerlink" title="테스트"></a>테스트</h2><p>사진을 올려주고 ‘업로드’ 클릭<br><br/><br><img width="878" alt="스크린샷 2021-07-02 오후 10 20 02" src="https://user-images.githubusercontent.com/86812249/124284678-2522b980-db88-11eb-8c29-1aa57f7fb25f.png"><br><img width="188" alt="스크린샷 2021-07-02 오후 10 20 05" src="https://user-images.githubusercontent.com/86812249/124284681-25bb5000-db88-11eb-80b7-d5ed3fe672b6.png"><br><br/></p><p>올린 사진에 들어가서 <code>객체 URL</code> 복사 클릭<br><br/></p><img width="661" alt="스크린샷 2021-07-02 오후 10 20 15" src="https://user-images.githubusercontent.com/86812249/124284683-25bb5000-db88-11eb-8f08-c67749cdbf34.png"><br/><p>이제 <code>퍼블릭</code>을 따로 설정해주지 않아도 됨<br><br/></p><img width="965" alt="스크린샷 2021-07-02 오후 10 20 27" src="https://user-images.githubusercontent.com/86812249/124284684-2653e680-db88-11eb-84e1-d5d5b07c6f9a.png"><br/><h2 id="Private-S3-실습-AWS-CLI-S3-사용"><a href="#Private-S3-실습-AWS-CLI-S3-사용" class="headerlink" title="Private S3 실습) AWS CLI-S3 사용"></a>Private S3 실습) AWS CLI-S3 사용</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-comment"># S3 조회</span><br>aws s3 <span class="hljs-keyword">ls</span><br><br><span class="hljs-comment"># 버킷 조회(하위 디렉터리 포함)</span><br>aws s3 <span class="hljs-keyword">ls</span> s3:<span class="hljs-string">//</span>버킷<br>aws s3 <span class="hljs-keyword">ls</span> s3:<span class="hljs-string">//</span>버킷 <span class="hljs-params">--recursive</span><br><br><span class="hljs-comment"># S3 버킷 생성</span><br>aws s3 mb s3:<span class="hljs-string">//</span>버킷<span class="hljs-params">(유일한 이름)</span> <span class="hljs-params">--region</span> ap-northeast-2<br><br><span class="hljs-comment"># 버킷 이름을 변수에 지정</span><br>MyS3=버킷<br><br><span class="hljs-comment"># 로컬 파일을 S3로 업로드</span><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;111&quot;</span> &gt; <span class="hljs-string">/var/www/html/111.txt</span><br>aws s3 cp <span class="hljs-string">/var/www/html/111.txt</span> s3:<span class="hljs-string">//</span>$MyS3<br>aws s3 <span class="hljs-keyword">ls</span> s3:<span class="hljs-string">//</span>$MyS3<br><br><span class="hljs-comment"># 웹 디렉터리(하위 포함)을 버킷에 업로드(백업)하기</span><br>tree <span class="hljs-string">/var/www/html</span><br>aws s3 sync <span class="hljs-params">--delete</span> <span class="hljs-string">/var/www/html</span> s3:<span class="hljs-string">//</span>$MyS3<br>aws s3 <span class="hljs-keyword">ls</span> s3:<span class="hljs-string">//</span>$MyS3 <span class="hljs-params">--recursive</span><br></code></pre></td></tr></table></figure><br/><img width="289" alt="스크린샷 2021-07-02 오후 10 20 50" src="https://user-images.githubusercontent.com/86812249/124284687-2653e680-db88-11eb-8807-685407733dab.png"><img width="558" alt="스크린샷 2021-07-02 오후 10 21 48" src="https://user-images.githubusercontent.com/86812249/124284689-26ec7d00-db88-11eb-902f-f1e6f5387895.png"><img width="553" alt="스크린샷 2021-07-02 오후 10 22 23" src="https://user-images.githubusercontent.com/86812249/124284692-26ec7d00-db88-11eb-9c36-eed250b5d7c0.png"><img width="567" alt="스크린샷 2021-07-02 오후 10 23 09" src="https://user-images.githubusercontent.com/86812249/124284695-27851380-db88-11eb-8447-a7fc637bc21d.png"><img width="365" alt="스크린샷 2021-07-02 오후 10 26 22" src="https://user-images.githubusercontent.com/86812249/124284700-281daa00-db88-11eb-83b2-e143104d0b72.png"><img width="451" alt="스크린샷 2021-07-02 오후 10 24 04" src="https://user-images.githubusercontent.com/86812249/124284699-281daa00-db88-11eb-90f6-078788ed16ae.png"><img width="508" alt="스크린샷 2021-07-02 오후 10 26 31" src="https://user-images.githubusercontent.com/86812249/124284703-28b64080-db88-11eb-86c6-4e67a34c7e96.png"><img width="361" alt="스크린샷 2021-07-02 오후 10 26 54" src="https://user-images.githubusercontent.com/86812249/124284706-28b64080-db88-11eb-8f33-99491c75528f.png"><img width="378" alt="스크린샷 2021-07-02 오후 10 27 43" src="https://user-images.githubusercontent.com/86812249/124284707-294ed700-db88-11eb-9141-b821ea23085d.png"><img width="561" alt="스크린샷 2021-07-02 오후 10 27 58" src="https://user-images.githubusercontent.com/86812249/124284712-29e76d80-db88-11eb-804d-1733e7a3593d.png"><img width="452" alt="스크린샷 2021-07-02 오후 10 28 39" src="https://user-images.githubusercontent.com/86812249/124284715-2a800400-db88-11eb-8d2f-9159776c7a37.png"><br/><h2 id="옵션-1분-마다-웹-디렉터리-하위-포함-을-버킷에-업로드-백업-하기-동기화하기"><a href="#옵션-1분-마다-웹-디렉터리-하위-포함-을-버킷에-업로드-백업-하기-동기화하기" class="headerlink" title="옵션) 1분 마다 웹 디렉터리(하위 포함)을 버킷에 업로드(백업)하기 -동기화하기"></a>옵션) 1분 마다 웹 디렉터리(하위 포함)을 버킷에 업로드(백업)하기 -동기화하기</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># crontab 내용 추가</span><br>cat &lt;&lt;EOF &gt;&gt; <span class="hljs-regexp">/etc/</span>crontab<br>*<span class="hljs-regexp">/1 * * * * root aws s3 sync --delete /</span>var<span class="hljs-regexp">/www/</span>html s3:<span class="hljs-regexp">//</span><span class="hljs-variable">$MyS3</span><br>EOF<br><br><span class="hljs-comment"># 적용 및 실시간 로그</span><br>systemctl restart crond<br>tail -f <span class="hljs-regexp">/var/</span>log/cron<br><br><span class="hljs-comment"># 파일 추가 생성</span><br>echo <span class="hljs-string">&quot;222&quot;</span> &gt; <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span><span class="hljs-number">222</span>.txt<br>echo <span class="hljs-string">&quot;333&quot;</span> &gt; <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span><span class="hljs-number">333</span>.txt<br><span class="hljs-keyword">while</span> true; <span class="hljs-keyword">do</span> aws s3 ls s3:<span class="hljs-regexp">//</span><span class="hljs-variable">$MyS3</span>; date; echo <span class="hljs-string">&quot;---[S3 ls]---&quot;</span>; sleep <span class="hljs-number">3</span>; done<br><br></code></pre></td></tr></table></figure><br/><img width="484" alt="스크린샷 2021-07-02 오후 10 31 00" src="https://user-images.githubusercontent.com/86812249/124284717-2a800400-db88-11eb-9319-2ccbab2545d0.png"><img width="565" alt="스크린샷 2021-07-02 오후 10 31 33" src="https://user-images.githubusercontent.com/86812249/124284721-2b189a80-db88-11eb-9fc8-79f9c308cdaa.png"><img width="460" alt="스크린샷 2021-07-02 오후 10 32 29" src="https://user-images.githubusercontent.com/86812249/124284722-2b189a80-db88-11eb-8c64-53d9fb5d110d.png"><img width="561" alt="스크린샷 2021-07-02 오후 10 33 40" src="https://user-images.githubusercontent.com/86812249/124284726-2bb13100-db88-11eb-8655-0d7812d5c354.png"><br/><h2 id="옵션-Pre-sign-URL-현재-버킷의-객체는-외부에서-접근이-불가능하지만-특정-기간-동안-특정-객체-다운-허용"><a href="#옵션-Pre-sign-URL-현재-버킷의-객체는-외부에서-접근이-불가능하지만-특정-기간-동안-특정-객체-다운-허용" class="headerlink" title="옵션) Pre-sign URL 현재 버킷의 객체는 외부에서 접근이 불가능하지만 특정 기간 동안 특정 객체 다운 허용"></a>옵션) Pre-sign URL 현재 버킷의 객체는 외부에서 접근이 불가능하지만 특정 기간 동안 특정 객체 다운 허용</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 파일 생성</span><br>echo <span class="hljs-string">&quot;presigned test&quot;</span> &gt; <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>presigned.txt<br>aws s3 cp <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>presigned.txt s3:<span class="hljs-regexp">//</span><span class="hljs-variable">$MyS3</span><br><br><span class="hljs-comment"># 직접 객체 URL 바로 접속 시 안됨</span><br><br><span class="hljs-comment"># Pre-sign URL 생성 : 120초</span><br>aws s3 presign s3:<span class="hljs-regexp">//</span><span class="hljs-variable">$MyS3</span>/presigned.txt --expires-<span class="hljs-keyword">in</span> <span class="hljs-number">120</span><br></code></pre></td></tr></table></figure><br/><img width="568" alt="스크린샷 2021-07-02 오후 10 34 57" src="https://user-images.githubusercontent.com/86812249/124284727-2c49c780-db88-11eb-890d-3d865d5c812f.png"><img width="564" alt="스크린샷 2021-07-02 오후 10 36 39" src="https://user-images.githubusercontent.com/86812249/124292227-4daeb180-db90-11eb-9334-20181976d612.png"><br/><p>위에 링크를 복사해서 접속하면 접속이 된다.<br><br/></p><img width="527" alt="스크린샷 2021-07-02 오후 10 37 03" src="https://user-images.githubusercontent.com/86812249/124292235-51423880-db90-11eb-965c-3b72618b3896.png"><br/><h2 id="그럼-s3-객체-URL은-접속이-되나"><a href="#그럼-s3-객체-URL은-접속이-되나" class="headerlink" title="그럼 s3 객체 URL은 접속이 되나 ?"></a>그럼 s3 객체 URL은 접속이 되나 ?</h2><p><code>Private 버킷</code>에 들어가서 <code>presigned.txt</code>를 클릭<br><br/></p><img width="1034" alt="스크린샷 2021-07-02 오후 10 35 33" src="https://user-images.githubusercontent.com/86812249/124284731-2c49c780-db88-11eb-9f29-f22cecef59a7.png"><br/><p><code>객체 URL</code> 복사<br><br/></p><img width="526" alt="스크린샷 2021-07-02 오후 10 35 39" src="https://user-images.githubusercontent.com/86812249/124284732-2ce25e00-db88-11eb-810c-2c13f85bee23.png"><br/><p>당연히 안 된다.<br><br/></p><img width="813" alt="스크린샷 2021-07-02 오후 10 35 48" src="https://user-images.githubusercontent.com/86812249/124284733-2d7af480-db88-11eb-871c-d5392c776b38.png"><br/><h2 id="심화-x2F-옵션-S3-Browser-통해서-S3-버킷-보기"><a href="#심화-x2F-옵션-S3-Browser-통해서-S3-버킷-보기" class="headerlink" title="심화&#x2F;옵션)S3 Browser 통해서 S3 버킷 보기"></a>심화&#x2F;옵션)S3 Browser 통해서 S3 버킷 보기</h2><ul><li>맥북이라 못 한다..ㅠ 아쉽다<br/></li></ul><img width="759" alt="스크린샷 2021-07-03 오전 12 04 34" src="https://user-images.githubusercontent.com/86812249/124294162-5a340980-db92-11eb-9f61-1ad534692da8.png"><br/><br/><br/><h2 id="자원-삭제-중요"><a href="#자원-삭제-중요" class="headerlink" title="자원 삭제(중요!)"></a>자원 삭제(중요!)</h2><h3 id="EC2-인스턴스-종료"><a href="#EC2-인스턴스-종료" class="headerlink" title="EC2 인스턴스 종료"></a>EC2 인스턴스 종료</h3><h3 id="EBS-스냅샷-삭제"><a href="#EBS-스냅샷-삭제" class="headerlink" title="EBS 스냅샷 삭제"></a>EBS 스냅샷 삭제</h3><h3 id="EBS-볼륨-삭제"><a href="#EBS-볼륨-삭제" class="headerlink" title="EBS 볼륨 삭제"></a>EBS 볼륨 삭제</h3><h3 id="EFS-삭제"><a href="#EFS-삭제" class="headerlink" title="EFS 삭제"></a>EFS 삭제</h3><h3 id="S3-삭제"><a href="#S3-삭제" class="headerlink" title="S3 삭제"></a>S3 삭제</h3><h3 id="CloudFormation-삭제"><a href="#CloudFormation-삭제" class="headerlink" title="CloudFormation 삭제**"></a>CloudFormation 삭제**</h3><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 4주차-2 CloudFormation, EFS 실습</title>
    <link href="/2021/06/30/2021-06-30-AFOS-2/"/>
    <url>/2021/06/30/2021-06-30-AFOS-2/</url>
    
    <content type="html"><![CDATA[<p><code>cloudFormation</code> -&gt; <code>스택 생성</code> 클릭<br><br/></p><img width="419" alt="스크린샷 2021-06-30 오후 10 24 15" src="https://user-images.githubusercontent.com/76810787/123975057-0ee5f380-d9f8-11eb-9cce-231066b643be.png"><br/><p>URL에 <code>https://s3.ap-northeast-2.amazonaws.com/cloudformation.cloudneta.net/STORAGE/Storage.yaml</code> 입력 -&gt; <code>다음</code> 클릭<br><br/></p><img width="1030" alt="스크린샷 2021-06-30 오후 10 24 39" src="https://user-images.githubusercontent.com/76810787/123975077-11e0e400-d9f8-11eb-8cd0-d8f96d54a38d.png"><br/><p><code>스택 이름 : 마음대로</code> -&gt; <code>key</code> 선택 후에 <code>다음</code> 선택<br><br/></p><img width="1049" alt="스크린샷 2021-06-30 오후 10 25 02" src="https://user-images.githubusercontent.com/76810787/123975084-13121100-d9f8-11eb-8ed4-e972bc1c2468.png"><br/><p>기본값으로 둔 후에 <code>다음</code> 클릭<br><br/></p><img width="269" alt="스크린샷 2021-06-30 오후 10 25 19" src="https://user-images.githubusercontent.com/76810787/123975096-14433e00-d9f8-11eb-8d86-36a806cf035d.png"><br/><p>맨 하단에 파란색 박스 <code>체크</code> 클릭 -&gt; <code>스택 생성</code> 클릭<br><br/></p><img width="1020" alt="스크린샷 2021-06-30 오후 10 25 34" src="https://user-images.githubusercontent.com/76810787/123975100-14dbd480-d9f8-11eb-9db2-ced314e82537.png"><br/><p>짠 완성 !<br><br/></p><img width="899" alt="스크린샷 2021-06-30 오후 10 25 51" src="https://user-images.githubusercontent.com/76810787/123975104-15746b00-d9f8-11eb-924c-7ab8a743f126.png"><br/><p>여러분 제 블로그를 열심히 보셨다면 !!(?) 이제 <code>인스턴스 연결</code> 정도면 껌이겠죠 ?!!!<br><br></p><img width="886" alt="스크린샷 2021-06-30 오후 10 27 52" src="https://user-images.githubusercontent.com/76810787/123975106-160d0180-d9f8-11eb-9b61-57524e541cc1.png"><br/><p><strong>EBS 기본 정보 확인</strong><br><br/></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 루트 사용자로 바꿔줍시다잉</span><br>sudo su<br><br><span class="hljs-comment"># 디스크 여유 공간 출력</span><br>df -hT <span class="hljs-regexp">/dev/</span>xvda1<br><br><span class="hljs-comment"># 사용 가능한 디스크 디바이스와 마운트 포인트(해당하는 경우)를 출력</span><br>lsblk<br><br><span class="hljs-comment"># 볼륨에 파일 시스템이 있는지 확인, data만 출력 시 파일시스템이 없으므로 생성해야함</span><br>file -s <span class="hljs-regexp">/dev/</span>xvda<br><br><span class="hljs-comment"># 파일 시스템이 있으면 파일 시스템의 유형에 관한 정보를 출력</span><br>file -s <span class="hljs-regexp">/dev/</span>xvda1<br><br><span class="hljs-comment"># 디바이스의 UUID 찾기</span><br>blkid<br><br><span class="hljs-comment"># 디바이스의 탑재 지점 확인</span><br>cat <span class="hljs-regexp">/etc/</span>fstab<br><br></code></pre></td></tr></table></figure><br/><img width="295" alt="스크린샷 2021-06-30 오후 10 29 15" src="https://user-images.githubusercontent.com/76810787/123975113-16a59800-d9f8-11eb-8e9f-406a00c2635b.png"><img width="403" alt="스크린샷 2021-06-30 오후 10 30 20" src="https://user-images.githubusercontent.com/76810787/123975118-173e2e80-d9f8-11eb-820f-d0e6729aeff9.png"><img width="343" alt="스크린샷 2021-06-30 오후 10 30 33" src="https://user-images.githubusercontent.com/76810787/123975121-17d6c500-d9f8-11eb-8760-986de1af9f01.png"><img width="566" alt="스크린샷 2021-06-30 오후 10 30 45" src="https://user-images.githubusercontent.com/76810787/123975123-186f5b80-d9f8-11eb-93e9-4e45239abe46.png"><img width="504" alt="스크린샷 2021-06-30 오후 10 31 13" src="https://user-images.githubusercontent.com/76810787/123975127-186f5b80-d9f8-11eb-9c62-35523b422160.png"><img width="567" alt="스크린샷 2021-06-30 오후 10 31 29" src="https://user-images.githubusercontent.com/76810787/123975131-1907f200-d9f8-11eb-9035-2f396a2ca804.png"><img width="564" alt="스크린샷 2021-06-30 오후 10 31 42" src="https://user-images.githubusercontent.com/76810787/123975136-1907f200-d9f8-11eb-8c6d-132b8ae493d4.png"><p><code>EC2</code> -&gt; <code>볼륨</code> -&gt; <code>볼륨 생성</code> 클릭<br><br/></p><img width="170" alt="스크린샷 2021-06-30 오후 10 32 11" src="https://user-images.githubusercontent.com/76810787/123975140-19a08880-d9f8-11eb-83d2-dce530bee6ae.png"><br/><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">크기</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">20</span><br><span class="hljs-attribute">가용 영역</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">루트 볼륨 영역 (저를 따라하셨다면 a가 맞습니다)</span><br><span class="hljs-attribute">스냅샷 ID </span><span class="hljs-punctuation">:</span><br><span class="hljs-attribute">태그</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">키 (Name), 값(Data1)</span><br></code></pre></td></tr></table></figure><p><code>볼륨 생성</code> 클릭<br><br/></p><img width="1193" alt="스크린샷 2021-06-30 오후 10 32 43" src="https://user-images.githubusercontent.com/76810787/123975144-1a391f00-d9f8-11eb-81fb-7a41caed2f51.png"><br/><p>만들어졌습니다 ㅎㅎ<br><br/></p><img width="429" alt="스크린샷 2021-06-30 오후 10 33 01" src="https://user-images.githubusercontent.com/76810787/123975151-1ad1b580-d9f8-11eb-9475-fd8b5a1fabf0.png"><br/><p>볼륨에서 <code>볼륨 연결</code> 클릭<br><br/></p><img width="331" alt="스크린샷 2021-06-30 오후 10 33 21" src="https://user-images.githubusercontent.com/76810787/123975153-1ad1b580-d9f8-11eb-936b-251814842159.png"><br/><p>인스턴스에서 <code>EC2-STG1</code> 클릭<br><br/></p><img width="647" alt="스크린샷 2021-06-30 오후 10 33 39" src="https://user-images.githubusercontent.com/76810787/123975156-1b6a4c00-d9f8-11eb-8937-0f86ea39312e.png"><br/><p>디바이스 이름을 <code>xvdf</code>로 바꿔줍니다 그후에 하단에 <code>연결</code> 클릭 !<br><br/></p><img width="831" alt="스크린샷 2021-06-30 오후 10 36 07" src="https://user-images.githubusercontent.com/76810787/123975158-1c02e280-d9f8-11eb-8abe-06613f8cd131.png"><br/><p><strong>EC2-STG1 신규 볼륨 사용 설정</strong><br><br/></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 관리자 권한으로 변경</span><br>sudo su<br><br><span class="hljs-comment"># 라이브 상태에서 디바이스 추가 확인 됨</span><br>lsblk<br><br><span class="hljs-comment"># 볼륨 ID 확인</span><br>lsblk -o +SERIAL<br><br><span class="hljs-comment"># 현재는 파일 시스템이 없음</span><br>file -s <span class="hljs-regexp">/dev/</span>xvdf<br><br><span class="hljs-comment"># 볼륨을 포맷해서 파일 시스템을 생성</span><br>mkfs -t xfs <span class="hljs-regexp">/dev/</span>xvdf<br><br>디렉터리를 생성 후 마운트<br>mkdir /data<br>mount <span class="hljs-regexp">/dev/</span>xvdf /data<br><br><span class="hljs-comment"># 파일을 생성 후 확인</span><br>echo <span class="hljs-string">&quot;EBS Test&quot;</span> &gt; <span class="hljs-regexp">/data/m</span>emo.txt<br>cat <span class="hljs-regexp">/data/m</span>emo.txt<br><br><span class="hljs-comment"># 디바이스 확인</span><br>lsblk<br>df -hT <span class="hljs-regexp">/dev/</span>xvdf<br></code></pre></td></tr></table></figure><br/><img width="329" alt="스크린샷 2021-06-30 오후 10 36 51" src="https://user-images.githubusercontent.com/76810787/123975161-1c02e280-d9f8-11eb-86b6-92d8408071fa.png"><img width="369" alt="스크린샷 2021-06-30 오후 10 37 09" src="https://user-images.githubusercontent.com/76810787/123975163-1c9b7900-d9f8-11eb-9857-1d14a52650dc.png"><img width="381" alt="스크린샷 2021-06-30 오후 10 38 05" src="https://user-images.githubusercontent.com/76810787/123975167-1c9b7900-d9f8-11eb-9789-b68e58f19572.png"><img width="564" alt="스크린샷 2021-06-30 오후 10 38 10" src="https://user-images.githubusercontent.com/76810787/123975170-1d340f80-d9f8-11eb-9932-b60a001e8cf3.png"><img width="380" alt="스크린샷 2021-06-30 오후 10 38 43" src="https://user-images.githubusercontent.com/76810787/123975171-1dcca600-d9f8-11eb-82e6-1f45730ece51.png"><img width="482" alt="스크린샷 2021-06-30 오후 10 39 20" src="https://user-images.githubusercontent.com/76810787/123975173-1dcca600-d9f8-11eb-8970-12c588f01284.png"><img width="330" alt="스크린샷 2021-06-30 오후 10 39 35" src="https://user-images.githubusercontent.com/76810787/123975178-1e653c80-d9f8-11eb-9543-baeab59fa359.png"><img width="426" alt="스크린샷 2021-06-30 오후 10 39 53" src="https://user-images.githubusercontent.com/76810787/123975181-1efdd300-d9f8-11eb-9fc4-8674fdabec42.png"><h2 id="심화-옵션-EC2-STG1-신규-볼륨-사용-설정시-재부팅-시에도-신규-볼륨을-자동-마운트"><a href="#심화-옵션-EC2-STG1-신규-볼륨-사용-설정시-재부팅-시에도-신규-볼륨을-자동-마운트" class="headerlink" title="심화 옵션) EC2-STG1 신규 볼륨 사용 설정시 재부팅 시에도 신규 볼륨을 자동 마운트"></a>심화 옵션) EC2-STG1 신규 볼륨 사용 설정시 재부팅 시에도 신규 볼륨을 자동 마운트</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 혹시 모르니 fstab 파일 백업</span><br>cp <span class="hljs-regexp">/etc/</span>fstab <span class="hljs-regexp">/etc/</span>fstab.orig<br><br><span class="hljs-comment"># 재부팅 이후에도 볼륨 자동 탑재를 위한 fstab 설정(nofail: 볼륨 없어도 부팅 가능)</span><br>blkid<br><br>echo <span class="hljs-string">&quot;UUID=위blkid의자신의UUID입력  /data  xfs  defaults,nofail  0  2&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>fstab<br>cat <span class="hljs-regexp">/etc/</span>fstab<br><br><span class="hljs-comment">#위 항목이 설정이 잘 되었는지 확인을 위해서 탑재를 해제 후 다시 탑재 (오류가 있을 시 문제를 출력)</span><br>umount /data<br>mount -a<br><br><span class="hljs-comment"># 다시 재부팅</span><br>reboot<br></code></pre></td></tr></table></figure><br/><img width="567" alt="스크린샷 2021-06-30 오후 10 40 42" src="https://user-images.githubusercontent.com/76810787/123975186-1f966980-d9f8-11eb-9832-e24aa93132e5.png"><img width="567" alt="스크린샷 2021-06-30 오후 10 42 17" src="https://user-images.githubusercontent.com/76810787/123975187-1f966980-d9f8-11eb-9352-c97258fa803f.png"><img width="570" alt="스크린샷 2021-06-30 오후 10 42 40" src="https://user-images.githubusercontent.com/76810787/123975191-202f0000-d9f8-11eb-93f3-68e95aa68650.png"><img width="331" alt="스크린샷 2021-06-30 오후 10 43 20" src="https://user-images.githubusercontent.com/76810787/123975195-20c79680-d9f8-11eb-984c-7cb4e8df131f.png"><img width="569" alt="스크린샷 2021-06-30 오후 10 43 40" src="https://user-images.githubusercontent.com/76810787/123975199-20c79680-d9f8-11eb-81d0-3e2d7d1f627e.png"><br/><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 정상적으로 디스크 디바이스가 보이고 마운트 되어 있으며 생성한 파일을 확인 가능</span><br>lsblk<br><br><span class="hljs-comment"># memo 파일을 찾아 봅시당</span><br>cat <span class="hljs-regexp">/data/m</span>emo.txt<br></code></pre></td></tr></table></figure><br/><img width="391" alt="스크린샷 2021-06-30 오후 10 44 47" src="https://user-images.githubusercontent.com/76810787/123975201-21602d00-d9f8-11eb-946f-bf0791b82cd4.png"><img width="337" alt="스크린샷 2021-06-30 오후 10 45 04" src="https://user-images.githubusercontent.com/76810787/123975205-21f8c380-d9f8-11eb-997f-93d0dd26704a.png"><br/><p><code>EC2-STG1볼륨</code> 클릭 -&gt; <code>볼륨 수정</code> 클릭<br><br/></p><img width="312" alt="스크린샷 2021-06-30 오후 10 46 27" src="https://user-images.githubusercontent.com/76810787/123975208-22915a00-d9f8-11eb-8859-53e42b7749c5.png"><img width="280" alt="스크린샷 2021-06-30 오후 10 46 35" src="https://user-images.githubusercontent.com/76810787/123975210-22915a00-d9f8-11eb-92aa-09b34a96e545.png"><br/><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">볼륨 유형 : <span class="hljs-type">gp3</span><br>크기 : 20<br>IOPS : 3000<br></code></pre></td></tr></table></figure><p><code>수정</code> 클릭<br><br/></p><img width="606" alt="스크린샷 2021-06-30 오후 10 47 10" src="https://user-images.githubusercontent.com/76810787/123975214-2329f080-d9f8-11eb-9308-6553f06de006.png"><br/><h2 id="파일-시스템-확장-볼륨이-optimizing-상태가-되자마자-파일-시스템-크기-조정을-할-수-있음-gt-1-파티션-늘림-gt-2-파일-시스템-늘림"><a href="#파일-시스템-확장-볼륨이-optimizing-상태가-되자마자-파일-시스템-크기-조정을-할-수-있음-gt-1-파티션-늘림-gt-2-파일-시스템-늘림" class="headerlink" title="파일 시스템 확장 : 볼륨이 optimizing 상태가 되자마자 파일 시스템 크기 조정을 할 수 있음 -&gt; 1) 파티션 늘림 -&gt; 2) 파일 시스템 늘림"></a>파일 시스템 확장 : 볼륨이 optimizing 상태가 되자마자 파일 시스템 크기 조정을 할 수 있음 -&gt; 1) 파티션 늘림 -&gt; 2) 파일 시스템 늘림</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 현재 루트 볼륨이 20G로 반영되어 있는데 아직 xvda1 파티션 크기가 8G 이므로 파티션 확장이 필요</span><br>lsblk<br><br><span class="hljs-comment"># 아직은 xvda1 크기가 8G 이다</span><br>df -hT <span class="hljs-regexp">/dev/</span>xvda1<br><br><span class="hljs-comment"># 1) growpart 명령어로 파티션을 늘림</span><br>growpart <span class="hljs-regexp">/dev/</span>xvda <span class="hljs-number">1</span><br><br><span class="hljs-comment"># 늘린 파티션으로 반영이 되었다</span><br>lsblk<br><br><span class="hljs-comment"># 파일 시스템은 아직 여전히 8G</span><br>df -hT <span class="hljs-regexp">/dev/</span>xvda1<br><br><span class="hljs-comment"># 2) xfs_growfs 명령어로 볼륨의 파일 시스템을 확장</span><br>xfs_growfs -d /<br><br><span class="hljs-comment"># 최종적으로 파일시스템까지 20G 용량으로 확장됨</span><br>df -hT <span class="hljs-regexp">/dev/</span>xvda1<br><br><span class="hljs-comment"># 심화 메모</span><br><span class="hljs-comment"># ext4 볼륨의 경우 아래 명령어로 확장</span><br>resize2fs <span class="hljs-regexp">/dev/</span>xvda1<br></code></pre></td></tr></table></figure><p>추가로 EBS 불륨을 연결 후 다시 해당 볼륨을 확장 시에도 위와 동일한 작업을 진행하면됨<br><br/></p><img width="347" alt="스크린샷 2021-06-30 오후 10 47 43" src="https://user-images.githubusercontent.com/76810787/123975219-23c28700-d9f8-11eb-8c59-a62d47c0d44f.png"><img width="426" alt="스크린샷 2021-06-30 오후 10 47 55" src="https://user-images.githubusercontent.com/76810787/123975224-245b1d80-d9f8-11eb-9054-2c397607d344.png"><img width="287" alt="스크린샷 2021-06-30 오후 10 48 19" src="https://user-images.githubusercontent.com/76810787/123975231-24f3b400-d9f8-11eb-98ea-34d5f75876e0.png"><img width="567" alt="스크린샷 2021-06-30 오후 10 48 36" src="https://user-images.githubusercontent.com/76810787/123975235-258c4a80-d9f8-11eb-8d8b-5a6da5a9384a.png"><img width="356" alt="스크린샷 2021-06-30 오후 10 48 48" src="https://user-images.githubusercontent.com/76810787/123975237-2624e100-d9f8-11eb-8447-f16b9f0a9849.png"><img width="439" alt="스크린샷 2021-06-30 오후 10 49 02" src="https://user-images.githubusercontent.com/76810787/123975239-2624e100-d9f8-11eb-8b1e-1fdb713f58a5.png"><img width="548" alt="스크린샷 2021-06-30 오후 10 49 26" src="https://user-images.githubusercontent.com/76810787/123975243-26bd7780-d9f8-11eb-97a5-2aab172e828b.png"><img width="423" alt="스크린샷 2021-06-30 오후 10 49 46" src="https://user-images.githubusercontent.com/76810787/123975246-27560e00-d9f8-11eb-8cd5-dc1836f54e0e.png"><br/><h2 id="심화-옵션-EC2-STG1-의-루트-불륨-EBS-Shapshot-스냅샷-증분백업-확인"><a href="#심화-옵션-EC2-STG1-의-루트-불륨-EBS-Shapshot-스냅샷-증분백업-확인" class="headerlink" title="심화 옵션) EC2-STG1 의 루트 불륨(EBS) Shapshot(스냅샷) - 증분백업 확인"></a>심화 옵션) EC2-STG1 의 루트 불륨(EBS) Shapshot(스냅샷) - 증분백업 확인</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 더미 파일 생성</span><br>fallocate -l <span class="hljs-number">10</span>G <span class="hljs-regexp">/home/</span><span class="hljs-number">10</span>G.dummy <span class="hljs-regexp">//</span>의미없는 파일 생성<br><br>ls -alh <span class="hljs-regexp">/home/</span><span class="hljs-number">10</span>G.dummy<br><br>df -hT <span class="hljs-regexp">/dev/</span>xvda1<br><br>du -hs /home<br></code></pre></td></tr></table></figure><br/><img width="463" alt="스크린샷 2021-06-30 오후 10 52 05" src="https://user-images.githubusercontent.com/76810787/123975251-27560e00-d9f8-11eb-87d2-4fcaa2f013b0.png"><br/><p><code>EC2</code> -&gt; <code>스냅샷</code> -&gt; <code>스냅샷 생성</code> 클릭<br><br/></p><img width="115" alt="스크린샷 2021-06-30 오후 10 53 57" src="https://user-images.githubusercontent.com/76810787/123975255-27eea480-d9f8-11eb-8e5d-6ceb9cf30fc1.png"><br/><p>볼륨 : EC2-STG1<br><br/></p><img width="529" alt="스크린샷 2021-06-30 오후 10 54 18" src="https://user-images.githubusercontent.com/76810787/123975260-28873b00-d9f8-11eb-9d84-11345ace1e01.png"><br/><p>설명: FirstSnapshot -&gt; <code>스냅샷 생성</code> 클릭<br><br/></p><img width="1194" alt="스크린샷 2021-06-30 오후 10 55 10" src="https://user-images.githubusercontent.com/76810787/123975263-291fd180-d9f8-11eb-9678-6c101139c885.png"><br/><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 더미 파일 생성</span><br><span class="hljs-attribute">fallocate</span> -l <span class="hljs-number">5</span>G /home/<span class="hljs-number">1</span>G.dummy<br></code></pre></td></tr></table></figure><img width="427" alt="스크린샷 2021-07-01 오전 12 08 43" src="https://user-images.githubusercontent.com/76810787/123986322-2b3a5e00-da01-11eb-9b57-454c0577096b.png"><br/><p><code>EC2</code> -&gt; <code>스냅샷</code> -&gt; <code>스냅샷 생성</code> 클릭<br><br/></p><img width="127" alt="스크린샷 2021-07-01 오전 12 09 16" src="https://user-images.githubusercontent.com/76810787/123986328-2d042180-da01-11eb-964e-0eb09d001852.png"><br/><p>볼륨 : EC2-STG1<br><br/></p><img width="643" alt="스크린샷 2021-07-01 오전 12 09 24" src="https://user-images.githubusercontent.com/76810787/123986331-2e354e80-da01-11eb-874c-486a81afbb7b.png"><br/><p>설명: SecondSnapshot -&gt; <code>스냅샷 생성</code> 클릭<br><br/></p><img width="1225" alt="스크린샷 2021-07-01 오전 12 09 50" src="https://user-images.githubusercontent.com/76810787/123986334-2f667b80-da01-11eb-87f9-732089e6eb02.png"><br/><p>두번째 스냅샷의 진행 상황을 봅시다 .. 뭔가 오래 걸릴 거 같군요 …<br><br/></p><img width="245" alt="스크린샷 2021-07-01 오전 12 10 37" src="https://user-images.githubusercontent.com/76810787/123986338-2fff1200-da01-11eb-9f2b-b8a5e8e452a0.png"><br/><p>몇십분 걸릴 줄 알았는데, 몇십초 있으니 바로 생성 됐네요 … 엄청 빨라요 ..<br><br/></p><img width="672" alt="스크린샷 2021-07-01 오전 12 11 07" src="https://user-images.githubusercontent.com/76810787/123986339-2fff1200-da01-11eb-9b3e-1427fefef1b8.png"><br/><p><code>EFS</code> -&gt; <code>파일 시스템 생성</code> 클릭<br><br/></p><img width="336" alt="스크린샷 2021-07-01 오전 12 11 39" src="https://user-images.githubusercontent.com/76810787/123986342-3097a880-da01-11eb-8304-d73b26f73877.png"><br/><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">이름: 마음대로</span><br><span class="hljs-section">VPC: ELB-VPC</span><br>리전<br></code></pre></td></tr></table></figure><p><code>생성</code> 클릭<br><br/></p><img width="594" alt="스크린샷 2021-07-01 오전 12 12 01" src="https://user-images.githubusercontent.com/76810787/123986345-31303f00-da01-11eb-8b69-4ad461fcf094.png"><br/><p>EFS가 만들어졌네요 자 이름을 클릭해봅시다 !<br><br/></p><img width="653" alt="스크린샷 2021-07-01 오전 12 12 20" src="https://user-images.githubusercontent.com/76810787/123986351-31c8d580-da01-11eb-8460-98058d98a03b.png"><br/><p>하단에 <code>네트워크</code> 클릭<br><br/></p><img width="164" alt="스크린샷 2021-07-01 오전 12 12 26" src="https://user-images.githubusercontent.com/76810787/123986352-32616c00-da01-11eb-8ee0-795a42faa58e.png"><br/><p><code>사용 가능</code> 이라고 뜨면 <code>관리</code> 클릭<br><br/></p><img width="552" alt="스크린샷 2021-07-01 오전 12 23 06" src="https://user-images.githubusercontent.com/76810787/123994853-c1be4d80-da08-11eb-920b-9bf8ea31615f.png"><img width="137" alt="스크린샷 2021-07-01 오전 12 23 09" src="https://user-images.githubusercontent.com/76810787/123994864-c4b93e00-da08-11eb-9ea0-a9ce91d84d32.png"><br/><p>맨 하단에 보안그룹 전부 제거<br><br/><br><img width="441" alt="스크린샷 2021-07-01 오전 12 23 29" src="https://user-images.githubusercontent.com/76810787/123994868-c551d480-da08-11eb-877e-4046f2a0a4df.png"><br><img width="339" alt="스크린샷 2021-07-01 오전 12 23 35" src="https://user-images.githubusercontent.com/76810787/123994874-c5ea6b00-da08-11eb-999e-c16374eba33f.png"><br><br/></p><p><code>default</code>말고 다른 보안 그룹 클릭<br><br/><br><img width="329" alt="스크린샷 2021-07-01 오전 12 23 44" src="https://user-images.githubusercontent.com/76810787/123994876-c5ea6b00-da08-11eb-8262-a297fffffa97.png"><br><img width="317" alt="스크린샷 2021-07-01 오전 12 23 54" src="https://user-images.githubusercontent.com/76810787/123994877-c6830180-da08-11eb-888e-d0f8a13f6f4c.png"><br><img width="510" alt="스크린샷 2021-07-01 오전 12 24 03" src="https://user-images.githubusercontent.com/76810787/123994881-c71b9800-da08-11eb-8e91-d678b07c6f42.png"><br><br/></p><p><strong>EC2-STG1 에 EFS 마운트</strong></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle">curl localhost<br>mkdir <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>efs<br>mount -t efs -o tls 자신의-EFS-ID:<span class="hljs-regexp">/ /</span>var<span class="hljs-regexp">/www/</span>html/efs<br>echo <span class="hljs-string">&quot;&lt;html&gt;&lt;h1&gt;Hello from Amazon EFS&lt;/h1&gt;&lt;/html&gt;&quot;</span> &gt; <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>efs/index.html<br>curl localhost<span class="hljs-regexp">/efs/</span><br>df |<span class="hljs-keyword">grep</span> efs<br>df -hT |<span class="hljs-keyword">grep</span> efs<br>dig +<span class="hljs-keyword">short</span> 자신의-EFS-ID.efs.ap-northeast-<span class="hljs-number">2</span>.amazonaws.com<br></code></pre></td></tr></table></figure><img width="385" alt="스크린샷 2021-07-01 오전 12 24 36" src="https://user-images.githubusercontent.com/76810787/123994886-c7b42e80-da08-11eb-8ef4-9ee2325b357f.png"><img width="395" alt="스크린샷 2021-07-01 오전 12 25 25" src="https://user-images.githubusercontent.com/76810787/123994887-c84cc500-da08-11eb-85ee-dcf670167739.png"><img width="565" alt="스크린샷 2021-07-01 오전 12 26 08" src="https://user-images.githubusercontent.com/76810787/123994890-c84cc500-da08-11eb-94a8-99de5c9cc2a1.png"><img width="570" alt="스크린샷 2021-07-01 오전 12 27 36" src="https://user-images.githubusercontent.com/76810787/123994892-c8e55b80-da08-11eb-91fb-5b5a911445f4.png"><img width="350" alt="스크린샷 2021-07-01 오전 12 27 42" src="https://user-images.githubusercontent.com/76810787/123994893-c97df200-da08-11eb-9c51-7c65ebcd690b.png"><img width="567" alt="스크린샷 2021-07-01 오전 12 27 47" src="https://user-images.githubusercontent.com/76810787/123994894-c97df200-da08-11eb-83b5-80b1cc05d0f9.png"><img width="516" alt="스크린샷 2021-07-01 오전 12 28 26" src="https://user-images.githubusercontent.com/76810787/123994895-ca168880-da08-11eb-8256-070079adba88.png"><img width="567" alt="스크린샷 2021-07-01 오전 12 33 07" src="https://user-images.githubusercontent.com/76810787/123994918-cd117900-da08-11eb-83e5-92f64e9742ef.png"><br/><p><strong>EC2-STG2 에 EFS 마운트</strong></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">sudo su<br>mkdir <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>efs<br>mount -t efs -o tls 자신의-EFS-ID:<span class="hljs-regexp">/ /</span>var<span class="hljs-regexp">/www/</span>html/efs<br>curl localhost<span class="hljs-regexp">/efs/</span><br>df -hT |<span class="hljs-keyword">grep</span> efs<br>dig +<span class="hljs-keyword">short</span> 자신의-EFS-ID.efs.ap-northeast-<span class="hljs-number">2</span>.amazonaws.com<br></code></pre></td></tr></table></figure><br/><img width="301" alt="스크린샷 2021-07-01 오전 12 29 48" src="https://user-images.githubusercontent.com/76810787/123994900-caaf1f00-da08-11eb-82f6-1dae61dbf012.png"><img width="560" alt="스크린샷 2021-07-01 오전 12 30 53" src="https://user-images.githubusercontent.com/76810787/123994903-cb47b580-da08-11eb-83e6-0f5a83833b0a.png"><img width="406" alt="스크린샷 2021-07-01 오전 12 30 58" src="https://user-images.githubusercontent.com/76810787/123994909-cbe04c00-da08-11eb-925a-820fe41dd7b1.png"><img width="494" alt="스크린샷 2021-07-01 오전 12 31 16" src="https://user-images.githubusercontent.com/76810787/123994913-cc78e280-da08-11eb-82e5-76d0086361f3.png"><img width="1210" alt="스크린샷 2021-07-01 오전 12 32 59" src="https://user-images.githubusercontent.com/76810787/123994917-cc78e280-da08-11eb-8f2e-867a1404104b.png"><br/><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 파일 100개 생성</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;<span class="hljs-number">1</span>..<span class="hljs-number">100</span>&#125;; <span class="hljs-keyword">do</span> touch <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>efs/deleteme.<span class="hljs-variable">$i</span>; done;<br></code></pre></td></tr></table></figure><br/><img width="567" alt="스크린샷 2021-07-01 오전 12 33 46" src="https://user-images.githubusercontent.com/76810787/123994922-cd117900-da08-11eb-8b4a-0fbbf3c8691f.png"><br/><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 파일 확인</span><br>ls <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>efs<br></code></pre></td></tr></table></figure><br/><img width="561" alt="스크린샷 2021-07-01 오전 12 34 02" src="https://user-images.githubusercontent.com/76810787/123994923-cdaa0f80-da08-11eb-90a7-e1dd7362a4ee.png"><br/><p>EC2-STG1도 똑같이 100개의 파일이 보인다 (처음 봤을 때 완전 신기 ..)<br><br/></p><img width="1214" alt="스크린샷 2021-07-01 오전 12 34 31" src="https://user-images.githubusercontent.com/76810787/123994926-ce42a600-da08-11eb-8dcf-20d94d34f431.png"><br/><p><strong>EC2-STG1에서 파일 삭제</strong><br><br/></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 파일 삭제</span><br>rm -rf <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>efs/deleteme*.*<br><br><span class="hljs-comment"># 짜쟌 파일이 사라졌습니다</span><br>ls <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>efs<br></code></pre></td></tr></table></figure><br/><img width="531" alt="스크린샷 2021-07-01 오전 12 35 42" src="https://user-images.githubusercontent.com/76810787/123994936-cf73d300-da08-11eb-86ab-a172118ca3ef.png"><br/><p>두개의 인스턴스에서 전부 파일이 사라진 걸 확인해볼 수 있습니다 !<br><br/><br><img width="1019" alt="스크린샷 2021-07-01 오전 12 35 56" src="https://user-images.githubusercontent.com/76810787/123994940-cf73d300-da08-11eb-90b0-6e198ce84d9f.png"><br><br/></p><h1 id="재부팅에서-EFS-자동-탑재"><a href="#재부팅에서-EFS-자동-탑재" class="headerlink" title="재부팅에서 EFS 자동 탑재"></a>재부팅에서 EFS 자동 탑재</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 마운트 해제</span><br>umount <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>efs<br><br><span class="hljs-comment"># /etc/fatab 에 아래 내용 추가</span><br>echo <span class="hljs-string">&quot;자신의-EFS-ID:/ /var/www/html/efs efs _netdev,noresvport,tls,iam 0 0&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>fstab<br><br><span class="hljs-comment"># 다시 마운트 해주기</span><br>mount -fav<br><br><span class="hljs-comment"># 재부팅</span><br>reboot<br></code></pre></td></tr></table></figure><br/><img width="387" alt="스크린샷 2021-07-01 오전 12 38 38" src="https://user-images.githubusercontent.com/76810787/123994943-d00c6980-da08-11eb-80eb-2d5f70b6a5cc.png"><img width="570" alt="스크린샷 2021-07-01 오전 12 38 43" src="https://user-images.githubusercontent.com/76810787/123994944-d00c6980-da08-11eb-9e43-16cc6e6704f9.png"><img width="378" alt="스크린샷 2021-07-01 오전 12 39 07" src="https://user-images.githubusercontent.com/76810787/123994946-d0a50000-da08-11eb-8dd0-71dfd9a07dfe.png"><img width="566" alt="스크린샷 2021-07-01 오전 12 39 17" src="https://user-images.githubusercontent.com/76810787/123994948-d13d9680-da08-11eb-9506-5c37105ed7f2.png"><br/><p>재부팅 후 자동 탑재 확인</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">df -hT <span class="hljs-string">|grep nfs</span><br></code></pre></td></tr></table></figure><br/><img width="504" alt="스크린샷 2021-07-01 오전 12 40 20" src="https://user-images.githubusercontent.com/76810787/123994950-d13d9680-da08-11eb-896c-d62b9d448829.png"><br/><br/><h2 id="자원-삭제"><a href="#자원-삭제" class="headerlink" title="자원 삭제"></a>자원 삭제</h2><p><strong>EC2 인스턴스 종료<br>EBS 스냅샷 삭제<br>EBS 볼륨 삭제<br>EFS 삭제<br>S3 삭제<br>CloudFormation 삭제</strong></p><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 4주차-1 스토리지 서비스</title>
    <link href="/2021/06/30/2021-06-30-AFOS-1/"/>
    <url>/2021/06/30/2021-06-30-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h1 id="AWS-스토리지"><a href="#AWS-스토리지" class="headerlink" title="AWS 스토리지"></a>AWS 스토리지</h1><h2 id="블록-스토리지"><a href="#블록-스토리지" class="headerlink" title="블록 스토리지"></a>블록 스토리지</h2><ul><li>데이터를 일정 크기의 블록으로 나누어 저장</li><li>호스트에서 파일 시스템을 생성<br>Storage Area Network (SAN)<br/></li></ul><span id="more"></span><h2 id="파일-스토리지"><a href="#파일-스토리지" class="headerlink" title="파일 스토리지"></a>파일 스토리지</h2><ul><li>디렉토리 구조로 파일을 저장</li><li>스토리지단에서 파일 시스템을 생성</li><li>Network Attached Storage (NAS)<br/></li></ul><h2 id="오브젝트-스토리지"><a href="#오브젝트-스토리지" class="headerlink" title="오브젝트 스토리지"></a>오브젝트 스토리지</h2><ul><li>REST 기반의 API 호출을 통해 데이터에 접근</li><li>HTTP 프로토콜<br/><br/><br/></li></ul><h2 id="EBS"><a href="#EBS" class="headerlink" title="EBS"></a>EBS</h2><ul><li>블록(Block) 스토리지, Disk, OS Level, 포맷되지 않은 원시 스토리지</li></ul><h2 id="EFS"><a href="#EFS" class="headerlink" title="EFS"></a>EFS</h2><ul><li>네트워크 파일(File) 스토리지, NAS, OS Level, 이미 포맷되어 있는 파일 시스템을 원격에서 마운트하여 접근</li><li><strong>EFS는 공유 저장소이다 보니, 자주 활용 됨 (ex. 애플리케이션이 여러 EC2 서버에 동작 시, 동일한 저장소 공간이 필요 시 등) -가시다님 댓글 참고!-</strong></li></ul><h2 id="S3"><a href="#S3" class="headerlink" title="S3"></a>S3</h2><ul><li>오브젝트(Object) 스토리지, Application(Web, CRUD)Level, 계층형이 아닌 수평적으로 데이터가 저장 (메타 데이터 및 개체 ID)<br/><br/><br/></li></ul><h3 id="Block-Storage-호스트에서-직접-파일을-액세스하고-기록하며-빠른-성능을-요하는-경우"><a href="#Block-Storage-호스트에서-직접-파일을-액세스하고-기록하며-빠른-성능을-요하는-경우" class="headerlink" title="Block Storage : 호스트에서 직접 파일을 액세스하고 기록하며 빠른 성능을 요하는 경우"></a>Block Storage : 호스트에서 직접 파일을 액세스하고 기록하며 빠른 성능을 요하는 경우</h3><h3 id="File-Storage-여러대의-서비스들이-데이터를-공유하고-사용해야-하는-경우"><a href="#File-Storage-여러대의-서비스들이-데이터를-공유하고-사용해야-하는-경우" class="headerlink" title="File Storage : 여러대의 서비스들이 데이터를 공유하고 사용해야 하는 경우"></a>File Storage : 여러대의 서비스들이 데이터를 공유하고 사용해야 하는 경우</h3><h3 id="Object-Storage-대량의-데이터를-저장하고-또는-앱-컨텐츠로-사용되어야-하거나-다수의-서버에서-해당-데이터에-접근해야-하는-경우"><a href="#Object-Storage-대량의-데이터를-저장하고-또는-앱-컨텐츠로-사용되어야-하거나-다수의-서버에서-해당-데이터에-접근해야-하는-경우" class="headerlink" title="Object Storage : 대량의 데이터를 저장하고 또는 앱 컨텐츠로 사용되어야 하거나 다수의 서버에서 해당 데이터에 접근해야 하는 경우"></a>Object Storage : 대량의 데이터를 저장하고 또는 앱 컨텐츠로 사용되어야 하거나 다수의 서버에서 해당 데이터에 접근해야 하는 경우</h3><br/><br/><br/><h2 id="EBS-Elastic-Block-Store"><a href="#EBS-Elastic-Block-Store" class="headerlink" title="EBS (Elastic Block Store)"></a>EBS (Elastic Block Store)</h2><h3 id="EBS란"><a href="#EBS란" class="headerlink" title="EBS란?"></a>EBS란?</h3><ul><li>EC2 인스턴스에서 사용할 수 있는 블록 수준 스토리지 볼륨을 제공</li><li>볼륨 사용 가능</li><li>인스턴스에 연결된 볼륨의 구성을 동적으로 변경 가능</li></ul><h3 id="EBS-사용-권장"><a href="#EBS-사용-권장" class="headerlink" title="EBS 사용 권장"></a>EBS 사용 권장</h3><ul><li><strong>빠르게 액세스하고 정기적으로 지속해야 하는 경우</strong></li><li>EBS 볼륨은 빈번한 업데이트가 필요하고 자주 액세스해야 하는 파일 시스템, 데이터베이스 또는 애플리케이션의 스토리지로 사용하기에 특히 적합</li></ul><h3 id="EBS-기능"><a href="#EBS-기능" class="headerlink" title="EBS 기능"></a>EBS 기능</h3><ul><li>범용 SSD, 프로비저닝된 IOPS SSD, 처리량에 최적화된 HDD 및 Cold HDD 볼륨 유형을 제공</li><li>EBS 스냅샷(Snapshot)를 사용하여 증분식으로 EBS 볼륨의 데이터를 백업할 수 있음</li></ul><p>증분식 백업이란 ? : 마지막 스냅샷 이후 변경된 디바이스의 블록만이 저장 (마지막 저장 이후, 변경된 것만 다시 저장된다고 이해하면 될 것 같다.)</p><ul><li>스냅샷 복사 및 공유 및 리전간 복제 가능<br/><br/><br/></li></ul><h2 id="EFS-Elastic-File-System"><a href="#EFS-Elastic-File-System" class="headerlink" title="EFS (Elastic File System)"></a>EFS (Elastic File System)</h2><h3 id="EFS란"><a href="#EFS란" class="headerlink" title="EFS란?"></a>EFS란?</h3><ul><li>AWS와 온프레미스에서 사용할 수 있는 확장 가능하며 탄력적인 <strong>Network File System</strong> 을 제공</li><li>애플리케이션을 중단하지 않고 온디맨드 방식으로 페타바이트 규모까지 자동으로 퐉장 축소가 됨</li><li>NFS 프로토콜 지원 - 동시에 액세스 가능으로 공통 데이터 원본을 서버들에 제공 가능</li><li>EFS 파일 시스템은 다중 가용 영역에 걸쳐 데이터와 메타데이터를 저장</li><li>데이터 일관성 및 파일 잠금 등 파일 시스템 액세스 기능 제공</li><li>파일 시스템 암호화 제공 - 전송 중 암호화, 유휴 시 암호화(모든 데이터와 메타데이터가 암호화됨)</li><li>두가지 성능 모드 제공 - 기본 범용 성능, 기본 버스팅 처리량 모드</li><li><strong>EFS는 공유 저장소이다 보니, 자주 활용 됨 (ex. 애플리케이션이 여러 EC2 서버에 동작 시, 동일한 저장소 공간이 필요 시 등) -가시다님 댓글 참고!-</strong></li></ul><h3 id="EFS-직동-방식"><a href="#EFS-직동-방식" class="headerlink" title="EFS 직동 방식"></a>EFS 직동 방식</h3><ul><li>동일 리전에 여러 가용 영역(고가용성)에서 액세스 가능 - 가용 영역 별 각각 EFS IP 와 공통 DNS 주소를 제공<br/><br/><br/></li></ul><h2 id="S3-Amazon-Simple-Storage-Service"><a href="#S3-Amazon-Simple-Storage-Service" class="headerlink" title="S3(Amazon Simple Storage Service)"></a>S3(Amazon Simple Storage Service)</h2><h3 id="S3란"><a href="#S3란" class="headerlink" title="S3란?"></a>S3란?</h3><ul><li>인터넷용 객체(Object) 기반 무제한 스토리지 서비스</li></ul><h3 id="S3-장점"><a href="#S3-장점" class="headerlink" title="S3 장점"></a>S3 장점</h3><ul><li>버킷 만들기 : 버킷은 데이터 스토리지를 위한 S3의 기본 컨테이너</li><li>버킷 저장 : 버킷에 데이터를 무한정 저장, S3 버킷에 객체를 원하는 만큼 업로드 가능, 객체에 최대 5TB 데이터를 포함</li><li>데이터 다운로드</li><li>권한 : 데이터를 S3 버킷ㅇ으로 업로드 또는 다운로드하려는 사용자에게 액세스 권한을 부여하거나 해당 권한을 거부</li><li>표준 인터페이스 : 표준 기반 REST API 또는 AWS SDK 사용</li></ul><h3 id="S3-개념"><a href="#S3-개념" class="headerlink" title="S3 개념"></a>S3 개념</h3><ul><li>버킷 : 버킷은 데이타 스토리지를 위한 S3의 기본 컨테이너. 객체는 어떤 버킷에 포함됨, 리전에서 생성됨</li><li>객체 : S3에 저장되는 기본 매체. 객체는 객체 데이터와 객체 메타데이터로 구성됨 (메타데이터: 객체를 설명하는 이름-값 페어의 집합)</li><li>키 : 키는 버킷 내 객체의 고유한 식별자, 버킷 내 모든 객체는 정확히 하나의 키를 가짐(S3는 버킷+키+버전 과 객체 자체 사이의 기본 데이터맵으로 생각할 수 있음)</li><li>Regions : 버킷을 저장할 지리적 AWS 리전을 선택함</li><li>S3 버킷에 있는 객체에 대해서 여러 서버로 데이터를 복제함으로 고가용성을 구현하고 일관성 모델을 제공</li></ul><h3 id="S3-버킷"><a href="#S3-버킷" class="headerlink" title="S3 버킷"></a>S3 버킷</h3><ul><li>버킷 이름은 전역 수준에서 고유해야 하며, 네임스페이스는 모든 AWS 계정이 공유 가능</li><li>버킷을 만든 후에는 이름 또는 리전 변경 불가</li><li>AWS 계정 각각에 대해 최대 100개 버킷을 만들 수 있음, 증가 요청시 최대 1000개 버킷을 만들 수 있음</li></ul><h3 id="S3-스토리지-크래스"><a href="#S3-스토리지-크래스" class="headerlink" title="S3 스토리지 크래스"></a>S3 스토리지 크래스</h3><ul><li>S3 Standard : 사용중, 자주 접근, 가장 비쌈</li><li>S3 Intellogent-Tiering : 변화하는 접근 패턴 데이터</li><li>S3 Standard-IA(Infrequent) : 비상시 접근</li><li>S3 One Zone-IA(Infrequent) : 재생산 가능, 접근이 적은 데이터, 한 공간만 사용</li><li>S3 Glacier : 아카이빙 데이터, 접근시 수분&#x2F;수시간 소요, S3 콘텐츠의 수명 주기 보관을 구성 가능</li><li>S3 Glacier Deep Archive : 아카이빙 데이터, 접근시 12 or 48시간 소요, 제일 가격이 쌈<br/><br/><br/></li></ul><h2 id="CloudFormation"><a href="#CloudFormation" class="headerlink" title="CloudFormation"></a>CloudFormation</h2><h3 id="CloudFormation이란"><a href="#CloudFormation이란" class="headerlink" title="CloudFormation이란 ?"></a>CloudFormation이란 ?</h3><ul><li>AWS 인프라를 개략적으로 설명하여 선언하는 방법 (인프라를 코드로 만들 수 있음)</li><li>정의한 대상에 대해 자동으로 순서대로 자원을 생성</li><li>아키텍처의 전체 정의가 하나의 파일에 있고 AWS에 제출하여 AWS가 모든 리소스를 관리</li></ul><h3 id="Infrastructure-as-code"><a href="#Infrastructure-as-code" class="headerlink" title="Infrastructure as code"></a>Infrastructure as code</h3><ul><li>수동으로 리소를 만들지 않아도 됨</li><li>Github을 활용하여 제어</li><li>코드를 통하여 인프라 변경사항을 검토 가능</li></ul><h3 id="Cost"><a href="#Cost" class="headerlink" title="Cost"></a>Cost</h3><ul><li>리소스 비용을 쉽게 추정할 수 있음</li><li>필요한 경우만 CloudFormation을 배포하고 필요하지 않을 경우 삭제하여 비용 절감</li></ul><h3 id="Productivity"><a href="#Productivity" class="headerlink" title="Productivity"></a>Productivity</h3><ul><li>클라우드 상 인프라를 즉시 삭제하거나 재 생성이 가능</li><li>Diagram 기능으로 Template 구성 가능 (Automated Generation)</li><li>Declarative Programming(선언적 프로그래밍)</li></ul><h3 id="Don-t-re-invent-wheel"><a href="#Don-t-re-invent-wheel" class="headerlink" title="Don;t re-invent wheel"></a>Don;t re-invent wheel</h3><ul><li>웹 상에 기존 Template을 활용</li><li>다양한 정보와 문서가 많이 있음</li></ul><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 3주차-2 서브넷 VPC 구성 실습</title>
    <link href="/2021/06/23/2021-06-23-AFOS-2/"/>
    <url>/2021/06/23/2021-06-23-AFOS-2/</url>
    
    <content type="html"><![CDATA[<h2 id="1-퍼블릭-서브넷-VPC-생성"><a href="#1-퍼블릭-서브넷-VPC-생성" class="headerlink" title="1) 퍼블릭 서브넷 VPC 생성"></a>1) 퍼블릭 서브넷 VPC 생성</h2><p><code>VPC</code> -&gt; <code>VPC 생성</code> 클릭<br><br/></p><img width="135" alt="스크린샷 2021-06-23 오후 9 20 44" src="https://user-images.githubusercontent.com/76810787/123097802-71287c80-d46b-11eb-8fe0-522e76d2e1fc.png"><br/><p><strong>VPC 생성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">이름 : 이름-<span class="hljs-type">VPC</span><br>IPv4 CIDR 블록 : 10.0.0.0/16<br></code></pre></td></tr></table></figure><br/><p>나머지 기본값으로 나둔 후 -&gt; <code>VPC 생성</code> 클릭<br><br/></p><img width="915" alt="스크린샷 2021-06-23 오후 9 21 31" src="https://user-images.githubusercontent.com/76810787/123097809-7259a980-d46b-11eb-8801-1bfb2e337852.png"><img width="305" alt="스크린샷 2021-06-23 오후 9 21 38" src="https://user-images.githubusercontent.com/76810787/123097814-74bc0380-d46b-11eb-8a75-da48e68f7990.png"><br/><p><code>VPC</code> -&gt; <code>서브넷</code> -&gt; <code>서브넷 생성</code> 클릭<br><br/></p><img width="223" alt="스크린샷 2021-06-23 오후 9 21 57" src="https://user-images.githubusercontent.com/76810787/123097816-74bc0380-d46b-11eb-9141-dcdda659fa20.png"><br/><p><strong>서브넷 생성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ada">VPC ID : 생성한 <span class="hljs-type">VPC</span> 선택<br>서브넷 이름 : 이름-<span class="hljs-type">Public</span>-SN<br>가용영역 : <span class="hljs-type">ap</span>-northeast-<span class="hljs-number">2</span>a<br>IPv4 블록 : 10.0.0.0/24<br><br></code></pre></td></tr></table></figure><br/><img width="873" alt="스크린샷 2021-06-23 오후 9 22 22" src="https://user-images.githubusercontent.com/76810787/123097820-75ed3080-d46b-11eb-9235-2f27507f0d0e.png"><img width="842" alt="스크린샷 2021-06-23 오후 9 22 58" src="https://user-images.githubusercontent.com/76810787/123097824-7685c700-d46b-11eb-87e5-4e4c4d4fad6d.png"><br/><p><code>서브넷 생성</code> 클릭<br><br/></p><img width="316" alt="스크린샷 2021-06-23 오후 9 23 03" src="https://user-images.githubusercontent.com/76810787/123097825-771e5d80-d46b-11eb-96d0-8aa9d727460d.png"><br/><p>서브넷 생성 완료 !<br><br/></p><img width="1112" alt="스크린샷 2021-06-23 오후 9 23 14" src="https://user-images.githubusercontent.com/76810787/123097828-77b6f400-d46b-11eb-94bb-5463b1eb4611.png"><br/><p><code>VPC</code> -&gt; <code>인터넷 게이트웨이</code> -&gt; <code>인터넷 게이트웨어 생성</code> 클릭<br><br/></p><img width="292" alt="스크린샷 2021-06-23 오후 9 23 29" src="https://user-images.githubusercontent.com/76810787/123097829-77b6f400-d46b-11eb-9b3a-4e6d11710de5.png"><br/><p><strong>인터넷 게이트웨이 생성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">이름 태그 : 이름-<span class="hljs-type">IGW</span><br></code></pre></td></tr></table></figure><p><code>인터넷 게이트웨어 생성</code> 클릭<br><br/></p><img width="925" alt="스크린샷 2021-06-23 오후 9 23 45" src="https://user-images.githubusercontent.com/76810787/123097831-784f8a80-d46b-11eb-8f4c-18531adda049.png"><br/><p>인터넷 게이트웨어 생성 후 <code>작업</code> 클릭 -&gt; <code>VPC 연결</code> 클릭<br><br/></p><img width="260" alt="스크린샷 2021-06-23 오후 9 24 01" src="https://user-images.githubusercontent.com/76810787/123097834-784f8a80-d46b-11eb-8762-4267359397ec.png"><br/><p>생성한 VPC 선택 후 -&gt; <code>인터넷 게이트웨어 연결</code> 클릭<br><br/></p><img width="851" alt="스크린샷 2021-06-23 오후 9 24 16" src="https://user-images.githubusercontent.com/76810787/123097838-78e82100-d46b-11eb-936c-a87eae53eaf7.png"><br/><p><code>VPC</code> -&gt; <code>라우팅 테이블</code> 클릭 -&gt; <code>라우팅 테이블 생성</code> 클릭<br><br/></p><img width="335" alt="스크린샷 2021-06-23 오후 9 29 11" src="https://user-images.githubusercontent.com/76810787/123097840-7980b780-d46b-11eb-9c7e-db584c4cd117.png"><br/><p><strong>라우팅 테이블 생성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">이름 : 이름-<span class="hljs-type">Public</span>-RT<br>VPC : 생성한 <span class="hljs-type">VPC</span> 선택<br></code></pre></td></tr></table></figure><p><code>라우팅 테이블 생성</code> 클릭<br><br/></p><img width="882" alt="스크린샷 2021-06-23 오후 9 29 32" src="https://user-images.githubusercontent.com/76810787/123097841-7a194e00-d46b-11eb-8cae-1cbf67b39323.png"><img width="262" alt="스크린샷 2021-06-23 오후 9 29 37" src="https://user-images.githubusercontent.com/76810787/123097846-7b4a7b00-d46b-11eb-8a9c-2f13a6a422f2.png"><br/><p>라우팅 테이블 생성 완료 !<br><br/></p><img width="924" alt="스크린샷 2021-06-23 오후 9 29 59" src="https://user-images.githubusercontent.com/76810787/123097850-7be31180-d46b-11eb-9d2e-940d4a92c041.png"><br/><p>생성한 퍼블릭 라우팅 테이블 클릭 후 -&gt; <code>서브넷 연결</code> 클릭 -&gt; <code>서브넷 연결 편집</code> 클릭<br><br/></p><img width="992" alt="스크린샷 2021-06-23 오후 9 30 28" src="https://user-images.githubusercontent.com/76810787/123097851-7c7ba800-d46b-11eb-8295-aaf1106c6553.png"><br/><p><strong>서브넷 연결 편집</strong><br><br/></p><p><code>생성한 퍼블릭 서브넷</code> 클릭 후 -&gt; <code>Save associations</code> 클릭<br><br/></p><img width="1347" alt="스크린샷 2021-06-23 오후 9 30 38" src="https://user-images.githubusercontent.com/76810787/123097855-7dacd500-d46b-11eb-9926-700810e7f6c4.png"><br/><p>다시 생성한 퍼블릭 라우팅 클릭 -&gt; <code>라우팅</code> 클릭 -&gt; <code>라우팅 편집</code> 클릭<br><br/></p><img width="1024" alt="스크린샷 2021-06-23 오후 9 31 07" src="https://user-images.githubusercontent.com/76810787/123097857-7e456b80-d46b-11eb-9c17-e4e47a4d5910.png"><br/><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">Destination : 0.0.0.0/0<br>Target : <span class="hljs-type">Internet</span>-gateway<br></code></pre></td></tr></table></figure><p><code>변경사항 저장</code> 클릭<br><br/></p><img width="1349" alt="스크린샷 2021-06-23 오후 9 31 39" src="https://user-images.githubusercontent.com/76810787/123097861-7ede0200-d46b-11eb-9f6f-6445d01cde75.png"><br/><p><code>EC2</code> 클릭 -&gt; <code>인스턴스</code> -&gt; <code>인스턴스 시작</code> 클릭<br><br/></p><img width="302" alt="스크린샷 2021-06-23 오후 9 31 58" src="https://user-images.githubusercontent.com/76810787/123097864-7f769880-d46b-11eb-9bc2-06cb0895f7a4.png"><br/><p><strong>AMI 선택</strong><br><br/></p><p><code>Linux 2</code> 클릭 후 <code>선택</code> 클릭<br><br/></p><img width="1159" alt="스크린샷 2021-06-23 오후 9 32 06" src="https://user-images.githubusercontent.com/76810787/123097865-7f769880-d46b-11eb-8e68-65039f7796ff.png"><br/><p><strong>인스턴스 유형 선택</strong><br><br/></p><p>기본 값 -&gt; <code>다음: 인스턴스 세부 정보 구성</code> 클릭<br><br/></p><img width="234" alt="스크린샷 2021-06-23 오후 9 32 15" src="https://user-images.githubusercontent.com/76810787/123097867-800f2f00-d46b-11eb-9134-afd950e88a70.png"><img width="716" alt="스크린샷 2021-06-23 오후 9 32 33" src="https://user-images.githubusercontent.com/76810787/123097868-800f2f00-d46b-11eb-821f-a20db9463779.png"><br/><p><strong>인스턴스 세부 정보 구성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">네트워크 : 생성한 <span class="hljs-type">VPC</span> 선택<br>서브넷 : 퍼블릭 서브넷 선택<br>퍼블릭 IP 자동 할당 : 활성화<br></code></pre></td></tr></table></figure><p>나머지 기본 값으로 나둔 후 -&gt; <code>다음: 스토리지 추가</code> 클릭<br><br/></p><img width="172" alt="스크린샷 2021-06-23 오후 9 32 47" src="https://user-images.githubusercontent.com/76810787/123097870-80a7c580-d46b-11eb-957d-b6bf5ef97fdd.png"><br/><p><strong>스토리지 추가</strong><br><br/></p><p>기본 값 -&gt; “다음: 태그 추가&#96; 클릭<br><br/></p><img width="147" alt="스크린샷 2021-06-23 오후 9 32 55" src="https://user-images.githubusercontent.com/76810787/123097879-81405c00-d46b-11eb-9003-4df453dd3eab.png"><br/><p><strong>태그 추가</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">키 : <span class="hljs-type">Name</span><br>값 : <span class="hljs-type">Public</span>-EC2<br></code></pre></td></tr></table></figure><p><code>검토 및 시작</code> 클릭<br><br/></p><img width="132" alt="스크린샷 2021-06-23 오후 9 33 31" src="https://user-images.githubusercontent.com/76810787/123097883-82718900-d46b-11eb-9150-85734da828d5.png"><br/><p><code>시작하기</code> 클릭<br><br/></p><img width="114" alt="스크린샷 2021-06-23 오후 9 33 39" src="https://user-images.githubusercontent.com/76810787/123097888-830a1f80-d46b-11eb-9625-1393e07dc99e.png"><br/><p>체크박스 선택 후 -&gt; <code>인스턴스 시작</code> 클릭<br><br/></p><img width="672" alt="스크린샷 2021-06-23 오후 9 33 53" src="https://user-images.githubusercontent.com/76810787/123097890-830a1f80-d46b-11eb-8e9f-205ff6bcc550.png"><br/><p>인스턴스 생성 완료 !<br><br/></p><img width="670" alt="스크린샷 2021-06-23 오후 9 34 38" src="https://user-images.githubusercontent.com/76810787/123097894-83a2b600-d46b-11eb-937b-5703d52e0bab.png"><br/><p>생성한 인스턴스 클릭 후 -&gt; <code>연결</code> 클릭 -&gt; <code>SSH 클라이언트</code> 클릭 후 명령어 복사<br><br/></p><img width="106" alt="스크린샷 2021-06-23 오후 9 34 56" src="https://user-images.githubusercontent.com/76810787/123097896-843b4c80-d46b-11eb-8092-2ef4a3824c34.png"><img width="384" alt="스크린샷 2021-06-23 오후 9 35 03" src="https://user-images.githubusercontent.com/76810787/123097899-84d3e300-d46b-11eb-9961-5a5267e037e7.png"><br/><p>터미널을 킨 후, Key 파일이 있는 폴더 경로로 들어가 아까 복사한 명령어를 넣어주면 접속 완료 !<br><br/></p><img width="419" alt="스크린샷 2021-06-23 오후 9 35 35" src="https://user-images.githubusercontent.com/76810787/123097902-856c7980-d46b-11eb-871f-e763b4624377.png"><br/><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment">#네트워크 인터페이스 확인</span><br>ip -<span class="hljs-keyword">br </span>-c <span class="hljs-keyword">addr </span><span class="hljs-keyword">show</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">or</span><br><span class="hljs-keyword"></span>ifconfig <span class="hljs-comment"># 이제 이 명령어 쓰면 아재라네요.. ㅠ</span><br></code></pre></td></tr></table></figure><br/><img width="535" alt="스크린샷 2021-06-23 오후 9 37 15" src="https://user-images.githubusercontent.com/76810787/123097911-869da680-d46b-11eb-8a3f-80dd2f67f57f.png"><br/><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># 구글로 ping 가는 지 확인</span><br><span class="hljs-attribute">ping</span> <span class="hljs-number">8.8.8.8</span><br></code></pre></td></tr></table></figure><br/><img width="407" alt="스크린샷 2021-06-23 오후 9 36 53" src="https://user-images.githubusercontent.com/76810787/123097909-869da680-d46b-11eb-8efe-064978fc59c7.png"><br/><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># 외부 접속 시 공인IP 정보 확인</span><br><span class="hljs-attribute">curl</span> ipinfo.io<br></code></pre></td></tr></table></figure><br/><img width="543" alt="스크린샷 2021-06-23 오후 9 36 25" src="https://user-images.githubusercontent.com/76810787/123097906-856c7980-d46b-11eb-995f-80e40477ddce.png"><br/><p>마지막으로 퍼블릭 테이블까지 캡쳐하면 첫번째 실습 끝 !<br><br/></p><img width="1102" alt="스크린샷 2021-06-23 오후 9 37 55" src="https://user-images.githubusercontent.com/76810787/123097915-87363d00-d46b-11eb-9efd-289dd866e145.png"><br/><h2 id="2-프라이빗-서브넷-VPC-구성"><a href="#2-프라이빗-서브넷-VPC-구성" class="headerlink" title="2) 프라이빗 서브넷 VPC 구성"></a>2) 프라이빗 서브넷 VPC 구성</h2><p><code>VPC</code> -&gt; <code>서브넷</code> -&gt; <code>서브넷 생성</code> 클릭<br><img width="292" alt="스크린샷 2021-06-23 오후 10 25 18" src="https://user-images.githubusercontent.com/76810787/123106331-82758700-d473-11eb-9e96-428057e6a713.png"><br><br/></p><p><strong>서브넷 생성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ada">VPC ID : 생성한 <span class="hljs-type">VPC</span> 선택<br>서브넷 이름 : 이름-<span class="hljs-type">Private</span>-SN<br>가용영역 : <span class="hljs-type">ap</span>-northeast-<span class="hljs-number">2</span>c<br>IPv4 블록 : 10.0.1.0/24<br></code></pre></td></tr></table></figure><p><code>서브넷 생성</code> 클릭<br><br/></p><img width="881" alt="스크린샷 2021-06-23 오후 10 25 27" src="https://user-images.githubusercontent.com/76810787/123106334-843f4a80-d473-11eb-98cf-955c560d7b8e.png"><img width="827" alt="스크린샷 2021-06-23 오후 10 26 06" src="https://user-images.githubusercontent.com/76810787/123106338-86090e00-d473-11eb-9d38-ba4b809edf34.png"><br/><p>프라이빗 서브넷 생성 완료 !<br><br/></p><img width="1095" alt="스크린샷 2021-06-23 오후 10 26 19" src="https://user-images.githubusercontent.com/76810787/123106343-86a1a480-d473-11eb-81d9-4dc6e907b938.png"><br/><p><code>VPC</code> -&gt; <code>NAT 게이트웨이</code> 클릭 -&gt; <code>NAT 게이트웨이 생성</code> 클릭<br><br/></p><img width="323" alt="스크린샷 2021-06-23 오후 10 26 30" src="https://user-images.githubusercontent.com/76810787/123106344-873a3b00-d473-11eb-90a8-b018fd2819fa.png"><br/><p><strong>NAT 게이트웨이 생성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">이름 : 이름-<span class="hljs-type">NAT</span><br>서브넷 : 퍼블릭 서브넷<br>탄력적 IP 할당 : `탄력적 <span class="hljs-type">IP</span> 할당` 클릭<br></code></pre></td></tr></table></figure><p><code>NAT 게이트웨이 생성</code> 클릭<br><br/></p><img width="705" alt="스크린샷 2021-06-23 오후 10 27 11" src="https://user-images.githubusercontent.com/76810787/123106345-873a3b00-d473-11eb-8fa1-f7c994bfb2f9.png"><img width="784" alt="스크린샷 2021-06-23 오후 10 27 24" src="https://user-images.githubusercontent.com/76810787/123106346-87d2d180-d473-11eb-9f8d-63a6198fb5e5.png"><img width="304" alt="스크린샷 2021-06-23 오후 10 27 33" src="https://user-images.githubusercontent.com/76810787/123106348-886b6800-d473-11eb-9511-91d79ea4fa2d.png"><br/><p><code>VPC</code> -&gt; <code>라우팅 테이블</code> 클릭 -&gt; <code>라우팅 테이블 생성</code> 클릭<br><br/></p><img width="227" alt="스크린샷 2021-06-23 오후 10 27 45" src="https://user-images.githubusercontent.com/76810787/123106351-886b6800-d473-11eb-8c0a-dfa538a1e9be.png"><br/><p><strong>라우팅 테이블 생성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">이름 : 이름-<span class="hljs-type">Private</span>-RT<br>VPC : 생성한 <span class="hljs-type">VPC</span> 선택<br></code></pre></td></tr></table></figure><p><code>라우팅 테이블 생성</code> 클릭<br><br/></p><img width="859" alt="스크린샷 2021-06-23 오후 10 28 07" src="https://user-images.githubusercontent.com/76810787/123106354-8903fe80-d473-11eb-9332-9524749b66fb.png"><br/><p>생성한 프라이빗 라우팅 테이블 클릭 후 -&gt; <code>서브넷 연결</code> 클릭 -&gt; <code>서브넷 연결 편집</code> 클릭<br><br/></p><img width="947" alt="스크린샷 2021-06-23 오후 10 28 36" src="https://user-images.githubusercontent.com/76810787/123106356-8903fe80-d473-11eb-9ea0-5a39d9f6fed5.png"><br/><p><strong>서브넷 연결 편집</strong><br><br/></p><p><code>생성한 프라이빗 서브넷</code> 클릭 후 -&gt; <code>Save associations</code> 클릭<br><br/></p><img width="1345" alt="스크린샷 2021-06-23 오후 10 28 50" src="https://user-images.githubusercontent.com/76810787/123106357-899c9500-d473-11eb-8037-6523d222116b.png"><br/><p>다시 생성한 프라이빗 라우팅 클릭 -&gt; <code>라우팅</code> 클릭 -&gt; <code>라우팅 편집</code> 클릭<br><br/></p><img width="1039" alt="스크린샷 2021-06-23 오후 10 29 09" src="https://user-images.githubusercontent.com/76810787/123106359-8a352b80-d473-11eb-9a40-c8ab1145446f.png"><br/><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">Destination : 0.0.0.0/0<br>Target : <span class="hljs-type">NAT</span>-gateway<br></code></pre></td></tr></table></figure><p><code>변경사항 저장</code> 클릭<br><br/></p><img width="1339" alt="스크린샷 2021-06-23 오후 10 29 24" src="https://user-images.githubusercontent.com/76810787/123106361-8acdc200-d473-11eb-884e-8bfc61497721.png"><br/><p><strong>인스턴스 설정</strong><br><br/></p><p>전부 퍼블릭 인스턴스와 설정이 같고, <code>인스턴스 세부 구성</code>, <code>태그 추가</code> 부분만 다르다<br><br/></p><p><strong>인스턴스 세부 구성</strong><br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">네트워크 : 생성한 <span class="hljs-type">VPC</span><br>서브넷 : <span class="hljs-type">Private</span> 서브넷<br>퍼블릭 IP 자동 할당 : 비활성화<br></code></pre></td></tr></table></figure><br/><img width="747" alt="스크린샷 2021-06-23 오후 10 30 50" src="https://user-images.githubusercontent.com/76810787/123106364-8acdc200-d473-11eb-8c45-b02a4621554d.png"><br/><p>하단에 <code>고급 세부 정보</code>에서 사용자 데이터에 작성</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>(<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;qwe123&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;qwe123&quot;</span><br>) | passwd --stdin root<br>sed -i <span class="hljs-string">&quot;s/^PasswordAuthentication no/PasswordAuthentication yes/g&quot;</span> /etc/ssh/sshd_config<br>sed -i <span class="hljs-string">&quot;s/^#PermitRootLogin yes/PermitRootLogin yes/g&quot;</span> /etc/ssh/sshd_config<br>service sshd restart<br></code></pre></td></tr></table></figure><p><code>다음: 스토리지 추가</code> 클릭<br><br/></p><img width="1377" alt="스크린샷 2021-06-23 오후 10 32 38" src="https://user-images.githubusercontent.com/76810787/123106372-8bfeef00-d473-11eb-8bcf-04ab20f3fe17.png"><br/><p><strong>태그 추가</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">키 : <span class="hljs-type">Name</span><br>값 : <span class="hljs-type">Private</span>-EC2<br></code></pre></td></tr></table></figure><p><code>검토 및 시작</code> 클릭<br><br/></p><img width="1378" alt="스크린샷 2021-06-23 오후 10 31 12" src="https://user-images.githubusercontent.com/76810787/123106368-8b665880-d473-11eb-9738-982202e7eea4.png"><br/><p>퍼블릭 주소를 확인해보면 프라이빗 인스턴스에는 없다는 걸 볼 수 있다<br><br/></p><img width="580" alt="스크린샷 2021-06-23 오후 10 33 37" src="https://user-images.githubusercontent.com/76810787/123106376-8bfeef00-d473-11eb-8c01-758153b6d334.png"><br/><p>퍼블릭 인스턴스에서 <code>ssh root@프라이빗 주소</code>를 입력하면 접속 완료 !<br><br/></p><img width="565" alt="스크린샷 2021-06-23 오후 10 34 48" src="https://user-images.githubusercontent.com/76810787/123106377-8c978580-d473-11eb-80cf-59c6e8ec1624.png"><br/><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment">#네트워크 인터페이스 확인</span><br>ip -<span class="hljs-keyword">br </span>-c <span class="hljs-keyword">addr </span><span class="hljs-keyword">show</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">or</span><br><span class="hljs-keyword"></span>ifconfig <span class="hljs-comment"># 이제 이 명령어 쓰면 아재라네요.. ㅠ</span><br></code></pre></td></tr></table></figure><br/><img width="548" alt="스크린샷 2021-06-23 오후 10 35 25" src="https://user-images.githubusercontent.com/76810787/123106382-8d301c00-d473-11eb-9b1e-81615d79c64d.png"><br/><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># 구글로 ping 가는 지 확인</span><br><span class="hljs-attribute">ping</span> <span class="hljs-number">8.8.8.8</span><br></code></pre></td></tr></table></figure><br/><img width="408" alt="스크린샷 2021-06-23 오후 10 35 44" src="https://user-images.githubusercontent.com/76810787/123106384-8d301c00-d473-11eb-8d8c-4d7d63df50e5.png"><br/><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># 외부 접속 시 공인IP 정보 확인</span><br><span class="hljs-attribute">curl</span> ipinfo.io<br></code></pre></td></tr></table></figure><br/><img width="519" alt="스크린샷 2021-06-23 오후 10 36 08" src="https://user-images.githubusercontent.com/76810787/123106385-8dc8b280-d473-11eb-904f-7bf8bb00a3f5.png"><br/><p>마지막으로 프라이빗 테이블까지 캡쳐하면 과제 완료 !<br><img width="1085" alt="스크린샷 2021-06-23 오후 10 36 37" src="https://user-images.githubusercontent.com/76810787/123106390-8dc8b280-d473-11eb-95c1-ca3e22531989.png"><br><br/><br><br/><br><br/></p><h2 id="자원-삭제-중요"><a href="#자원-삭제-중요" class="headerlink" title="자원 삭제 (중요!)"></a>자원 삭제 (중요!)</h2><h3 id="1-EC2-인스턴스-종료-EC2-→-인스턴스-→-인스턴스-선택-→-작업-→-인스턴스-상태-→-종료"><a href="#1-EC2-인스턴스-종료-EC2-→-인스턴스-→-인스턴스-선택-→-작업-→-인스턴스-상태-→-종료" class="headerlink" title="1. EC2 인스턴스 종료 (EC2 → 인스턴스 → 인스턴스 선택 → 작업 → 인스턴스 상태 → 종료)"></a>1. EC2 인스턴스 종료 (EC2 → 인스턴스 → 인스턴스 선택 → 작업 → 인스턴스 상태 → 종료)</h3><h3 id="2-NAT-게이트웨이-삭제-VPC-→-NAT-게이트웨이-→-작업-→-NAT-게이트웨이-삭제"><a href="#2-NAT-게이트웨이-삭제-VPC-→-NAT-게이트웨이-→-작업-→-NAT-게이트웨이-삭제" class="headerlink" title="2. NAT 게이트웨이 삭제 (VPC → NAT 게이트웨이 → 작업 → NAT 게이트웨이 삭제)"></a>2. NAT 게이트웨이 삭제 (VPC → NAT 게이트웨이 → 작업 → NAT 게이트웨이 삭제)</h3><h3 id="3-탄력적-IP-삭제-VPC-→-탄력적-IP-→-Actions-→-탄력적-IP-주소-릴리스"><a href="#3-탄력적-IP-삭제-VPC-→-탄력적-IP-→-Actions-→-탄력적-IP-주소-릴리스" class="headerlink" title="3. 탄력적 IP 삭제 (VPC → 탄력적 IP → Actions → 탄력적 IP 주소 릴리스)"></a>3. 탄력적 IP 삭제 (VPC → 탄력적 IP → Actions → 탄력적 IP 주소 <strong>릴리스</strong>)</h3><h3 id="4-VPC-삭제-VPC-→-VPC-→-작업-→-VPC-삭제"><a href="#4-VPC-삭제-VPC-→-VPC-→-작업-→-VPC-삭제" class="headerlink" title="4. VPC 삭제 (VPC → VPC → 작업 → VPC 삭제)"></a>4. VPC 삭제 (VPC → VPC → 작업 → VPC 삭제)</h3><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 3주차-1 네트워킹 서비스</title>
    <link href="/2021/06/23/2021-06-23-AFOS-1/"/>
    <url>/2021/06/23/2021-06-23-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h2 id="AWS-VPC-란"><a href="#AWS-VPC-란" class="headerlink" title="AWS VPC 란 ?"></a>AWS VPC 란 ?</h2><ul><li>Virtual Private Cloud의 약자</li><li>AWS 클라우드 내 논리적으로 독립된 섹션을 제공허여 사용자가 정의한 가상 네트워크상에서 다양한 AWS 리소스를 실행할 수 있게 지원</li><li>독립된 가상 클라우드 네트워크</li><li>VPC 내에서 IP대역, 인터페이스, 서브넷, 라우팅 테이블, 인터넷 게이트웨이,보안 그룹, 네트워크 ACL 등을 생성하고 제어할 수 있음<br/><br/></li></ul><span id="more"></span><h2 id="기본-네트워크-개념"><a href="#기본-네트워크-개념" class="headerlink" title="기본 네트워크 개념"></a>기본 네트워크 개념</h2><h2 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h2><ul><li>공인 IP : 전 세계 유일한 주소, 인터넷</li><li>사설 IP : 맘껏 사용, 인터넷 사용 시 NAT을 사용해야 함<br/></li></ul><h2 id="IP-통신"><a href="#IP-통신" class="headerlink" title="IP 통신"></a>IP 통신</h2><ul><li>동일 네트워크 : 그냥 됨</li><li>다른 네트워크 : Gateway 필요<br/></li></ul><h2 id="NAT-Network-Address-Translation"><a href="#NAT-Network-Address-Translation" class="headerlink" title="NAT (Network Address Translation)"></a>NAT (Network Address Translation)</h2><ul><li>네트워크 주소(IP) 변환헤주는 기술</li><li>프라이빗 IP 를 퍼블릭 IP로 변환해줌<br/><br/></li></ul><h2 id="VPC-리소스"><a href="#VPC-리소스" class="headerlink" title="VPC 리소스"></a>VPC 리소스</h2><h2 id="서브넷"><a href="#서브넷" class="headerlink" title="서브넷"></a>서브넷</h2><ul><li>네트워크 영역을 부분적으로 나눈 망으로 정의</li><li>AWS의 VPC에서도 서브넷을 통해 네트워크를 분리하여 나눌 수 있음</li><li>서브넷의 IP대역은 VPC의 IP대역에 속해 있어야 하며, <strong>서브넷은 1개의 가용영역(AZ)에 종속되어 있어야 함</strong><br/></li></ul><h2 id="퍼블릭-서브넷"><a href="#퍼블릭-서브넷" class="headerlink" title="퍼블릭 서브넷"></a>퍼블릭 서브넷</h2><ul><li>공인 네트워크 개념</li><li>외부 인터넷 구간과 직접적으로 통신할 수 있는 공공 네트워크<br/></li></ul><h2 id="프라이빗-서브넷"><a href="#프라이빗-서브넷" class="headerlink" title="프라이빗 서브넷"></a>프라이빗 서브넷</h2><ul><li>사설 네트워크 개념</li><li>외부 인터넷 구간과 직접적인 통신을 할 수 없는 폐쇄적인 네트워크<br/></li></ul><h2 id="보안-그룹과-네트워크-ACL"><a href="#보안-그룹과-네트워크-ACL" class="headerlink" title="보안 그룹과 네트워크 ACL"></a>보안 그룹과 네트워크 ACL</h2><ul><li>VPC는 <strong>인스턴스</strong> 레벨과 <strong>서브넷</strong> 레벨 상에서 대상을 필터링 할 수 있는 보안 기술을 사용할 수 있음</li><li>인스턴스 레벨에서의 보안 기술 : 보안 그룹 (Security Group)</li><li>서브넷 레벨에서의 보안 기술 : 네트워크 ACL (Access Control List)<br/><br/></li></ul><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 2주차-2 인스턴스 배포 실습</title>
    <link href="/2021/06/16/2021-06-16-AFOS-2/"/>
    <url>/2021/06/16/2021-06-16-AFOS-2/</url>
    
    <content type="html"><![CDATA[<p><code>VPC 대시보드</code> -&gt; <code>VPC 마법사 시작</code> 클릭<br><br/></p><img width="382" alt="스크린샷 2021-06-16 오후 10 45 03" src="https://user-images.githubusercontent.com/76810787/122235177-71b79500-cef8-11eb-8ca0-624b9e33ac46.png"><br/><p><code>단일 퍼블릭 서브넷이 있는 VPC</code> -&gt; <code>선택</code> 클릭<br><br/></p><img width="1065" alt="스크린샷 2021-06-16 오후 10 45 23" src="https://user-images.githubusercontent.com/76810787/122235180-72e8c200-cef8-11eb-88e1-a37c054f3c46.png"><br/><p>차례대로 입력<br><br/></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ada">IPv4 CIDR 블록 : 10.20.0.0/16<br>VPC 이름 : <span class="hljs-type">SecondVPC</span><br>퍼블릭 서브넷의 IPv4 CIDR : 10.20.1.0/24<br>가용 영역 : <span class="hljs-type">ap</span>-northeast-<span class="hljs-number">2</span>a<br>서브넷 이름 : <span class="hljs-type">SecondVPC</span>-Subnet1<br></code></pre></td></tr></table></figure><br/><img width="1390" alt="스크린샷 2021-06-16 오후 10 46 17" src="https://user-images.githubusercontent.com/76810787/122235188-754b1c00-cef8-11eb-8947-221943ed2b74.png"><br/><p><code>EC2 대시보드</code> -&gt; <code>인스턴스 시작</code><br><br/></p><img width="494" alt="스크린샷 2021-06-16 오후 10 47 28" src="https://user-images.githubusercontent.com/76810787/122235190-75e3b280-cef8-11eb-80fd-2cfba5d37256.png"><br/><p><strong>AMI 선택</strong><br><br/></p><p>AMI 리눅스2 <code>선택</code> 클릭<br><br/></p><img width="1148" alt="스크린샷 2021-06-16 오후 10 47 42" src="https://user-images.githubusercontent.com/76810787/122235191-767c4900-cef8-11eb-8067-d0cb6421893d.png"><br/><p><strong>인스턴스 유형 선택</strong><br><br/></p><p>기본 값으로 둔 후, <code>다음: 인스턴스 세부 정보 구성</code> 클릭<br><br/></p><img width="228" alt="스크린샷 2021-06-16 오후 10 47 51" src="https://user-images.githubusercontent.com/76810787/122235195-7714df80-cef8-11eb-9d34-368dbcadd301.png"><br/><p><strong>인스턴스 세부 구성</strong><br><br/></p><p>인스턴스 개수 : 1</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">네트워크 : <span class="hljs-type">SecondVPC</span><br>서브넷 : &#x27;<span class="hljs-type">SecondVPC</span>&#x27; 선택 시 자동으로 서브넷 선택 됨<br>퍼블릭 IP 자동 할당 : 활성화<br></code></pre></td></tr></table></figure><br/><img width="682" alt="스크린샷 2021-06-16 오후 10 48 17" src="https://user-images.githubusercontent.com/76810787/122235198-77ad7600-cef8-11eb-88ff-c089d5192009.png"><br/><p>하단에 <strong>고급 세부 정보</strong>에서 <code>사용자 데이터</code><br>차례대로 입력</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>hostnamectl --static set-hostname AFOS2-WebSrv<br>yum install httpd -y<br>systemctl start httpd &amp;&amp; systemctl <span class="hljs-built_in">enable</span> httpd<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;&lt;h1&gt;Welcome to AFOS2 Web Server&lt;/h1&gt;&quot;</span> &gt; /var/www/html/index.html<br></code></pre></td></tr></table></figure><br/><img width="974" alt="스크린샷 2021-06-16 오후 10 48 39" src="https://user-images.githubusercontent.com/76810787/122235201-78460c80-cef8-11eb-95b5-6a65b744623a.png"><br/><p><code>다음 스토리지 추가</code> 클릭<br><br/></p><img width="177" alt="스크린샷 2021-06-16 오후 10 48 47" src="https://user-images.githubusercontent.com/76810787/122235204-78460c80-cef8-11eb-8b11-521b852b46bc.png"><br/><p><strong>스토리지 추가 선택</strong><br><br/></p><p>기본값으로 두고, <code>다음: 태그추가</code> 클릭<br><br/></p><img width="132" alt="스크린샷 2021-06-16 오후 10 48 55" src="https://user-images.githubusercontent.com/76810787/122235207-78dea300-cef8-11eb-8ce8-0a2780a45a22.png"><br/><p><strong>태그 추가</strong><br>키 : <code>Name</code>, 값 : <code>WebSrv</code> 입력 후 <code>다음: 보안 그룹 구성</code> 클릭<br><br/></p><img width="1381" alt="스크린샷 2021-06-16 오후 10 49 23" src="https://user-images.githubusercontent.com/76810787/122235208-79773980-cef8-11eb-88b3-0b2d49ee3409.png"><br/><p><strong>보안 그룹 구성</strong><br><br/></p><p>보안그룹 이름 : SecondVPC-NewSG<br>설명 : “<br><code>HTTP</code> 규칙 추가 후 <code>검토 및 시작</code> 클릭<br><br/></p><img width="1381" alt="스크린샷 2021-06-16 오후 10 50 00" src="https://user-images.githubusercontent.com/76810787/122235212-79773980-cef8-11eb-886c-ff1d00f45540.png"><br/><p><code>시작하기</code> 클릭<br><br/></p><img width="123" alt="스크린샷 2021-06-16 오후 10 50 12" src="https://user-images.githubusercontent.com/76810787/122235214-7a0fd000-cef8-11eb-9333-53501d15efb2.png"><br/><p><strong>키페어 선택</strong><br><br/></p><p>기존 키 페어 선택 후, 체크 박스 체크 -&gt; <code>인스턴스 시작</code> 클릭<br><img width="664" alt="스크린샷 2021-06-16 오후 10 50 21" src="https://user-images.githubusercontent.com/76810787/122235216-7aa86680-cef8-11eb-9f1e-1b18fd899f0c.png"><br><br/></p><p>인스턴스 퍼블릭 IP 주소 활성화 확인<br><br/></p><img width="682" alt="스크린샷 2021-06-16 오후 11 31 59" src="https://user-images.githubusercontent.com/76810787/122242704-826b0980-cefe-11eb-9291-e407a207ac4b.png"><br/><p>우클릭 후에 <code>연결</code> 클릭 후<br><br/></p><img width="790" alt="스크린샷 2021-06-16 오후 11 32 41" src="https://user-images.githubusercontent.com/76810787/122242716-8565fa00-cefe-11eb-97a7-64b2a0fdfc73.png"><br/><p>차례대로 입력하면 접속 완료</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 키 파일 최소 권한으로 변경</span><br><span class="hljs-built_in">chmod</span> 400 <span class="hljs-string">&#x27;ssh키파일&#x27;</span><br><br><span class="hljs-comment"># ssh 로 접속</span><br>ssh -i <span class="hljs-string">&#x27;ssh키파일&#x27;</span> ec2-user@퍼블릭IP<br></code></pre></td></tr></table></figure><br/><p><img src="https://user-images.githubusercontent.com/76810787/122242722-86972700-cefe-11eb-90da-b0d401b96316.png" alt="스크린샷 2021-06-16 오후 11 33 47"><br><br/></p><p>키가 저장된 폴더에 올릴 사진 옮겨 놓기<br><br/></p><p><img src="https://user-images.githubusercontent.com/76810787/122242723-872fbd80-cefe-11eb-83bb-62beddd73f09.png" alt="스크린샷 2021-06-16 오후 11 35 58"><br><br/></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-comment"># 아래는 맥 PC의 현재 디렉터리에 이미지.jpg 파일을 ⇒ EC2 /home/ec2-user 디렉터리에 복사</span><br>예시) scp -i <span class="hljs-string">&#x27;ssh키파일&#x27;</span> 이미지.jpg ec2-user@퍼블릭<span class="hljs-variable constant_">IP</span><span class="hljs-symbol">:/home/ec2-user/</span><br></code></pre></td></tr></table></figure><br/><p><img src="https://user-images.githubusercontent.com/76810787/122242726-87c85400-cefe-11eb-99f8-8e8c52551b59.png" alt="스크린샷 2021-06-16 오후 11 37 40"><br><img src="https://user-images.githubusercontent.com/76810787/122242728-8860ea80-cefe-11eb-8a92-a942515d9f4c.png" alt="스크린샷 2021-06-16 오후 11 39 06"><br><br/></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment"># htop 설치</span><br>sudo yum -y <span class="hljs-keyword">install</span> htop<br><span class="hljs-comment">#htop 실행</span><br>htop<br></code></pre></td></tr></table></figure><br/><p><img src="https://user-images.githubusercontent.com/76810787/122242732-8860ea80-cefe-11eb-9274-d3d6ef050b26.png" alt="스크린샷 2021-06-16 오후 11 42 02"><br><br/></p><h2 id="CloudWatch-경보-생성"><a href="#CloudWatch-경보-생성" class="headerlink" title="CloudWatch 경보 생성"></a>CloudWatch 경보 생성</h2><p><code>CloudWatch</code> 검색 -&gt; <code>경보</code> 클릭 -&gt; <code>경보 생성</code> 클릭<br><br/></p><img width="1117" alt="스크린샷 2021-06-16 오후 11 43 15" src="https://user-images.githubusercontent.com/76810787/122242735-88f98100-cefe-11eb-9050-a53211f2e2c0.png"><br/><p><code>지표 선택</code> 클릭<br><br/></p><img width="806" alt="스크린샷 2021-06-16 오후 11 43 22" src="https://user-images.githubusercontent.com/76810787/122242739-88f98100-cefe-11eb-8c47-caf956a5de8b.png"><br/><p><code>EC2</code> 클릭<br><br/></p><img width="304" alt="스크린샷 2021-06-16 오후 11 43 28" src="https://user-images.githubusercontent.com/76810787/122242742-89921780-cefe-11eb-8595-59a1b32727a9.png"><br/><p><code>인스턴스별 지표</code> 선택<br><br/></p><img width="370" alt="스크린샷 2021-06-16 오후 11 43 40" src="https://user-images.githubusercontent.com/76810787/122242745-8a2aae00-cefe-11eb-8af1-de68b1a22704.png"><br/><p><strong>CPUUtilization</strong> 검색 후, 인스턴스 이름 확인 후에 체크박스 체크 !<br><code>지표 선택</code> 클릭<br><br/></p><img width="1184" alt="스크린샷 2021-06-16 오후 11 44 25" src="https://user-images.githubusercontent.com/76810787/122242750-8ac34480-cefe-11eb-813b-b9fccf77cc68.png"><br/><p>기간 <code>1분</code> 선택<br><br/></p><img width="762" alt="스크린샷 2021-06-16 오후 11 44 57" src="https://user-images.githubusercontent.com/76810787/122242756-8b5bdb00-cefe-11eb-8163-6b6cde08afe4.png"><br/><p><strong>조건</strong> 에서 차례대로 설정 -&gt; <code>다음</code> 클릭</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ada">임계값 유형 : 정적<br>경보 조건 : 보다 큼<br>...보다 : 50<br>누락된 데이터 처리 : 누락된 데이터를 양호(임계값 위반 안 함)(으)로 처리<br></code></pre></td></tr></table></figure><br/><img width="779" alt="스크린샷 2021-06-16 오후 11 46 20" src="https://user-images.githubusercontent.com/76810787/122242758-8b5bdb00-cefe-11eb-8e2e-c50bbb961756.png"><br/><br/><p>차례대로 설정 -&gt; <code>주제 생성</code> 클릭</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">경보 상태 트리거</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">경보 상태</span><br><span class="hljs-attribute">SNS 주제 선택</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">새 주제 생성</span><br><span class="hljs-attribute">새 주제 생성 이름</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">EC2_CPU_High_Alarms_Topic</span><br><span class="hljs-attribute">알림을 수신할 이메일 엔드포인트</span><span class="hljs-punctuation">:</span> <span class="hljs-string">자신의 이메일</span><br></code></pre></td></tr></table></figure><br/><img width="807" alt="스크린샷 2021-06-16 오후 11 48 06" src="https://user-images.githubusercontent.com/76810787/122242767-8c8d0800-cefe-11eb-837d-1d6ad03236a5.png"><br/><p><code>개인 이메일함</code>에 가서 <code>Confirm subscription</code> 클릭<br><br/></p><img width="513" alt="스크린샷 2021-06-16 오후 11 48 49" src="https://user-images.githubusercontent.com/76810787/122242771-8d259e80-cefe-11eb-9c81-05d50f0c4865.png"><br/><p><code>EC2 작업 추가</code> 클릭 -&gt; <code>경보 상태</code> 선택 -&gt; <code>이 인스턴스 재부팅</code> 선택 -&gt; <code>다음</code> 클릭<br><br/></p><img width="803" alt="스크린샷 2021-06-16 오후 11 46 50" src="https://user-images.githubusercontent.com/76810787/122242761-8bf47180-cefe-11eb-88d8-e9474f6fc81d.png"><br/><p>경보 이름 : WebSrv-CPU-High-Alarm<br><code>다음</code> 클릭<br><br/></p><img width="816" alt="스크린샷 2021-06-16 오후 11 49 45" src="https://user-images.githubusercontent.com/76810787/122242777-8dbe3500-cefe-11eb-982c-efadfd4bf8b1.png"><br/><p>맨 하단에 <code>경보 생성</code> 클릭<br><br/></p><img width="332" alt="스크린샷 2021-06-16 오후 11 49 55" src="https://user-images.githubusercontent.com/76810787/122242782-8e56cb80-cefe-11eb-8680-1fc2ddab669d.png"><br/><p>생성 완료 !<br><br/></p><img width="1113" alt="스크린샷 2021-06-16 오후 11 50 18" src="https://user-images.githubusercontent.com/76810787/122242785-8e56cb80-cefe-11eb-89aa-c7d5fa44b108.png"><br/><p><strong>1분 간격 모니터링 설정</strong><br><br/></p><p>추가 비용 발생<br><code>EC2</code> -&gt; <code>인스턴스</code> 누른 후 하단에 <code>모니터링</code> 클릭 -&gt; <code>세부 모니터링</code> 클릭<br><br/></p><img width="688" alt="스크린샷 2021-06-16 오후 11 51 17" src="https://user-images.githubusercontent.com/76810787/122242789-8eef6200-cefe-11eb-92c5-998855770a0e.png"><br/><p><code>활성화</code> 클릭 -&gt; <code>저장</code> 클릭<br><br/></p><img width="849" alt="스크린샷 2021-06-16 오후 11 51 25" src="https://user-images.githubusercontent.com/76810787/122242790-8f87f880-cefe-11eb-816b-b802a1d13b57.png"><br/><p><strong>CPU 부하 툴 설치</strong><br><br/></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">sudo amazon-linux-extras install -y epel<br>sudo yum install -y stress-ng<br>stress-ng -h<br><br><span class="hljs-comment"># CPU 부하 발생</span><br><br>sudo stress-ng <span class="hljs-params">--cpu</span> 1 <span class="hljs-params">--cpu-load</span> 70% <span class="hljs-params">--timeout</span> 10m <span class="hljs-params">--metrics</span> <span class="hljs-params">--times</span> <span class="hljs-params">--verify</span><br></code></pre></td></tr></table></figure><br/><p><img src="https://user-images.githubusercontent.com/76810787/122242793-90208f00-cefe-11eb-800d-6efac738a299.png" alt="스크린샷 2021-06-16 오후 11 53 07"><br><br/></p><p>CPU 사용량이 임계값 50이 넘으면 알람 메일이 온다<br><br/></p><p><img src="https://user-images.githubusercontent.com/76810787/122251568-95cda300-cf05-11eb-9560-c51d6f33d49c.png" alt="스크린샷 2021-06-17 오전 12 46 28"><br><br/><br><br/><br><br/></p><h2 id="과제-실습"><a href="#과제-실습" class="headerlink" title="과제 실습"></a>과제 실습</h2><p>리눅스 cli 창에 차례대로 입력</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 사진 -&gt; html 쪽으로 옮기기</span><br><span class="hljs-comment"># mv 사용할 때 뒤에 sudo  꼭 붙히기 !</span><br>     sudo mv <span class="hljs-regexp">/home/</span>ec2-user<span class="hljs-regexp">/이미지.jpg /</span>var<span class="hljs-regexp">/www/</span>html/<br><br><span class="hljs-comment"># html 파일 열기</span><br>     sudo nano <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/i</span>ndex.html<br><br><span class="hljs-comment"># 이미지 삽입</span><br>    &lt;img src=<span class="hljs-string">&quot;이미지.jpg&quot;</span>&gt;<br></code></pre></td></tr></table></figure><img width="325" alt="스크린샷 2021-06-16 오후 9 28 56" src="https://user-images.githubusercontent.com/76810787/122252468-55baf000-cf06-11eb-8a2b-34766d9c393b.png"><br/><p>과제 성공 !</p><br/><img width="1377" alt="스크린샷 2021-06-16 오후 9 23 43 복사본" src="https://user-images.githubusercontent.com/76810787/122253191-e85b8f00-cf06-11eb-8b69-1eef15acaf1d.png"><br/><h2 id="실습-완료-후-인스턴스-종료-gt-CloudWatch-경보-클릭-gt-작업-gt-삭제"><a href="#실습-완료-후-인스턴스-종료-gt-CloudWatch-경보-클릭-gt-작업-gt-삭제" class="headerlink" title="실습 완료 후 인스턴스 종료 -&gt; CloudWatch 경보 클릭 -&gt; 작업 -&gt; 삭제"></a>실습 완료 후 인스턴스 종료 -&gt; CloudWatch 경보 클릭 -&gt; 작업 -&gt; 삭제</h2><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 2주차-1 컴퓨팅 서비스</title>
    <link href="/2021/06/16/2021-06-16-AFOS-1/"/>
    <url>/2021/06/16/2021-06-16-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h2 id="AWS-글로벌-인프라"><a href="#AWS-글로벌-인프라" class="headerlink" title="AWS 글로벌 인프라"></a>AWS 글로벌 인프라</h2><ul><li>AWS는 전 세계에 분포되어 있는 데이터 센터에서 다양한 서비스를 제공하고 있는 클라우드 플랫폼</li><li>현재 AWS는 25개의 리전, 80개의 가용영역, 230개 이상의 POP을 운영 중</li><li>각각의 리전은 이중화된 100G 케이블 (해저 케이블)로 연결 됨, 암호화되어 전달<br/><br/></li></ul><span id="more"></span><ul><li>대륙별 국가별로 데이터 센터를 두는 이유는 운영 주체 구분&#x2F; 거리에 따른 지연&#x2F; 법적 규제 및 데이터 거버넌스&#x2F; 리전 내에서 사용 가능한 서비스&#x2F; 비용(리전 별로 다름) 등이 있다.<br/><br/></li></ul><h3 id="Latency"><a href="#Latency" class="headerlink" title="Latency"></a>Latency</h3><ul><li>패킷을 전송하는 곳에서 전달받는 곳까지 이동하는 데 걸리는 시간이다</li><li>1초 &#x3D; 1000ms</li><li>레이턴시를 극복하기 위해 대륙별 지역 서버를 배치한다. (ex. 게임 서버)<br/><br/><br/></li></ul><h2 id="AWS-리전-amp-가용영역-amp-Edge"><a href="#AWS-리전-amp-가용영역-amp-Edge" class="headerlink" title="AWS 리전 &amp; 가용영역 &amp; Edge"></a>AWS 리전 &amp; 가용영역 &amp; Edge</h2><h3 id="Region"><a href="#Region" class="headerlink" title="Region"></a>Region</h3><ul><li>지리적인 영역 내에서 격리 됨, 여러 개의 가용 영역(AZ)의 모음</li><li>리전은 최소 2개의 가용 영역으로 구성 (최대 6개의 가용 영역 구성)<br/><br/></li></ul><h3 id="가용-영역-AZ-Availabilty-Zone"><a href="#가용-영역-AZ-Availabilty-Zone" class="headerlink" title="가용 영역 (AZ, Availabilty Zone)"></a>가용 영역 (AZ, Availabilty Zone)</h3><ul><li><p>한 개 이상의 데이터 센터들의 모음</p></li><li><p>각 센터는 광통신 전용망으로 연결 됨</p></li><li><p>가용 영역과 인터넷 연결을 위한 이중화된 트랜짓 센터가 있음</p><br/></li><li><p>트랜짓 센터 : AWS 글로벌 백본 네트워크에 연결이 되고, 엣지 POP을 통해 CDN 등 서비스를 실행</p></li><li><p>CDN (Contents Delivery Network) : 사용자에게 웹 콘텐츠를 효율적으로 제공할 수 있게 전 세계에 분산되어 있는 서버 네트워크 * ex. <code>CloudFront, Global Accelerator</code></p><br/></li><li><p>AZ에서도 장애가 날 수 있다. 그러므로 <strong>서비스 구성 시 여러 가용 영역에 분산하여 처리할 수 있도록 구성</strong>을 권장</p><br/><br/><br/></li></ul><h2 id="Edge"><a href="#Edge" class="headerlink" title="Edge"></a>Edge</h2><ul><li>외부 인터넷과 AWS 글로벌 네트워크망과 연결하는 별도의 센터</li><li>Edge는 <code>Edge Location</code>과 리전별 <code>Edge Cache</code>로 구성</li><li><code>CloudFront</code> 와 같은 CDN 서비스의 데이터 캐시 기능을 제공<br/><br/><br/></li></ul><h2 id="EC2란-Elastic-Compute-Cloud"><a href="#EC2란-Elastic-Compute-Cloud" class="headerlink" title="EC2란 ? (Elastic Compute Cloud)"></a>EC2란 ? (Elastic Compute Cloud)</h2><ul><li><strong>Amazon EC2</strong> 는 AWS 클라우드에서 확장 가능 컴퓨팅 용량을 제공</li><li>EC2를 사용하면 선투자 필요 X, 더 빠르게 애플리케이션 개발&#x2F;배포</li><li>원하는 만큼의 가상서버 (&#x3D;인스턴스, Instance)를 구축하고 보안 및 네트워크 구성과 스토리지 관리 가능</li><li>EC2는 변동 사항에 따라 신속하게 규모를 확장&#x2F;축소할 수 있어 서버 트래픽 예측 필요성이 줄어듬<br/></li></ul><h3 id="EC2-제공-기능"><a href="#EC2-제공-기능" class="headerlink" title="EC2 제공 기능"></a>EC2 제공 기능</h3><ul><li>인스턴스 : 가상 컴퓨팅 환경</li><li>Amazon Machine Image (AMI) : 서버에 필요한 운영체제와 소프트웨어들이 구성된 상태로 제공되는 템플릿 (인스턴스 쉽게 제작 가능)</li><li>인스턴스 유형(Type) : 인스턴스를 위한 CPU, Memory, Storage, Networking 용량의 여러가지 구성 제공</li><li>키 페어를 사용하여 인스턴스 로그인 정보 보호 (AWS는 Public Key를 저장, 사용자는 Private Key를 안전한 장소에 보관하는 방식)</li><li>Amazon Elastic Block Store(Amazon EBS) 볼륨을 사용해 영구 스토리지 볼륨에 데이터 저장</li><li>인스턴스와 Amzon EBS 볼륨 등의 리소스를 다른 물리적 장소에서 액세스 할 수 있는 리전 및 가용 영역</li><li>보안 그룹을 사용해 인스턴스에 연결할 수 있는 프로토콜, 포트, 소스 IP 범위를 지정하는 방화벽 기능</li><li>탄력적 IP 주소 (Elastic IP) : 동적 클라우드 컴퓨팅을 위한 고정 IPv4 주소</li><li>태그 : 사용자가 생성하여 Amazon EC2 리소스에 할당하여 구분하는 용도</li><li>VPC (Virtual Private Clouds) : AWS에서 고객의 네트워크와 간편히 연결할 수 있는 가상 네트워크<br/><br/></li></ul><h3 id="인스턴스-유형-Types"><a href="#인스턴스-유형-Types" class="headerlink" title="인스턴스 유형 (Types)"></a>인스턴스 유형 (Types)</h3><ul><li>인스턴스를 실행할 때 인스턴스 유형에 따라 인스턴스에 사용되는 호스트 컴퓨터의 하드웨어가 결정</li><li>각 인스턴스 유형은 다른 컴퓨팅, 메모리, 스토리지 용량을 제공 (이 용량애 따라 서로 다른 인스턴스 패밀리로 분류 됨)<br/><br/></li></ul><h3 id="인스턴스-구입-옵션"><a href="#인스턴스-구입-옵션" class="headerlink" title="인스턴스 구입 옵션"></a>인스턴스 구입 옵션</h3><ul><li>온디맨드 인스턴스 : 시작 후, 인스턴스에 대한 비용을 초 단위로 지불</li><li>Saving Plans : 1년 or 3년 기간 동안 시간당 USD로 일관된 컴퓨팅 사용량을 약정하여 Amazon EC2 비용을 절감 가능</li><li>예약 인스턴스(RI) : 1년 or 3년 기간 동안 약정</li><li>스팟 인스턴스(Spot) : 미 사용 EC2 인스턴스를 요청 (EC2 비용 대폭 감소)</li><li>전용 호스트 : 인스턴스를 실행을 전담하는 실제 호스트 비용 지불, 기존의 소켓, 코어 또는 VM 소프트웨어 별 라이선스를 가져와 비용 절감</li><li>용량 예약 : 원하는 기간 동안 특정 가용 영역의 EC2 인스턴스에 대한 용량 예약<br/><br/></li></ul><h3 id="AMI-Amazon-Machine-Image"><a href="#AMI-Amazon-Machine-Image" class="headerlink" title="AMI (Amazon Machine Image)"></a>AMI (Amazon Machine Image)</h3><ul><li>소프트웨어 구성이 기재된 템플릿 (ex. OS, 애플리케이션 서버, 애플리케이션)</li><li>AMI에서 인스턴스 바로 실행 가능 (이 인스턴스는 AMI 사본으로, 클라우드에서 실행되는 가상 서버)<br/><br/></li></ul><h3 id="인스턴스-중지"><a href="#인스턴스-중지" class="headerlink" title="인스턴스 중지"></a>인스턴스 중지</h3><ul><li>정상적인 실행 종료 과정이 이루어지고 Stopped 상태가 됨</li><li>인스턴스의 모든 Amazon EBS 볼륨이 연결된 상태로 유지, 나중에 언제든지 시작 가능</li><li>중지되어 있는 상태 동안 추가 사용량에 대한 요금 부과 X (중지 -&gt; 실행 : 최소 1분의 요금 부과)</li><li>인스턴스 유형 변경 가능 (요금 부과)<br/><br/></li></ul><h3 id="인스턴스-종료"><a href="#인스턴스-종료" class="headerlink" title="인스턴스 종료"></a>인스턴스 종료</h3><ul><li>인스턴스 삭제</li><li>루트 디바이스 볼륨은 삭제 됨 but, Amazon EBS 볼륨은 기본적으로 유지</li><li>인스턴스 종료를 비활성화 시키면 실수로 인스턴스를 종료하는 일을 방지 가능<br/><br/><br/></li></ul><h2 id="EC2-Storage"><a href="#EC2-Storage" class="headerlink" title="EC2 Storage"></a>EC2 Storage</h2><h3 id="Amazon-EBS-Elastic-Block-Store"><a href="#Amazon-EBS-Elastic-Block-Store" class="headerlink" title="Amazon EBS (Elastic Block Store)"></a>Amazon EBS (Elastic Block Store)</h3><ul><li><p>내구성이 있는 블록 수준 스토리지 볼륨을 제공</p></li><li><p>실행 중인 인스턴스에 연결하는 것이 가능</p></li><li><p>한 인스턴스에서 EBS 볼륨을 분리한 다음 다른 인스턴스에 연결하는 것도 가능</p></li><li><p>인스턴스에 연결된 볼륨의 구성을 동적으로 변경 가능</p></li><li><p>EBS 암호화 기능을 사용하여 EBS 볼륨을 암호화된 볼륨으로 생성 가능</p></li><li><p>EBS 볼륨의 스냅샷을 생성하여 Amazon S3에 저장하면 데이터의 백업 사본을 유지 가능</p><br/></li><li><p>EBS Snapshot : 백업 기능, 증분식 백업이여서 마지막 스냅샷 이후 변경된 디바이스의 블록만이 저장 됨</p><br/><br/></li></ul><h2 id="Amazon-EC2-인스턴스-스토어-Instance-Storage"><a href="#Amazon-EC2-인스턴스-스토어-Instance-Storage" class="headerlink" title="Amazon EC2 인스턴스 스토어 (Instance Storage)"></a>Amazon EC2 인스턴스 스토어 (Instance Storage)</h2><ul><li>호스트 컴퓨터에 물리적으로 연결된 디스크의 스토리지</li><li>인스턴스에서 블록 수준의 <strong>임시 스토리지</strong>를 제공</li><li>인스턴스 스토어에 저장된 데이터는 연관 인스턴스의 수명 기간 동안에만 유지 됨</li><li>해당 인스턴스를 중단하거나 최대 절전 모드로 전환하거나 종료하면 <strong>인스턴스 스토어의 볼륨의 데이터가 손실</strong> 됨<br/><br/></li></ul><h3 id="Amazon-EFS-Elastic-File-System"><a href="#Amazon-EFS-Elastic-File-System" class="headerlink" title="Amazon EFS (Elastic File System)"></a>Amazon EFS (Elastic File System)</h3><ul><li>EC2에서 사용할 수 있는 <strong>리눅스 환경</strong>에 확장 가능한 파일 스토리지를 제공</li><li>EFS 파일 시스템을 만든 후 파일 시스템을 마운트하도록 인스턴스를 구성 가능</li><li>EBS는 단일 인스턴스에서만 연결 가능하지만, EFS는 <strong>여러 인스턴스에서 연결 가능</strong><br/><br/></li></ul><h3 id="Amazon-S3-Simple-Storage-Service"><a href="#Amazon-S3-Simple-Storage-Service" class="headerlink" title="Amazon S3 (Simple Storage Service)"></a>Amazon S3 (Simple Storage Service)</h3><ul><li>저렴하고 신뢰성 있는 데이터 스토리지 인프라에 액세스 가능</li><li>S3는 언제든지 EC2 내 또는 웹의 어디서나 원하는 데이터의 양을 저장하고, 가져올 수 있게 해주어서 웹 규모의 컴퓨팅 작업을 쉽게 수행할 수 있도록 설계 됨</li><li>데이터 및 애플리케이션의 백업 사본을 저장 가능<br/><br/><br/></li></ul><h2 id="EBS-볼륨-유형-SSD-HDD"><a href="#EBS-볼륨-유형-SSD-HDD" class="headerlink" title="EBS 볼륨 유형 (SSD, HDD)"></a>EBS 볼륨 유형 (SSD, HDD)</h2><h3 id="SSD-Solid-State-Drive"><a href="#SSD-Solid-State-Drive" class="headerlink" title="SSD(Solid-State Drive)"></a>SSD(Solid-State Drive)</h3><ul><li>주요 성능 특성이 IOPS인 작은 I&#x2F;O 크기의 읽기&#x2F; 쓰기 작업을 자주 처리하는 트랜잭션 워크로드에 최적화 됨</li><li>범용 SSD : 가격과 성능 간의 균형을 제공, 대부분의 워크로드에 이 볼륨을 사용하는 것이 좋음</li><li>프로비저닝된 IOPS SSD : 지연 시간이 짧거나, 처리량이 많은 미션 크리티컬 워크로드에 적합한 고성능을 제공<br/><br/></li></ul><h3 id="HDD-Hard-Disk-Drive"><a href="#HDD-Hard-Disk-Drive" class="headerlink" title="HDD (Hard Disk Drive)"></a>HDD (Hard Disk Drive)</h3><ul><li>주요 성능 특성이 처리량인 대규모 스트리밍 워크로드에 최적화되어 있음</li><li>처리량에 최적화된 HDD : 자주 액세스하는 처리량 집약적 워크로드에 적합한 저비용 HDD</li><li>Cold HDD : 자주 액세스하지 않는 워크로드에 적합한 가장 저렴한 HDD<br/><br/></li></ul><h3 id="이전-세대"><a href="#이전-세대" class="headerlink" title="이전 세대"></a>이전 세대</h3><ul><li>데이터를 자주 액세스하지 않고 성능이 중요하지 않은 소규모 데이터 세트가 있는 워크로드에 사용할 수 있는 하드 디스크 드라이브</li><li><strong>이전 세대 사용은 비권장</strong><br/><br/><br/></li></ul><h2 id="CloudWatch-모니터링"><a href="#CloudWatch-모니터링" class="headerlink" title="CloudWatch 모니터링"></a>CloudWatch 모니터링</h2><ul><li>Amaozon CloudWatch는 AWS 리소스와 AWS에서 실시간으로 실행 중인 애플리케이션을 모니터링</li><li>지표를 감시해 알림을 보내거나 임계값을 위반한 경우, 모니터링 중인 리소스를 자동으로 변경하는 경보를 생성 가능<br/><br/></li></ul><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 1주차-2 EC2(가상 서버) 배포 및 사용 - 실습</title>
    <link href="/2021/06/09/2021-06-09-AFOS-2/"/>
    <url>/2021/06/09/2021-06-09-AFOS-2/</url>
    
    <content type="html"><![CDATA[<ol><li><code>서울 리전</code>으로 변경<br/></li></ol><p><img src="https://user-images.githubusercontent.com/76810787/121358295-7666d100-c96d-11eb-815b-3b9d8a35504e.png" alt="seoul"><br><br/><br><br/><br><br/></p><ol start="2"><li><code>SSH 키 페어</code> 생성<br/></li></ol><ul><li>EC2 접속<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121359000-0442bc00-c96e-11eb-9b32-88ed3c36e10a.png" alt="EC2"><br><br/></p><ul><li>‘네트워크 보안’에서 <code>키 페어</code> 클릭<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121359011-073dac80-c96e-11eb-83b9-b8327e6a942c.png" alt="key"><br><br/></p><ul><li><code>키 페어 생성</code> 클릭<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121359479-7f0bd700-c96e-11eb-88d0-25e84945dbcc.png" alt="스크린샷 2021-06-09 오후 10 01 25"><br><br/></p><ul><li>이름을 정하고, 원격 프로그램을 사용할 것이 아니니 <code>pem</code> 체크 (기본갑) 후에 <code>키 페어 생성</code> 클릭<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121359483-7fa46d80-c96e-11eb-8a77-aef5fd9a65e5.png" alt="스크린샷 2021-06-09 오후 10 01 51"><br><br/></p><ul><li>키는 파일로 저장해둡시다 ! 저장 클릭<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121359486-803d0400-c96e-11eb-8674-56b73f3da6e0.png" alt="스크린샷 2021-06-09 오후 10 02 14"><br><br/></p><ul><li>키 페어 생성 완료 !<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121359489-803d0400-c96e-11eb-9c3e-f6f88afeb7ab.png" alt="스크린샷 2021-06-09 오후 10 02 36"><br><br/><br><br/><br><br/></p><ol start="3"><li>인스턴스 생성</li></ol><ul><li><code>EC2 대시보드</code> 클릭 후에 <code>인스턴스(실행 중)</code> 클릭<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360877-c0e94d00-c96f-11eb-800d-75c019b55f29.png" alt="스크린샷 2021-06-09 오후 10 11 29"><br><br/></p><ul><li><code>인스턴스 시작</code> 클릭<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360839-baf36c00-c96f-11eb-9f3e-d23b6d85a3e6.png" alt="스크린샷 2021-06-09 오후 10 08 04"><br><br/></p><ul><li>인스턴스 시작하는데 필요한 소프트웨어 구성이 포함된 템플릿, AMI (Amazon Machine Image)</li><li>제일 첫번째인 <code>리눅스 2</code> 선택  <br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360844-bc249900-c96f-11eb-906a-f14f7835be20.png" alt="스크린샷 2021-06-09 오후 10 08 25"><br><br/></p><ul><li>인스턴스 유형에서 원하는 메모리, CPU 선택할 수 있음</li><li>기본 값으로 설정해서 가장 밑 오른쪽에 있는 <code>다음 세부구성</code> 클릭 ! (프리티어가 적히지 않은 유형은 돈이 나간다 ..ㅠ)</li><li>사진 상 안 보이지만 가장 밑 가운데 파란색 버튼 누르면 바로 인스턴스가 생성되니 조심 !<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360847-bcbd2f80-c96f-11eb-9344-1ef6ac5a50f2.png" alt="스크린샷 2021-06-09 오후 10 08 41"><br><br/></p><ul><li><p>GB 와 GiB의 차이 <a href="hhttps://ko.wikipedia.org/wiki/%EA%B8%B0%EB%B9%84%EB%B0%94%EC%9D%B4%ED%8A%B8">hhttps://ko.wikipedia.org/wiki/%EA%B8%B0%EB%B9%84%EB%B0%94%EC%9D%B4%ED%8A%B8</a></p><br/></li><li><p>인스턴스 세부 정보 구성에서 퍼블릭 IP를 할당해야 인스턴스에 접속이 가능</p></li><li><p>기본 값으로 설정하고 넘어가자</p><br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360852-bdee5c80-c96f-11eb-8cfc-96584218211a.png" alt="스크린샷 2021-06-09 오후 10 08 54"><br><br/></p><ul><li>스토리지는 말 그대로 저장할 수 있는 공간</li><li>스토리지도 기본 값으로 설정 !<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360855-bf1f8980-c96f-11eb-8e8d-5d57f1a6a40d.png" alt="스크린샷 2021-06-09 오후 10 09 04"><br><br/></p><ul><li>태그는 구분하는 용도로 사용</li><li>키는 <code>Name</code> , 값은 <code>이름</code>으로 해준다 (마음대로 설정 가능)<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360863-bf1f8980-c96f-11eb-80f8-91e51b6e7667.png" alt="스크린샷 2021-06-09 오후 10 09 22"><br><br/></p><ul><li>보안 그룹 - 트래픽 제어하는 방화벽 세트, 허용 규칙 추가 가능</li><li>보안 그룹도 기본 값으로 설정 !<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360867-bfb82000-c96f-11eb-81c4-def20bef3a4c.png" alt="스크린샷 2021-06-09 오후 10 09 34"></p><ul><li><p>TCP 22 포트는 어떤 의미인가 ?</p></li><li><p>SSH 사용하는 포트 번호</p></li><li><p>각 포트 별로 어떤 서비스로 전달할지 식별 가능</p><br/></li><li><p><code>시작하기</code> 클릭</p><br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360868-bfb82000-c96f-11eb-82bb-1b61b9b3b1ec.png" alt="스크린샷 2021-06-09 오후 10 09 42"><br><br/></p><ul><li>체크 박스에 <code>체크</code> 한 후에 인스턴스 시작 클릭 !<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360871-c050b680-c96f-11eb-991c-0ac15b52e7c6.png" alt="스크린샷 2021-06-09 오후 10 09 58"><br><br/></p><ul><li>인스턴스 생성 완료 !<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121360876-c0e94d00-c96f-11eb-9eaa-abf3d030d7b2.png" alt="스크린샷 2021-06-09 오후 10 10 22"><br><br/><br><br/><br><br/></p><ol start="4"><li>EC2에 웹 서비스 설치<br/></li></ol><ul><li><p>연결을 누르면 인스턴스에 연결할 수 있음, 연결을 누르자 (사용자 이름 변경 절대 금지 !!!, 그럼 실행 안 됨)<br><img src="https://user-images.githubusercontent.com/76810787/121366218-45d66580-c974-11eb-8dad-81540768d29c.png" alt="스크린샷 2021-06-09 오후 10 44 03"></p><br/></li><li><p>EC2 접속 성공 !</p><br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121366232-4838bf80-c974-11eb-9225-574b7c8995fc.png" alt="스크린샷 2021-06-09 오후 10 44 17"><br><br/></p><ul><li>아래 명령어를 순서대로 친다<br/></li></ul><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs subunit"># 관리자 권한으로 변경<br>[ec2-user@ip<span class="hljs-string">-172</span><span class="hljs-string">-31</span><span class="hljs-string">-46</span><span class="hljs-string">-115</span> ~]$ sudo su -<br><br># 웹 서비스 설치<br>[root@ip<span class="hljs-string">-172</span><span class="hljs-string">-31</span><span class="hljs-string">-46</span><span class="hljs-string">-115</span> ~]# yum install httpd -y<br><br># 웹 서비스 시작<br>[root@ip<span class="hljs-string">-172</span><span class="hljs-string">-31</span><span class="hljs-string">-46</span><span class="hljs-string">-115</span> ~]# systemctl start httpd<br><br># 웹 페이지 구성<br># 기본 웹페이지 디렉터리는 /var/www/html<br>[root@ip<span class="hljs-string">-172</span><span class="hljs-string">-31</span><span class="hljs-string">-46</span><span class="hljs-string">-115</span> ~]# echo &quot;&lt;h1&gt;Test Web Server&lt;/h1&gt;&quot; &gt; /var/www/html/ index.html<br><br># 웹 페이지 파일 생성 확인<br>[root@ip<span class="hljs-string">-172</span><span class="hljs-string">-31</span><span class="hljs-string">-46</span><span class="hljs-string">-115</span> ~]# ls /var/www/html/<br><br># 웹페이지 접속 확인<br>[root@ip<span class="hljs-string">-172</span><span class="hljs-string">-31</span><span class="hljs-string">-46</span><span class="hljs-string">-115</span> ~]# curl localhost<br></code></pre></td></tr></table></figure><br/><ul><li>다시 인스턴스 연결 페이지로 가서 퍼블릭 주소를 복사 후 들어가면, 웹 접속이 안 될 것이다<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121370671-df534680-c977-11eb-85ec-09d69016acc6.png" alt="스크린샷 2021-06-09 오후 11 00 02"><br><br/></p><ul><li>보안그룹에 가서 인바운드 규칙에 <code>HTTP</code>를 허용해줘야 웹 사이트 접속이 된다. 허용해주자</li><li>인바운드 규칙 편집 클릭<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121370675-e0847380-c977-11eb-86c7-0cf6b05d3a8d.png" alt="스크린샷 2021-06-09 오후 11 09 14"><br><br/></p><ul><li>HTTP를 추가해준다<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121370681-e1b5a080-c977-11eb-9b65-24e67d80ac3c.png" alt="스크린샷 2021-06-09 오후 11 09 40"><br><br/></p><ul><li>그럼 접속 성공 !!<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121371104-3f49ed00-c978-11eb-9046-977ea8fe66d9.png" alt="스크린샷 2021-06-09 오후 11 12 53"></p><h2 id="실습이-끝난-후에-EC2-종료-꼭-하기"><a href="#실습이-끝난-후에-EC2-종료-꼭-하기" class="headerlink" title="실습이 끝난 후에 EC2 종료 꼭 하기"></a>실습이 끝난 후에 EC2 종료 꼭 하기</h2><br/><br/><br/><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[AWS] 1주차-1 AWS &amp; 가상 서버</title>
    <link href="/2021/06/09/2021-06-09-AFOS-1/"/>
    <url>/2021/06/09/2021-06-09-AFOS-1/</url>
    
    <content type="html"><![CDATA[<h2 id="클라우드란"><a href="#클라우드란" class="headerlink" title="클라우드란 ?"></a>클라우드란 ?</h2><ul><li>클라우드는 인터넷을 통해서 자유롭게 IT 리소스를 사용할 수 있게 해주는 서비스<br/><br/><br/></li></ul><span id="more"></span><h2 id="클라우드-서비스의-종류"><a href="#클라우드-서비스의-종류" class="headerlink" title="클라우드 서비스의 종류"></a>클라우드 서비스의 종류</h2><h3 id="IaaS-Infrastructure-as-a-Service"><a href="#IaaS-Infrastructure-as-a-Service" class="headerlink" title="IaaS (Infrastructure as a Service)"></a>IaaS (Infrastructure as a Service)</h3><ul><li>인터넷을 통해 사용자에게 IT 인프라를 제공하는 클라우드 컴퓨팅</li><li>주로 서버리스 컴퓨팅과 관련이 있음</li><li>사용자가 온프레미스 컴퓨팅 리소스를 오버헤드 없이 누릴 수 있음</li><li>운영 체제, 데이터 미들웨어, 런타임, 애플리케이션을 사용자가 관리</li><li>비교적으로 사용자가 관리해야 부분이 다른 서비스들 보다 많음</li></ul><h3 id="PaaS-Platform-as-a-Service"><a href="#PaaS-Platform-as-a-Service" class="headerlink" title="PaaS (Platform as a Service)"></a>PaaS (Platform as a Service)</h3><ul><li>제공업체를 통해 하드웨어, 애플리케이션 소프트웨어 플랫폼이 제공되는 클라우드 컴퓨팅</li><li>주로 개발자나 프로그래머가 사용하는 PaaS는 인프라를 구축 및 유지 관리할 필요가 없음</li><li>PasaS에서 자체 애플리케이션을 개발하고 실행 및 관리를 할 수 있도록 해줌</li><li>클라우드 기반으로 확장성이 뛰어나고 마이그레이션이 편리함</li></ul><h3 id="Serverless"><a href="#Serverless" class="headerlink" title="Serverless"></a>Serverless</h3><ul><li>개발자가 서버를 관리할 필요 X, 애플리케이션을 빌드, 실행할 수 있도록 하는 클라우드 네이티브 개발 모델</li><li>클라우드 제공업체가 서버 인프라에 대한 프로비저닝, 유지 관리, 스케일링 등 작업 처리</li><li>개발자는 코드를 배포하기 위해 컨테이너에 패키징하면 됨</li></ul><h3 id="SaaS-Software-as-a-Service"><a href="#SaaS-Software-as-a-Service" class="headerlink" title="SaaS (Software as a Service)"></a>SaaS (Software as a Service)</h3><ul><li>클라우드 애플리케이션 및 기본 IT 인프라, 플랫폼을 사용자에게 제공하는 클라우드 컴퓨팅</li><li>사용자가 관리 X</li><li>소프트웨어 영구 구매 X, On-premise IT 인프라에 투자 X &#x3D;&gt; 초기 비용 감소</li><li>서비스 성능은 인터넷 속도에 따라 달라짐, 그러므로 고속 네트워크 하드웨어에 투자할 필요 있음</li></ul><br/><br/><h4 id="미들웨어-Middleware"><a href="#미들웨어-Middleware" class="headerlink" title="미들웨어 (Middleware)"></a>미들웨어 (Middleware)</h4><ul><li>공통 서비스 및 기능을 애플리케이션에 제공하는 소프트웨어 (ex. 데이터 관리, 애플리케이션 서비스, 메시징, 인증 및 API 관리)</li><li>개발자가 애플리케이션을 효율적으로 구축할 수 있도록 지원</li><li>클라우드 컴퓨팅에 미들웨어를 사용하면 복잡성을 관리하여 애플리케이션 개발을 신속, 비용 효율적으로 유지 가능</li></ul><h4 id="런타임"><a href="#런타임" class="headerlink" title="런타임"></a>런타임</h4><ul><li>컴퓨터 프로그램이 작동되는 동안의 동작을 가르킴<br/><br/><br/></li></ul><h2 id="클라우드-구현-모델"><a href="#클라우드-구현-모델" class="headerlink" title="클라우드 구현 모델"></a>클라우드 구현 모델</h2><h3 id="퍼블릭-클라우드-Public-Cloud"><a href="#퍼블릭-클라우드-Public-Cloud" class="headerlink" title="퍼블릭 클라우드 (Public-Cloud)"></a>퍼블릭 클라우드 (Public-Cloud)</h3><ul><li>인터넷을 사용하여 AWS Cloud를 사용<br/><br/><br/></li></ul><h3 id="프라이빗-클라우드-Private-Cloud"><a href="#프라이빗-클라우드-Private-Cloud" class="headerlink" title="프라이빗 클라우드 (Private-Cloud)"></a>프라이빗 클라우드 (Private-Cloud)</h3><ul><li>온프레미스 (On-premises) 내에 클라우드 플랫폼을 구축하여 사용<br/><br/><br/></li></ul><h3 id="하이브리드-클라우드-Hybrid-Cloud"><a href="#하이브리드-클라우드-Hybrid-Cloud" class="headerlink" title="하이브리드 클라우드 (Hybrid-Cloud)"></a>하이브리드 클라우드 (Hybrid-Cloud)</h3><ul><li>퍼블릭 클라우드와 프라이빗 클라우드를 동시에 사용<br/><br/><br/></li></ul><h2 id="Amazon-Polly"><a href="#Amazon-Polly" class="headerlink" title="Amazon Polly"></a>Amazon Polly</h2><ul><li>텍스트를 음성으로 변환하는 서비스</li><li>신경망 서비스를 통해 더 자연스러운 음성 듣기 가능<br/></li></ul><p><img src="https://user-images.githubusercontent.com/76810787/121356697-0d328e00-c96c-11eb-8072-554df59ef52a.png" alt="Amazon Polly"><br><br/><br><br/></p><hr/><p><strong>참고 자료 : AFOS[2기] 노션 내용, Redhat 사이트</strong></p>]]></content>
    
    
    <categories>
      
      <category>AWS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFOS[2기]</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
